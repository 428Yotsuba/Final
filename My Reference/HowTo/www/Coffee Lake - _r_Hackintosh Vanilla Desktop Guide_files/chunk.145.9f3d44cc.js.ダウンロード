(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[145,182],{107:function(e,t,r){"use strict";var i=r(31),s=r.n(i),a=r(186),n=r.n(a),o=r(289),u=r.n(o),c=r(4),l=r(94),d=r.n(l),h=r(198),p=r(93),g=r(36),m=r(11);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){b(e,t,r[t])})}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y="document",D="link",O="group";class I extends(Object(c.Record)({uid:"",title:"",kind:y,description:"",path:null,href:null,documentURL:null,createdAt:new Date,pages:Object(c.List)(),github:null,isPathUntouched:!1,stats:null,edits:new g.a})){static isValidTitle(e){return e.length>0&&e.length<=I.TITLE_LIMIT}static isValidHref(e){return u()(e)}get isLink(){return this.kind===D}get isDocument(){return this.kind===y}get isGroup(){return this.kind===O}get lastModifiedAt(){return this.edits.lastContributionAt||this.createdAt}get modifiedBy(){return s()(!1,"Page.modifiedBy is deprecated, use Page.edits.users instead"),this.edits.users.toOrderedSet()}static create(e){if(void 0===e&&(e={}),e instanceof I)return e;let t=e.kind;if(null==t&&(t=e.href&&!e.documentURL?D:y),t===y)return I.createDocument(e);if(t===O)return I.createGroup(e);if(t===D)return I.createLink(e);throw new Error(`Cannot create Page of unknown kind "${t}"`)}static createDocument(e){return void 0===e&&(e={}),e instanceof I?e:(s()(!e.href,`Page of kind "${y}" must not have a href`),new I({pages:Object(c.List)(e.pages||[]).map(e=>I.create(e)),isPathUntouched:null!=e.isPathUntouched&&e.isPathUntouched,kind:y,uid:e.uid||Object(m.f)(),title:I.normalizeTitle(e.title||""),description:I.normalizeDescription(e.description||""),createdAt:new Date(e.createdAt||Date.now()),github:e.github?p.a.create(e.github):null,path:I.normalizePath(e.path||e.title||""),documentURL:e.documentURL||null,stats:h.a.create(e.stats||{}),edits:g.a.create(e.edits||{})}))}static createLink(e){return void 0===e&&(e={}),e instanceof I?e:(s()(!e.documentURL,`Page of kind "${D}" must not have a documentURL`),s()(0===Object(c.List)(e.pages||[]).size,`Page of kind "${D}" must not have children pages`),new I({kind:D,uid:e.uid||Object(m.f)(),title:I.normalizeTitle(e.title||""),href:e.href,createdAt:new Date(e.createdAt||Date.now()),github:e.github?p.a.create(e.github):null,edits:g.a.create(e.edits||{})}))}static createGroup(e){return void 0===e&&(e={}),e instanceof I?e:(s()(!e.href,`Page of kind "${O}" must not have a href`),s()(!e.documentURL,`Page of kind "${O}" must not have a documentURL`),new I({pages:Object(c.List)(e.pages||[]).map(e=>I.create(e)),isPathUntouched:null!=e.isPathUntouched&&e.isPathUntouched,kind:O,uid:e.uid||Object(m.f)(),title:I.normalizeTitle(e.title||""),description:I.normalizeDescription(e.description||""),createdAt:new Date(e.createdAt||Date.now()),github:e.github?p.a.create(e.github):null,path:I.normalizePath(e.path||e.title||""),edits:g.a.create(e.edits||{})}))}static createUntitled(){return I.create({title:"Untitled",isPathUntouched:!0})}static deserializeTree(e){const t=(e,r)=>f({},e,{pages:(e.pages||[]).map(e=>r[e]).map(e=>t(e,r))});return I.deserialize(t(e.pages[e.entryPage],e.pages))}static deserialize(e){return I.create(f({},e,{edits:e.edits?g.a.deserialize(e.edits):(new g.a).addContributions(e.modifiedBy||[],new Date(e.lastModifiedAt||Date.now())),pages:(e.pages||[]).map(e=>I.deserialize(e)),github:"document"===e.kind&&e.github?p.a.deserialize(e.github):null,stats:e.stats?h.a.deserialize(e.stats):null}))}serializeTree(){return{entryPage:this.uid,pages:this.toFlatMap().map(e=>e.serialize()).toObject()}}serialize(){return{uid:this.uid,kind:this.kind,title:this.title,path:this.path,href:this.href,description:this.description,documentURL:this.documentURL,createdAt:this.createdAt.getTime(),edits:this.edits.serialize(),github:this.isDocument&&this.github?this.github.serialize():null,stats:this.stats?this.stats.serialize():null,pages:this.pages.isEmpty()?null:this.pages.map(e=>e.uid).toArray()}}regenerateUID(){return this.merge({uid:Object(m.f)()})}toJSON(){const e=this.toObject();return e.pages=e.pages.toArray().map(e=>e.toJS()),e}compare(e){return this.uid===e.uid&&this.title===e.title&&this.description===e.description&&this.path===e.path&&this.href===e.href&&this.documentURL===e.documentURL}toFlatMap(){return this.pages.reduce((e,t)=>e.merge(t.toFlatMap()),Object(c.OrderedMap)({[this.uid]:this}))}toFlatArray(){return this.toFlatMap().valueSeq().toArray()}toGitHubPathsMap(){return this.toFlatMap().filter(e=>!!e.github).mapEntries(e=>{let t=e[0];return[e[1].github.filePath,t]}).toMap()}getParentMap(){const e=this.toFlatMap(),t={};return e.forEach(e=>e.pages.forEach(r=>{t[r.uid]=e.uid})),Object(c.Map)(t)}getURLMap(){const e=this.toFlatMap(),t={};return e.forEach(e=>{if(e.isGroup||e.isLink)return;const r=this.getURLOf(e);"string"==typeof r&&(t[r]=e.uid)}),Object(c.Map)(t)}getByID(e){return this.findPage(t=>{return t.uid===e})}findPage(e){return e(this)?this:this.toFlatMap().find(t=>e(t))||null}findClosestDocumentPage(e,t){const r=this.getFlatIndex(e),i=this.getPageAtFlatIndex(r+t);return i?"document"===i.kind?i:this.findClosestDocumentPage(i,t):null}getByURL(e){const t=e.replace(/^\//,"").split("/");if(!t[0])return this;const r=t[0],i=t.slice(1).join("/"),s=this.pages.find(e=>e.path===r);return s?s.getByURL(i):null}getChildAt(e){return this.pages.get(e)}getIndexOf(e){return this.pages.findIndex(t=>t.uid==e.uid)}getChild(e){return this.pages.find(t=>t.path===e)}getNewPath(e){return w(this.pages.map(e=>e.path),e)}getParentsOf(e){const t=this.toFlatMap(),r=this.getParentMap();if(!t.get(e.uid))return null;let i=t.get(r.get(e.uid)),s=new c.List;for(;i;)s=s.unshift(i),i=t.get(r.get(i.uid));return s}getParentOf(e){const t=this.getParentsOf(e);return t?t.last():null}getFlatIndex(e){return this.toFlatMap().toList().indexOf(e)}getPageAtFlatIndex(e){const t=this.toFlatMap().toList();return e<0||e>=t.size?null:t.get(e)}getURLOf(e){if(e.isLink)throw new Error(`Cannot .getURLOf() a page with kind "${e.kind}"`);const t=this.getParentsOf(e);return t?t.push(e).shift().map(e=>e.path).join("/"):null}getURLOfParentOf(e){const t=this.getParentsOf(e);return t?t.shift().map(e=>e.path).join("/"):null}getURLRelativeTo(e){if(this.isLink||this.isGroup)throw new Error(`Cannot .getURLRelativeTo() for a page with kind "${this.kind}"`);if(!this.path)throw new Error(`Missing path to getURLRelativeTo() for page ${this.uid} of kind "${this.kind}"`);return e?`${e}/${this.path}`:this.path}hasChildPage(e){return this.hasChildPageWith(e,(e,t)=>e.uid==t.uid)}hasChildPageWith(e,t){return this.pages.some(r=>t(r,e))}hasPage(e){return Boolean(this.getByID(e.uid))}markAsModifiedBy(e){return this.merge({edits:this.edits.addContribution(e),stats:this.stats&&this.stats.incrementRevisions()})}setPage(e){return this.updatePage(e,t=>e)}updatePage(e,t){const r="string"==typeof e?e:e.uid;let i=!1;const s=e=>i?e:e.uid===r?(i=!0,t(e)):e.merge({pages:e.pages.map(s)});return s(this)}updateChildPage(e){return this.set("pages",this.pages.map(t=>t.uid===e.uid?e:t))}updatePagePath(e,t){let r=e.uid;return this.updatePage(r,e=>e.merge({path:I.normalizePath(t),isPathUntouched:!1}))}updatePageTitle(e,t){const r=I.normalizeTitle(t);if(!r)return this;const i=I.normalizePath(r),s=this.getParentOf(e);return this.updatePage(e.uid,e=>{let t=e.path;return e.isLink?t=null:e.isPathUntouched&&e.path!=i&&s&&(t=s.getNewPath(i)),e.merge({title:r,path:t})})}updatePageDescription(e,t){return this.updatePage(e.uid,e=>e.merge({description:I.normalizeDescription(t)}))}removePage(e){const t=this.pages;return this.merge({pages:t.map(t=>t.uid==e.uid?null:t.removePage(e)).filter(Boolean)})}insertChildPage(e,t){return this.merge({pages:this.pages.insert(e,t.merge({path:t.isLink?null:this.getNewPath(t.path)}))})}createChildPage(e){return this.insertChildPage(this.pages.size,e)}setPages(e){return this.merge({pages:Object(c.List)()}).insertPages(0,e)}isChildInGroup(e){if(e.isGroup)return!0;const t=this.getParentsOf(e);return null!=t&&t.some(e=>e.isGroup)}insertPages(e,t){const r=this.pages.size-e;return t.reduce((e,t)=>e.insertChildPage(e.pages.size-r,t),this)}insertPage(e,t,r){const i=this.pages;return this.uid==e.uid?this.insertChildPage(t,r):this.merge({pages:i.map(i=>i.insertPage(e,t,r))})}unwrapPageChildren(e){const t=this.getParentOf(e);if(!t)return this;const r=this.pages.findIndex(t=>t.uid===e.uid),i=t.merge({pages:this.pages.slice(0,r).concat(e.pages).concat(this.pages.slice(r+1))});return this.setPage(i)}movePage(e,t,r){let i=e;return t.hasPage(i)||(i=i.merge({path:i.isLink?null:t.getNewPath(i.path)})),i.hasPage(t)?this.unwrapPageChildren(i).insertPage(t,r,i.merge({pages:Object(c.List)()})):this.removePage(i).insertPage(t,r,i)}movePageBefore(e,t){const r=this.getParentOf(t);if(!r)return this;const i=r.getIndexOf(e),s=r.getIndexOf(t),a=i>=0&&s>i?s-1:s;return this.movePage(e,r,a)}mapPages(e){return this.toFlatMap().reduce((t,r)=>t.updatePage(r,e),this)}deduplicatePaths(){const e=this.pages.reduce((e,t)=>{const r=t.isLink?t:t.deduplicatePaths().merge({path:w(e.map(e=>e.path),t.path)});return e.push(r)},Object(c.List)());return this.merge({pages:e})}static normalizePath(e){const t=n()(e,{tone:!1,custom:{".":".","+":"+"},separateNumbers:!1});return t.length>100?I.normalizePath(t.slice(0,100)):t||"undefined"}static normalizeTitle(e){return v(e).trim().slice(0,I.TITLE_LIMIT).trim()}static normalizeDescription(e){return v(e).trim().slice(0,I.DESCRIPTION_LIMIT).trim()}static getParentURL(e){return e.split("/").slice(0,-1).join("/")}}function w(e,t){const r=Object(c.Set)(e);if(!r.has(t))return t;const i=e=>{const s=`-${e}`,a=`${t.slice(0,I.PATH_LIMIT-s.length)}${s}`;return r.has(a)?i(e+1):a};return i(1)}function v(e){return e.replace(/(\r\n|\r|\n)/g," ")}b(I,"PATH_LIMIT",100),b(I,"TITLE_LIMIT",100),b(I,"DESCRIPTION_LIMIT",200),b(I,"KIND_DOCUMENT",y),b(I,"KIND_LINK",D),b(I,"KIND_GROUP",O),d()(I.prototype,["toFlatMap","getParentMap"],{takesArguments:!1}),d()(I.prototype,["getByURL","getURLOf"],{takesArguments:!0}),t.a=I},108:function(e,t,r){"use strict";var i=r(4),s=r(11),a=r(169),n=r(46),o=r(170),u=r(124),c=r(83),l=r(53),d=r(80);function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g=["education","opensource","nonprofit"];class m extends(Object(a.a)("org",{kind:"org",name:"",createdAt:new Date,createdBy:"",logoURL:null,type:null,spacesPermission:Object(i.Map)(),customDomain:null,ssoSignInLabel:null,lockReason:null})){static create(e){return void 0===e&&(e={}),e instanceof m?e:new m(h({},e,{uid:e.uid||Object(s.f)(),createdAt:new Date(e.createdAt||Date.now()),baseDomain:m.normalizeBaseDomain(e.baseDomain||""),customDomain:e.customDomain||null}))}regenerateUID(){return this.merge({uid:Object(s.f)()})}static deserialize(e){return new m(h({},e,{spacesPermission:Object(i.Map)(e.spacesPermission),createdAt:new Date(e.createdAt),usageStatuses:e.usageStatuses?d.a.deserialize(e.usageStatuses):null}))}serialize(){return{kind:this.kind,uid:this.uid,name:this.name,createdAt:this.createdAt.getTime(),createdBy:this.createdBy,logoURL:this.logoURL,baseDomain:this.baseDomain,type:this.type,spacesPermission:this.spacesPermission.toJS(),customDomain:this.customDomain,ssoSignInLabel:this.ssoSignInLabel,defaultSpace:this.defaultSpace,lockReason:this.lockReason,usageStatuses:this.usageStatuses?this.usageStatuses.serialize():null}}isOwner(e){return this.createdBy===e}get isLocked(){return null!==this.lockReason}canSuperAdmin(e){return e.isSiteAdmin||this.isOwner(e.uid)}get isNonProfit(){return!!this.type&&g.includes(this.type)}get isEnterprise(){return!!this.type&&"enterprise"===this.type}get canInviteMembers(){return!this.hasReachedMembersLimits&&!this.hasExceededUsageLimits}toCreateUpdate(){const e=new s.c,t=o.a.createForUserID({userID:this.createdBy,joinedAt:this.createdAt,role:n.a.ADMIN}),r=c.a.createFromOwner(this);e.set(this.query(),this).set(c.a.queryByDomain(r.domain),r).merge(t.toUpdate(this.uid),u.a.getNewInvitesUpdate(this.uid));const i=l.a.createFromOrg(this);return i&&e.set(l.a.queryByDomain(i.domain),i),e}toCustomDomainUpdate(e){const t=new s.c,r=this.merge({customDomain:e}),i=l.a.createFromOrg(r),a=l.a.createFromOrg(this);return t.update(this.query(),{customDomain:i?e:null}),a&&this.customDomain&&this.customDomain!==e&&t.set(l.a.queryByDomain(this.customDomain),a.merge({deprecated:!0})),i&&e&&t.set(l.a.queryByDomain(e),i),t}toTransferOwnershipUpdate(e){return(new s.c).update(this.query(),{createdBy:e})}toLockReasonUpdate(e){return void 0===e&&(e=null),(new s.c).update(this.query(),{lockReason:e})}toTypeUpdate(e){return void 0===e&&(e=null),(new s.c).update(this.query(),{type:e})}toDeleteUpdate(){const e=new s.c;return e.delete(this.query()),e}setCustomDomain(e){return this.merge({customDomain:e||null})}}p(m,"NAME_LIMIT",65),t.a=m},124:function(e,t,r){"use strict";var i=r(4),s=r(11),a=r(46);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends(Object(s.b)("invite",{uid:"",role:"reader",createdAt:new Date,teamID:null})){static create(e){let t=e.role,r=e.teamID;return new o({uid:Object(s.f)(),createdAt:new Date,teamID:r||null,role:t})}get isTeam(){return Boolean(this.teamID)}get canEdit(){return/^(writer|reviewer|admin)$/.test(this.role)}get canReview(){return/^(reviewer|admin)$/.test(this.role)}get canAdmin(){return this.role==a.a.ADMIN}static queryByOrg(e){return this.query(["orgs",e,"invites"])}static queryByID(e){let t=e.orgID,r=e.inviteID;return this.queryByOrg(t).doc(r)}query(e){return o.queryByID({orgID:e,inviteID:this.uid})}static getNewInvitesMap(e){return Object.values(a.a).reduce((t,r)=>{const i=o.create({role:r,teamID:e});return t.set(i.uid,i)},Object(i.Map)())}static getNewInvitesUpdate(e,t){const r=new s.c;return o.getNewInvitesMap(t).forEach(t=>{r.set(t.query(e),t)}),r}static deserialize(e){return new o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){n(e,t,r[t])})}return e}({},e,{createdAt:new Date(e.createdAt)}))}serialize(){return{uid:this.uid,role:this.role,teamID:this.teamID,createdAt:this.createdAt.getTime()}}}t.a=o},125:function(e,t,r){"use strict";var i=r(4);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends(Object(i.Record)({repoID:"",sha:"",message:"",ref:null,isGitBookBot:!1})){static normalizeMessage(e){return e.split("\n")[0].slice(0,100)}static create(e){return void 0===e&&(e={}),e instanceof a?e:new a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){s(e,t,r[t])})}return e}({},e,{message:e.message&&a.normalizeMessage(e.message),ref:e.ref?e.ref:null}))}static deserialize(e){return a.create(e)}serialize(){return{repoID:this.repoID,sha:this.sha,ref:this.ref,message:this.message,isGitBookBot:this.isGitBookBot}}get treeUrl(){return`https://github.com/${this.repoID}/tree/${this.sha}/`}}t.a=a},169:function(e,t,r){"use strict";var i=r(11),s=r(83),a=r(80);function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(e,t){class r extends(Object(i.b)(e,n({kind:"",uid:"",baseDomain:"",defaultSpace:null,usageStatuses:null},t))){static create(e){return void 0===e&&(e={}),e instanceof r?e:new r(n({},e,{baseDomain:r.normalizeBaseDomain(e.baseDomain||"")}))}static queryByID(e){return this.query("orgs").doc(`${e}/infos`)}query(){return r.queryByID(this.uid)}static getDefaultSpaceFallback(e){const t=e.last();return t?t.spaceID:null}getURL(e){return e?`https://${this.baseDomain}.${e}`:`/spaces/${this.baseDomain}`}getSpacesURL(e){return this.customDomain?`https://${this.customDomain}`:this.getURL(e)}toBaseDomainUpdate(){const e=new i.c,t=s.a.createFromOwner(this);return e.set(t.query(),t),e.update(this.query(),{baseDomain:this.baseDomain}),e}setBaseDomain(e){return this.merge({baseDomain:r.normalizeBaseDomain(e)})}static normalizeBaseDomain(e){return e.trim().replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-").toLowerCase().substr(0,32).replace(/-$/,"")}static validateBaseDomain(e){return Boolean(/^[a-z0-9-_]+$/.test(e)&&e.length>=3&&e.length<=32&&"www"!=e)}static validateCustomDomain(e){return!e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/.test(e)&&!e.endsWith(".gitbook.io")}get isOrg(){return"org"===this.kind}get isUser(){return"user"===this.kind}get effectiveUsageStatuses(){const e=this.isOrg&&(this.isNonProfit||this.isEnterprise);return!this.usageStatuses||e?new a.a({members:"below",privateSpaces:"below",publicSpaces:"below"}):this.usageStatuses}get hasReachedPublicSpacesLimits(){return"below"!==this.effectiveUsageStatuses.get("publicSpaces")}get hasReachedPrivateSpacesLimits(){return"below"!==this.effectiveUsageStatuses.get("privateSpaces")}get hasReachedMembersLimits(){return"below"!==this.effectiveUsageStatuses.get("members")}get hasReachedSomeLimits(){return this.effectiveUsageStatuses.some(e=>"reached"===e)}get hasExceededUsageLimits(){return this.effectiveUsageStatuses.some(e=>"exceeded"===e)}get canCreateSpace(){return!(this.hasExceededUsageLimits||this.hasReachedPrivateSpacesLimits&&this.hasReachedPublicSpacesLimits)}get title(){return this.isUser?this.displayName:this.name}}return r}},170:function(e,t,r){"use strict";var i=r(4),s=r(11),a=r(129),n=r(148),o=r(46);function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){c(e,t,r[t])})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends(Object(s.b)("member",{uid:"",role:o.a.READER,joinedAt:new Date,invite:null,teams:Object(i.Map)(),permissions:Object(i.Map)()})){get key(){return this.uid}get canEdit(){return/^(writer|reviewer|admin)$/.test(this.role)}get canReview(){return/^(reviewer|admin)$/.test(this.role)}get canAdmin(){return this.role==o.a.ADMIN}static queryByOrg(e){return this.query(["orgs",e,"members"])}static queryByID(e){let t=e.orgID,r=e.userID;return this.queryByOrg(t).doc(r)}query(e){return l.queryByID({orgID:e,userID:this.uid})}canReadSpace(e){return this.role===o.a.ADMIN||"none"!==this.permissions.get(e)}canAdminSpace(e){return this.role===o.a.ADMIN||this.permissions.get(e)===o.a.ADMIN}static create(e){return void 0===e&&(e={}),e instanceof l?e:new l(u({},e,{invite:e.invite||null}))}static createForUser(e){let t=e.user,r=e.role,s=void 0===r?o.a.READER:r,a=e.teams,n=void 0===a?Object(i.Map)():a;return l.createForUserID({userID:t.uid,role:s,teams:n})}static createForUserID(e){let t=e.userID,r=e.role,s=void 0===r?o.a.READER:r,a=e.teams,n=void 0===a?Object(i.Map)():a;return l.create({uid:t,role:s,teams:n,joinedAt:new Date})}static createForInvite(e,t){return t.teamID?l.create({uid:e,joinedAt:new Date,invite:t.uid,teams:Object(i.Map)({[t.teamID]:n.a.create({role:t.role,joinedAt:new Date})})}):l.create({uid:e,role:t.role,invite:t.uid,joinedAt:new Date})}static deserialize(e){return l.create(u({},e,{joinedAt:new Date(e.joinedAt),teams:Object(i.Map)(e.teams||{}).map(e=>n.a.deserialize(e)),permissions:Object(i.Map)(e.permissions||{})}))}static isRoleUpgrade(e,t){const r=Object.values(o.a);return r.findIndex(e=>e===t)>r.findIndex(t=>t===e)}serialize(){return{uid:this.uid,role:this.role,invite:this.invite,joinedAt:this.joinedAt.getTime(),teams:this.teams.map(e=>e.serialize()).toJS(),permissions:this.permissions.toJS()}}updateFromTeamInvite(e){return this.merge({teams:this.teams.set(e.teamID,n.a.create({role:e.role,joinedAt:new Date})),invite:e.uid})}toTeamUpdate(e){let t=e.orgID,r=e.team;return(new s.c).update(this.query(t),{teams:this.teams.merge({[r.uid]:n.a.create({role:this.role})}).toJS()})}toUpdate(e){const t=new s.c,r=new a.a({uid:e,role:this.role,joinedAt:this.joinedAt});return t.set(l.queryByID({orgID:e,userID:this.uid}),this).set(a.a.queryByID({orgID:e,userID:this.uid}),r)}toDeleteUpdate(e){return(new s.c).delete(l.queryByID({orgID:e,userID:this.uid})).delete(a.a.queryByID({orgID:e,userID:this.uid}))}}t.a=l},171:function(e,t,r){"use strict";var i=r(4),s=r(11),a=r(246);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=72e5;class u extends(Object(s.b)("githubSyncStatus",{type:"import",revisionID:"",createdBy:"",createdAt:new Date,repoID:"",tasks:Object(i.Map)()})){static create(e){return new u(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){n(e,t,r[t])})}return e}({},e,{createdAt:new Date(e.createdAt||Date.now())}))}static queryBySpace(e){return this.query(["spaces",e,"github/statuses"])}static queryByID(e){let t=e.spaceID,r=e.revisionID;return this.queryBySpace(t).doc(r)}static clearStatusesUpdate(e){return(new s.c).deleteCollection(u.queryBySpace(e))}query(e){return u.queryByID({revisionID:this.revisionID,spaceID:e})}toUpdate(e){return(new s.c).set(this.query(e),this)}get hasFinished(){const e=this.tasks.size;return e>0&&e===this.completedTasks.size}get hasSucceeded(){return this.hasFinished&&!this.hasError}get hasTimeout(){return new Date-this.createdAt>o||void 0===this.type}get hasError(){return!!this.error}get progress(){const e=this.tasks.size;return 0===e?0:100*this.completedTasks.size/e}get error(){const e=this.tasks.find(e=>e.hasError);return e?e.error:null}get completedTasks(){return this.tasks.filter(e=>e.isCompleted)}addTasks(e){const t=e.reduce((e,t)=>e.set(t.taskID,t),Object(i.Map)());return this.merge({tasks:this.tasks.merge(t)})}markTaskAsCompleted(e,t){return this.merge({tasks:this.tasks.set(e,this.tasks.get(e).markAsCompleted(t))})}static deserialize(e){return new u({type:e.type,revisionID:e.revisionID,createdBy:e.createdBy,createdAt:new Date(e.createdAt),repoID:e.repoID,tasks:Object(i.Map)(e.tasks||{}).map(e=>a.a.deserialize(e))})}serialize(){return{type:this.type,revisionID:this.revisionID,createdBy:this.createdBy,createdAt:this.createdAt.getTime(),repoID:this.repoID,tasks:this.tasks.map(e=>e.serialize()).toJS()}}}t.a=u},172:function(e,t,r){"use strict";var i=r(4),s=r(11);const a={BAD:0,OK:2,GOOD:4};class n extends(Object(s.b)("pageRating",{ratings:Object(i.List)([0,0,0,0,0]),updatedAt:new Date})){static queryBySpace(e){return this.query(["spaces",e,"pageRatings"])}static queryByID(e){let t=e.spaceID,r=e.pageID;return this.queryBySpace(t).doc(r)}static getRatingFromDisplayRating(e){return a[e]}static getDisplayRatingFromRating(e){return e>=3?"GOOD":e>=2?"OK":"BAD"}getDisplayRatingTotal(e){return"GOOD"===e?this.ratings.slice(3).reduce((e,t)=>e+t,0):"OK"===e?this.ratings.get(2):this.ratings.slice(0,2).reduce((e,t)=>e+t,0)}static deserialize(e){return new n({ratings:Object(i.List)(e.ratings),updatedAt:new Date(e.updatedAt)})}serialize(){const e=this.ratings,t=this.updatedAt;return{ratings:e.toArray(),updatedAt:t.getTime()}}get ratersCount(){return this.ratings.reduce((e,t)=>e+t,0)}get averageScore(){const e=this.ratersCount;return e?this.ratings.reduce((e,t,r)=>e+(r+1)*t,0)/e-1:null}}t.a=n},173:function(e,t,r){"use strict";var i=r(4);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends(Object(i.Record)({bookID:"",spaceID:"",message:"",status:"pending",branches:"default",repoID:null,customDomain:null,completedAt:new Date})){static create(e){return void 0===e&&(e={}),e instanceof a?e:new a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){s(e,t,r[t])})}return e}({},e,{repoID:e.repoID||null,customDomain:e.customDomain||null,completedAt:new Date(e.completedAt||new Date)}))}static deserialize(e){return a.create(e)}serialize(){return{bookID:this.bookID,spaceID:this.spaceID,branches:this.branches,message:this.message,repoID:this.repoID,customDomain:this.customDomain,status:this.status,completedAt:this.completedAt.getTime()}}get shouldImportAllBranches(){return"all"===this.branches}importDefaultBranch(){return this.merge({status:"pending",branches:"default"})}importAllBranches(){return this.merge({status:"pending",branches:"all"})}}t.a=a},200:function(e,t,r){"use strict";var i=r(4),s=r(94),a=r.n(s),n=r(11),o=r(149),u=(r(199),r(244)),c=r(41),l=r(125);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends(Object(n.b)("revision",{uid:"",message:"",createdAt:new Date,createdBy:"",parents:Object(i.List)(),versions:Object(i.OrderedMap)(),primaryVersionID:"",assets:Object(i.Map)(),github:Object(i.List)(),rollbackOf:null})){static queryByID(e){let t=e.spaceID,r=e.revisionID;return this.query(["spaces",t,"revisions"]).doc(r)}query(e){return h.queryByID({spaceID:e,revisionID:this.uid})}get parent(){return this.parents.first()}get defaultMessage(){return this.message||(this.isSyncedWithGitHub?this.github.first().message:"")}get primaryVersion(){const e=this.versions.get(this.primaryVersionID);if(!e)throw new Error(`Version "${this.primaryVersionID}" not found in the revision`);return e}get isSyncedWithGitHub(){return this.github.size>0}get isRollback(){return Boolean(this.rollbackOf)}get isMerge(){return this.parents.size>1}static create(e){if(void 0===e&&(e={}),e instanceof h)return e;const t=e.versions||o.a.createInitialVersions();return new h(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){d(e,t,r[t])})}return e}({},e,{createdAt:new Date(e.createdAt||Date.now()),versions:t,assets:e.assets?e.assets:Object(i.Map)(),primaryVersionID:e.primaryVersionID||t.first().uid,parents:Object(i.List)(e.parents||[]),uid:e.uid||Object(n.f)(),github:Object(i.List)(e.github?e.github.map(e=>l.a.create(e)):[])}))}regenerateUID(){return this.merge({uid:Object(n.f)()})}static deserialize(e){const t=e.github||[],r=Array.isArray(t)?t:[t];return h.create({uid:e.uid,message:e.message,createdAt:new Date(e.createdAt),createdBy:e.createdBy,parents:e.parent?[e.parent]:e.parents,primaryVersionID:e.content.primaryVersion,versions:o.a.deserializeVersions(e.content.versions),assets:Object(i.Map)(e.content.assets||{}).map(e=>u.a.deserialize(e)),github:r.map(e=>l.a.deserialize(e)),rollbackOf:e.rollbackOf?e.rollbackOf:null})}serialize(){return{uid:this.uid,message:this.message,createdAt:this.createdAt.getTime(),createdBy:this.createdBy,parents:this.parents.toArray(),content:{primaryVersion:this.primaryVersionID,versions:o.a.serializeVersions(this.versions),assets:this.assets.map(e=>e.serialize()).toObject()},github:this.github.map(e=>e.serialize()).toArray(),rollbackOf:this.rollbackOf?this.rollbackOf:null}}static createInitialRevision(e){return h.create({message:"Initial revision",createdBy:e.uid,versions:o.a.createInitialVersions()})}setParents(e){return this.merge({parents:Object(i.List)(e)})}setMainParent(e){const t=e instanceof h?e.uid:e;return this.merge({parents:this.parents.filter(e=>e!=t).unshift(t)})}hasParent(e){const t=e instanceof h?e.uid:e;return this.parents.some(e=>e==t)}fork(){return this.merge({uid:Object(n.f)(),parents:Object(i.List)([this.uid]),message:"",github:Object(i.List)(),rollbackOf:null,createdAt:new Date})}rollback(e){return this.merge({uid:Object(n.f)(),parents:Object(i.List)([e]),createdAt:new Date,rollbackOf:this.rollbackOf||this.uid})}authorizeAs(e){return this.merge({createdBy:e,createdAt:new Date})}toCommitUpdate(e){let t=e.space,r=e.draft;const i=this.toCreateUpdate(t.uid);return r?i.merge(r.merge({revisionCurrent:this.uid}).markAsModified(this.createdBy).toUpdate(t.uid)):i.merge(t.toCheckoutUpdate(this)),i}toUpdate(e){return(new n.c).update(this.query(e),{message:this.message})}toCreateUpdate(e){return(new n.c).set(this.query(e),this)}toRollbackUpdate(e){let t=e.user,r=e.space,i=e.draft;return this.authorizeAs(t.uid).rollback(i?i.revisionCurrent:r.primaryRevision).toCommitUpdate({space:r,draft:i})}diffVersions(e){return Object(c.diffVersions)(e.versions,this.versions)}diffPages(e,t){return Object(c.diffPages)(e,t)}diffDocuments(e,t){const r=Object(c.diffNodes)(e.nodes,t.nodes);return Object(c.toDiffEditorState)(r)}}d(h,"MESSAGE_LIMIT",100),a()(h.prototype,["diffVersions","diffPages","diffDocuments"],{takesArguments:!0}),t.a=h},246:function(e,t,r){"use strict";var i=r(4),s=r(11);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class n extends(Object(i.Record)({taskID:"",payload:{},startedAt:new Date,completedAt:null,error:null})){static create(e){return new n({taskID:Object(s.f)(),createdAt:new Date,payload:e})}static deserialize(e){return new n({taskID:e.taskID,payload:e.payload?JSON.parse(e.payload):{},startedAt:new Date(e.startedAt),completedAt:e.completedAt?new Date(e.completedAt):null,error:e.error||null})}static toCompletedUpdate(e,t,r){void 0===r&&(r=null);const i=new n({taskID:t}).markAsCompleted(r).serialize();return(new s.c).updateProperty(e,`tasks/${i.taskID}/completedAt`,i.completedAt).updateProperty(e,`tasks/${i.taskID}/error`,i.error)}static filterPayload(e){const t=e.type,r=[];switch(t){case"import/page":case"export/page":r.push("versionID","pageID");break;case"import/asset":case"export/asset":r.push("assetID");break;case"export/version":r.push("versionID")}return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){a(e,t,r[t])})}return e}({type:t,revisionID:e.revisionID},r.reduce((t,r)=>(t[r]=e[r],t),{}))}toMessage(e,t){return{taskID:this.taskID,spaceID:e,config:t,payload:this.payload}}get isCompleted(){return!!this.completedAt}get hasError(){return!!this.error}get hasSucceeded(){return this.isCompleted&&!this.hasError}serialize(){return{taskID:this.taskID,payload:JSON.stringify(n.filterPayload(this.payload)),startedAt:this.startedAt.getTime(),completedAt:this.completedAt?this.completedAt.getTime():null,error:this.error||null}}markAsCompleted(e){return void 0===e&&(e=null),this.merge({completedAt:new Date,error:e?(t=e,t.expose?"string"==typeof t.expose?t.expose:t.message:"Unexpected error"):null});var t}toCreateUpdate(e){return(new s.c).updateProperty(e,`tasks/${this.taskID}`,this.serialize())}}t.a=n},262:function(e,t,r){"use strict";var i=r(169),s=r(108),a=r(85);t.a=class extends(Object(i.a)("owner",{})){static deserialize(e){if("org"===e.kind)return s.a.deserialize(e);if("user"===e.kind)return a.b.deserialize(e);throw new Error(`Unknown kind ${e.kind} on Owner.deserialize() for uid ${e.uid}`)}}},263:function(e,t,r){"use strict";var i=r(11);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends(Object(i.b)("pageRedirect",{url:"",pageID:"",createdAt:new Date})){static queryByVersion(e){let t=e.spaceID,r=e.versionID;return this.query(["spaces",t,"redirects",Object(i.e)(r)])}static queryByURL(e){let t=e.spaceID,r=e.versionID,s=e.url;return this.queryByVersion({spaceID:t,versionID:r}).doc(Object(i.e)(s))}query(e){let t=e.spaceID,r=e.versionID;return a.queryByURL({spaceID:t,versionID:r,url:this.url})}static create(e){return void 0===e&&(e={}),e instanceof a?e:new a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){s(e,t,r[t])})}return e}({},e,{createdAt:new Date(e.createdAt||Date.now())}))}static deserialize(e){return a.create(e)}serialize(){return{url:this.url,pageID:this.pageID,createdAt:this.createdAt.getTime()}}}t.a=a},266:function(e,t,r){"use strict";var i=r(4),s=r(657),a=r.n(s),n=r(11),o=r(150),u=r(171);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){l(e,t,r[t])})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={GITBOOK:"gitbook",GITHUB:"github"};class h extends(Object(n.b)("githubConfig",{repoID:"",token:"",hookID:null,importBranchesFilter:Object(i.List)(["master"]),priority:d.GITHUB,createdBy:"",createdAt:new Date})){static queryBySpace(e){return this.query(`spaces/${e}`).doc("github/config")}static create(e){return void 0===e&&(e={}),new h(c({},e,{createdAt:new Date(e.createdAt||Date.now())}))}static deserialize(e){return new h(c({},e,{importBranchesFilter:Object(i.List)(e.importBranchesFilter),createdAt:new Date(e.createdAt)}))}get githubOwner(){return this.repoID.split("/")[0]}get githubRepo(){return this.repoID.split("/")[1]}query(e){return h.queryBySpace(e)}serialize(){return{repoID:this.repoID,token:this.token,hookID:this.hookID,importBranchesFilter:this.importBranchesFilter.toArray(),priority:this.priority,createdBy:this.createdBy,createdAt:this.createdAt.getTime()}}asRepoConfig(){return{repoID:this.repoID,authToken:this.token}}shouldImportRef(e){if(!(0===e.indexOf("refs/heads/")))return!1;const t=e.replace(/^refs\/heads\//,"");return this.importBranchesFilter.some(e=>{return a()(e).test(t)})}toCreateUpdate(e,t){return void 0===t&&(t=!0),(new n.c).set(h.queryBySpace(e),this).update(o.a.queryByID(e),{hasGitHubSync:!0,editOnGitHub:t?this.repoID:null})}toUpdate(e){return(new n.c).set(h.queryBySpace(e),this)}toRemoveUpdate(e){return(new n.c).delete(h.queryBySpace(e)).merge(u.a.clearStatusesUpdate(e)).update(o.a.queryByID(e),{hasGitHubSync:!1,editOnGitHub:null})}}l(h,"MAX_BRANCHES",10),l(h,"PRIORITIES",d),t.a=h},267:function(e,t,r){"use strict";var i=r(11),s=r(108);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class n extends(Object(i.b)("samlIdP",{label:"",ssoURL:"",entityID:"",certificate:"",createdAt:new Date,defaultRole:"reader"})){static queryByOrg(e){return this.query(["orgs",e]).doc("saml")}query(e){return n.queryByOrg(e)}static create(e){return void 0===e&&(e={}),e instanceof n?e:new n(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){a(e,t,r[t])})}return e}({},e,{createdAt:new Date(e.createdAt||Date.now())}))}static deserialize(e){return n.create(e)}serialize(){return{label:this.label,ssoURL:this.ssoURL,entityID:this.entityID,certificate:this.certificate,createdAt:this.createdAt.getTime(),defaultRole:this.defaultRole}}toUpdate(e){return(new i.c).set(this.query(e),this).update(s.a.queryByID(e),{ssoSignInLabel:this.label})}toRemoveUpdate(e){return(new i.c).delete(this.query(e)).update(s.a.queryByID(e),{ssoSignInLabel:null})}}t.a=n},269:function(e,t,r){"use strict";var i=r(80),s=r(11);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class n extends(Object(s.b)("ownerUsage",{ownerID:"",membersCount:0,privateSpacesCount:0,spacesCount:0,updatedAt:new Date,plan:"free"})){get publicSpaces(){return this.spacesCount-this.privateSpacesCount}static create(e){return void 0===e&&(e={}),new n(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){a(e,t,r[t])})}return e}({},e,{updatedAt:new Date(e.updatedAt||new Date)}))}static queryByID(e){return this.query("orgUsage").doc(e)}query(){return n.queryByID(this.ownerID)}toUsageStatuses(e){return new i.a({members:i.a.getLimitStatus(this.membersCount,e.members),privateSpaces:i.a.getLimitStatus(this.privateSpacesCount,e.privateSpaces),publicSpaces:i.a.getLimitStatus(this.spacesCount-this.privateSpacesCount,e.publicSpaces)})}static deserialize(e){return n.create(e)}serialize(){return{ownerID:this.ownerID,membersCount:this.membersCount,privateSpacesCount:this.privateSpacesCount,spacesCount:this.spacesCount,updatedAt:this.updatedAt.getTime(),plan:this.plan}}}t.a=n},270:function(e,t,r){"use strict";var i=r(4),s=r(11),a=r(173);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends(Object(s.b)("migrationStatus",{orgID:"",legacyOrgID:"",books:Object(i.Map)(),createdAt:new Date,updatedAt:new Date,confirmed:!1,githubSync:!1})){static create(e){return void 0===e&&(e={}),e instanceof o?e:new o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){n(e,t,r[t])})}return e}({},e,{books:Object(i.Map)(e.books||{}).map(e=>a.a.deserialize(e)),createdAt:new Date(e.createdAt||new Date),updatedAt:new Date(e.updatedAt||new Date)}))}static queryByOrgID(e){return this.query("migration/beta").doc(e)}static queryByLegacyOrgID(e){return this.query("migration/legacy").doc(e)}get githubBooks(){return this.books.filter(e=>!!e.repoID).toList()}get readyAt(){return new Date(this.createdAt.getTime()+864e5)}get isReady(){return this.readyAt.getTime()<Date.now()}queryByOrgID(){return o.queryByOrgID(this.orgID)}queryByLegacyOrgID(){return o.queryByLegacyOrgID(this.legacyOrgID)}toSyncUpdate(){const e=new s.c;return e.set(this.queryByOrgID(),this).set(this.queryByLegacyOrgID(),this),e}toDeleteUpdate(){const e=new s.c;return e.delete(this.queryByOrgID()).delete(this.queryByLegacyOrgID()),e}toBookUpdate(e){const t=new s.c;return t.updateProperty(this.queryByOrgID(),`books/${e.bookID}`,e.serialize()).updateProperty(this.queryByLegacyOrgID(),`books/${e.bookID}`,e.serialize()),t}toSpaceDeleteUpdate(e){const t=new s.c,r=this.books.find(t=>t.spaceID===e);return r?(t.updateProperty(this.queryByOrgID(),`books/${r.bookID}`,null).updateProperty(this.queryByLegacyOrgID(),`books/${r.bookID}`,null),t):t}getBookBySpaceID(e){return this.books.find(t=>t.spaceID===e)||null}updateBook(e){void 0===e&&(e={});const t=this.books,r=e instanceof a.a?e:a.a.create(e);return this.merge({books:t.merge({[r.bookID]:r})})}static deserialize(e){return o.create(e)}serialize(){return{orgID:this.orgID,legacyOrgID:this.legacyOrgID,books:this.books.map(e=>e.serialize()).toObject(),confirmed:this.confirmed,githubSync:this.githubSync,createdAt:this.createdAt.getTime(),updatedAt:this.updatedAt.getTime()}}}t.a=o},413:function(e,t,r){"use strict";var i=r(4);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends(Object(i.Record)({pageID:"",spaceID:"",versionID:"",title:"",description:"",highlightedTitle:"",highlightedDescription:"",searchScore:0})){static get INDEX(){return"pages"}static createFromPage(e,t,r){return new a({pageID:e.uid,title:e.title,description:e.description,spaceID:t,versionID:r})}static getVersionFilter(e){return`version/${e}`}static getPageFilter(e){return`page/${e}`}get objectID(){return`${this.spaceID}/${this.versionID}/${this.pageID}`}get indexTags(){const e=this.spaceID,t=this.versionID;return[e,a.getVersionFilter(t)]}get sectionsFilters(){const e=this.pageID,t=a.getPageFilter(e);return`${this.indexTags.join(" AND ")} AND ${t}`}get index(){return a.INDEX}static deserialize(e){const t=e.objectID,r=e._highlightResult,i=e._rankingInfo,n=function(e,t){if(null==e)return{};var r,i,s={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,["objectID","_highlightResult","_rankingInfo"]),o=t.split("/"),u=o[0],c=o[1],l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){s(e,t,r[t])})}return e}({pageID:o[2],versionID:c,spaceID:u},n);return r&&(l.highlightedTitle=r.title.value,l.highlightedDescription=r.description.value),i&&(l.searchScore=i.userScore),new a(l)}serialize(){return{objectID:this.objectID,title:this.title,description:this.description,_tags:this.indexTags}}}t.a=a},414:function(e,t,r){"use strict";r(4)},93:function(e,t,r){"use strict";var i=r(4);class s extends(Object(i.Record)({sha:"",filePath:""})){static create(e){return void 0===e&&(e={}),e instanceof s?e:new s(e)}static deserialize(e){return s.create(e)}serialize(){return{sha:this.sha,filePath:this.filePath}}}t.a=s}}]);