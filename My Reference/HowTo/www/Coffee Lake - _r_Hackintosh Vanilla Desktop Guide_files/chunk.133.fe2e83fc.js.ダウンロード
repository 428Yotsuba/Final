(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[133],{1005:function(e,t,n){"use strict";var o=n(0),r=n(31),a=n.n(r),i=n(76),s=n.n(i),c=n(74),l=n.n(c),d=n(21);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.a=function(e,t){return n=>{a()(!1,`connectDocument is deprecated, use useWithDocument, see component "${s()(n)}".`);const r=r=>Object(d.j)(e(r),e=>o.createElement(n,u({},r,t({editorState:e}))));return r.displayName=`connectDocument(${s()(n)})`,l()(r,n)}}},114:function(e,t,n){"use strict";var o=n(970);n.d(t,"a",function(){return o.a});var r=n(971);n.d(t,"b",function(){return r.a});var a=n(972);n.d(t,"f",function(){return a.a});var i=n(973);n.d(t,"e",function(){return i.a});var s=n(1017);n.d(t,"j",function(){return s.a});var c=n(974);n.d(t,"d",function(){return c.a});var l=n(1016);n.d(t,"c",function(){return l.a});var d=n(975);n.d(t,"i",function(){return d.a});var u=n(1015);n.d(t,"g",function(){return u.a});var p=n(976);n.d(t,"h",function(){return p.a});var b=n(594);n.d(t,"k",function(){return b.a})},37:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return S}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return O}),n.d(t,"g",function(){return w}),n.d(t,"h",function(){return x}),n.d(t,"i",function(){return k}),n.d(t,"j",function(){return d}),n.d(t,"k",function(){return m}),n.d(t,"l",function(){return b});var o=n(0),r=n(4),a=n(10),i=n(1);function s(e){const t=o.createContext(e);return[t,o.useContext.bind(null,t)]}const c=s({headingIDs:Object(r.Map)()}),l=c[0],d=c[1],u=s({page:new a.w,version:new a.P,revision:new a.B}),p=u[0],b=u[1],h=s(!1),f=h[0],m=h[1],y=s(!1),E=y[0],v=(y[1],s(!1)),S=v[0],g=(v[1],s(i.lb.FONTS.TextH400)),k=g[0],C=(g[1],s(!1)),O=C[0],T=(C[1],s(!1)),x=T[0],L=(T[1],s([])),w=L[0];L[1]},700:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(3),i=n(1),s=n(6),c=n(1056),l=n(23),d=n(604),u=n(300);const p=a.StyleSheet.create({codeBlockHint:{position:"absolute",bottom:0,right:0,fontSize:"10px",color:i.kb.GREY_BASE,paddingRight:4}});var b=class extends r.a.Component{render(){return r.a.createElement("div",{className:Object(a.css)(p.codeBlockHint),contentEditable:!1},"exit: ",r.a.createElement(u.a,{shortcut:"mod+enter"}))}},h=n(66),f=n.n(h),m=n(79),y=n(28),E=n(9),v=n(71),S=n.n(v);const g=a.StyleSheet.create({codeHeaderButton:{display:"flex",cursor:"pointer",fontSize:i.lb.SIZE_XSMALL,lineHeight:i.lb.LINE_SMALL,color:i.kb.GREY_BASE,padding:i.jb.PADDING_SMALL,outline:0,transition:i.qb.fastEase("color"),":hover":{color:i.kb.BLACK}}}),k=o.forwardRef(function(e,t){const n=e.active,r=e.children,s=e.onClick,c=e.styles,l=i.m.useColorPalette().primary,d=n?{color:l}:{};return o.createElement("div",{ref:t,role:"button",tabIndex:-1,className:Object(a.css)(g.codeHeaderButton,c),style:d,onClick:s,spellCheck:!1},r)});k.defaultProps={active:!1,onClick:null};var C,O,T=k;function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const L=a.StyleSheet.create({codeHeaderTabGrabber:{display:"inline-block",cursor:"grab",paddingRight:i.jb.PADDING_SMALL,opacity:.4,":hover":{opacity:1}},codeHeaderTabInput:{margin:0,padding:0,color:"inherit",fontFamily:"inherit",fontSize:"inherit",background:"transparent",border:"none",borderBottom:"1px solid transparent",outline:"none",transition:i.qb.fastEase("border-color"),":focus":{color:i.kb.BLACK,background:"transparent",borderColor:i.kb.BLUE_BASE},"::placeholder":{color:"inherit"},":not(:focus)":{cursor:"pointer"}},added:{borderBottom:`2px solid ${i.kb.DIFF_ADDED}`},removed:{borderBottom:`2px solid ${i.kb.DIFF_REMOVED}`},modified:{borderBottom:`2px solid ${i.kb.DIFF_MODIFIED}`}});let w=Object(m.SortableHandle)(C=class extends r.a.Component{render(){return r.a.createElement("span",{className:Object(a.css)(L.codeHeaderTabGrabber)},r.a.createElement(E.fb,null))}})||C;var j=Object(m.SortableElement)(O=Object(y.f)(O=class extends r.a.Component{constructor(){super(...arguments),x(this,"inputRef",e=>{this.input=e}),x(this,"onChange",e=>{const t=this.props,n=t.node,o=t.editor;s.V(o,t=>s.c.renameTab(t,n,e))}),x(this,"onClick",()=>this.input.select())}render(){const e=this.props,t=e.node,n=e.readOnly,o=e.showEditionControls,c=e.isSelected,l=e.onClick,d=e.onTitleFocus,u=e.onTitleBlur,p=e.isFloating,b=e.hasSingleUntitledTab,h=e.intl,f=t.data.get("diff"),m=s.c.getSyntax(t).title,y=t.data.get("title",""),E=c&&!p;return o&&c?r.a.createElement(T,{active:E},!b&&r.a.createElement(w,null),r.a.createElement(S.a,{component:i.d,inputClassName:Object(a.css)(L.codeHeaderTabInput),value:y||(b?"":m),placeholder:p?h.formatMessage({id:"BlockCode.addFilename",defaultMessage:"Add filename"}):m,spellCheck:!1,onChange:this.onChange,onClick:this.onClick,onFocus:d,onBlur:u,ref:this.inputRef})):r.a.createElement(T,{active:E,onClick:l,styles:f&&L[f]},n||b?null:r.a.createElement(w,null),y||m)}})||O)||O,A=n(207),H=n.n(A);const D={shouldSort:!0,threshold:.5,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["title","shorthands"]},B=a.StyleSheet.create({codeBlockSyntaxList:{maxHeight:"300px"}}),M=s.c.SYNTAXES.valueSeq().toArray();function I(){return{query:"",syntaxes:M}}function P(e){const t=e.syntax,n=e.onClick;return r.a.createElement(i.K.Item,{value:t.prism,onClick:()=>n(t.prism)},t.title)}var _,R,N,Y=function(e){const t=e.node,n=e.editor,o=e.openByClickOn,a=r.a.useState(I),c=a[0],l=c.syntaxes,d=c.query,u=a[1],p=r.a.useRef(),b=r.a.useRef();b.current||(b.current=new H.a(M,D));const h=e=>{t.data.get("syntax")!=e&&s.V(n,n=>n.setNodeByKey(t.key,t.merge({data:t.data.merge({syntax:e})}))),p.current&&p.current.close(),u(I())};return r.a.createElement(i.T.Portal,{ref:p,openByClickOn:o,closeOnEsc:!0,closeOnOutsideClick:!0,closeOnClick:!1,onClose:()=>{u(I())},fixed:!1},r.a.createElement(i.T,{autoPosition:!0},r.a.createElement(i.K,{query:d,onSearchChange:e=>{u({query:e,syntaxes:e?b.current.search(e):M})},itemsStyles:[B.codeBlockSyntaxList]},l.map(e=>r.a.createElement(P,{key:e.prism,syntax:e,onClick:h})))))},F=n(826),G=n.n(F);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V,z=Object(y.f)((N=R=class e extends o.Component{constructor(){super(...arguments),K(this,"state",{copied:!1}),K(this,"onClick",e=>{const t=this.props.node;e.preventDefault(),function(e){const t=t=>{t.clipboardData.setData("text/plain",e),t.preventDefault()};document.addEventListener("copy",t),G()(e),document.removeEventListener("copy",t)}(t.nodes.map(e=>e.text).join("\n")),this.setState({copied:!0}),this.timeout=setTimeout(()=>{this.timeout=null,this.setState({copied:!1})},2e3)})}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const t=e.STYLES,n=this.props.intl,r=this.state.copied;return o.createElement(i.gb,{role:"button",tabIndex:-1,onClick:this.onClick,styles:[t.copyButton,i.pb.tooltipped],"aria-label":r?n.formatMessage({id:"BlockCode.copied",defaultMessage:"Copied !"}):n.formatMessage({id:"BlockCode.copy",defaultMessage:"Copy"})},o.createElement(E.F,null))}},K(R,"STYLES",a.StyleSheet.create({copyButton:{cursor:"pointer",padding:i.jb.PADDING_SMALL,color:i.kb.GREY_BASE,fontSize:i.lb.SIZE_SMALL,lineHeight:"1em",outline:"none",opacity:.5,":hover":{opacity:1},"@media print":{display:"none"}}})),_=N))||_;function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q=a.StyleSheet.create({codeHeader:{background:f()(i.kb.GREY_LIGHTEST).darken(.015).hex(),display:"flex",userSelect:"none",fontSize:i.lb.SIZE_XSMALL,lineHeight:i.lb.LINE_SMALL},codeHeaderFloating:{position:"absolute",zIndex:1,top:5,right:0,background:"transparent"},codeHeaderFloatingEditing:{transform:"translateY(-100%)"},codeHeaderTabs:{display:"flex",flex:1,overflowX:"auto"},codeHeaderButtons:{display:"flex",alignItems:"center"},codeHeaderDragHelper:{whiteSpace:"nowrap"}});let $=Object(m.SortableContainer)(V=class extends r.a.Component{render(){const e=this.props,t=e.nodes,n=e.readOnly,o=e.currentTab,i=e.onChangeTab,s=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["nodes","readOnly","currentTab","onChangeTab"]);return r.a.createElement("div",{className:Object(a.css)(q.codeHeaderTabs)},t.map((e,t)=>r.a.createElement(j,W({key:e.key,node:e,readOnly:n,isSelected:o.key==e.key,onClick:()=>i(e),index:t,disabled:n},s))))}})||V;var Z,X,Q,J=class extends r.a.Component{constructor(){super(...arguments),U(this,"state",{focus:!1}),U(this,"focus",()=>{this.setState({focus:!0})}),U(this,"blur",()=>{this.setState({focus:!1})}),U(this,"onAddTab",e=>{e.stopPropagation(),e.preventDefault();const t=this.props,n=t.editor,o=t.node,r=t.onChangeTab,a=s.c.createTab();s.V(n,e=>e.insertNodeByKey(o.key,o.nodes.size,a).collapseToStartOf(a).focus()),r(a,!1)}),U(this,"onSortEnd",e=>{const t=e.oldIndex,n=e.newIndex,o=this.props,r=o.editor,a=o.node,i=a.nodes.get(t);s.V(r,e=>e.moveNodeByKey(i.key,a.key,n).focus())})}render(){const e=this.props,t=e.node,n=e.editor,o=e.showEditionControls,i=e.currentTab,c=e.onChangeTab,l=e.hasSingleUntitledTab,d=n.props.readOnly,u=this.state.focus,p=t.nodes,b=s.c.getSyntax(i),h=!u&&l,f=p.size>1||!l||o;return r.a.createElement("div",{className:Object(a.css)(q.codeHeader,h&&q.codeHeaderFloating,h&&!d&&q.codeHeaderFloatingEditing),contentEditable:!1},f?r.a.createElement($,{nodes:p,currentTab:i,onChangeTab:c,editor:n,readOnly:d,onTitleFocus:this.focus,onTitleBlur:this.blur,useDragHandle:!0,helperClass:Object(a.css)(q.codeHeaderDragHelper),showEditionControls:o,isFloating:h,hasSingleUntitledTab:l,onSortEnd:this.onSortEnd,axis:"x",lockToContainerEdges:!0,lockOffset:[0,0],lockAxis:"x"}):null,o&&r.a.createElement("div",{className:Object(a.css)(q.codeHeaderButtons)},!h&&r.a.createElement(T,{onClick:this.onAddTab},r.a.createElement(y.b,{id:"BlockCode.addTab",defaultMessage:"Add file"})),r.a.createElement(Y,{node:i,editor:n,openByClickOn:r.a.createElement(T,null,b.title," ",r.a.createElement(E.v,null))})),d&&r.a.createElement(z,{node:i}))}};function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne,oe,re,ae=Object(l.b)((e,t)=>{let n=e.codeBlocks,o=t.node,r=t.value,a=t.readOnly;return{currentTab:n.getSelectedTabFor(r,o,{readOnly:a})}})((Q=X=class e extends o.Component{constructor(){var e;super(...arguments),e=this,te(this,"onChangeTab",function(t,n){void 0===n&&(n=!0);const o=e.props,r=o.editor,a=o.value,i=o.node,l=o.dispatch,d=o.currentTab,u=a.selection.hasAnchorIn(d)||a.selection.hasFocusIn(d);l(Object(c.a)(i,t)),u&&n&&Object(s.V)(r,e=>e.collapseToStartOf(t).focus())})}render(){const t=e.STYLES,n=this.props,r=n.children,i=n.attributes,c=n.node,l=n.editor,u=n.readOnly,p=n.value,h=n.currentTab,f=p.selection.hasAnchorIn(c)&&p.selection.hasFocusIn(c),m=1==c.nodes.size&&!c.nodes.first().data.get("title"),y=!u&&(f||!m);return o.createElement(o.Fragment,null,c.nodes.filter(e=>e.type===s.e.CODE_TAB).map(e=>o.createElement(d.a.Enable,{key:e.key,syntax:s.c.getSyntax(e).prism})).toArray(),o.createElement("div",{className:Object(a.css)(t.codeBlock)},o.createElement(J,{node:c,editor:l,currentTab:h,onChangeTab:this.onChangeTab,showEditionControls:y,hasSingleUntitledTab:m}),!u&&f?o.createElement(b,null):null,o.createElement("div",ee({},i,{key:h.key}),r)))}},te(X,"STYLES",a.StyleSheet.create({codeBlock:{marginBottom:i.ob.S300,position:"relative"}})),Z=Q))||Z;function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var se,ce,le,de=Object(l.b)((e,t)=>{let n=e.codeBlocks,o=t.node,r=t.value,a=t.readOnly;return{isTabSelected:n.isTabSelected(r,o,{readOnly:a})}})((re=oe=class e extends o.Component{render(){const t=e.STYLES,n=this.props,r=n.node,i=n.attributes,c=n.children;return n.isTabSelected?o.createElement("pre",ie({className:Object(a.css)(t.codeBlockTab),spellCheck:!1,key:s.c.getSyntax(r).prism},i),c):null}},se=oe,ce="STYLES",le=a.StyleSheet.create({codeBlockTab:{padding:"11px 0",counterReset:"line",fontFamily:i.lb.FAMILY_CODE,fontSize:i.lb.SIZE_CODE,lineHeight:i.lb.LINE_CODE,tabSize:4,backgroundColor:i.kb.GREY_LIGHTEST,borderRadius:i.jb.RADIUS_NORMAL,margin:0,overflowX:"auto","@media print":{"-webkit-print-color-adjust":"exact"}}}),ce in se?Object.defineProperty(se,ce,{value:le,enumerable:!0,configurable:!0,writable:!0}):se[ce]=le,ne=re))||ne;function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const pe=a.StyleSheet.create({codeLine:{font:"inherit",counterIncrement:"line",padding:"0px 0px",whiteSpace:"pre",position:"relative",paddingLeft:44,paddingRight:14,wordWrap:"normal",":not(:only-child):before":{position:"absolute",content:"counter(line)",userSelect:"none",display:"inline-block",left:4,top:0,bottom:0,width:24,verticalAlign:"middle",textAlign:"right",fontSize:"12px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",backgroundColor:"transparent",color:"#c1c7cd"},":only-child":{paddingLeft:"30px"}},diff:{":after":{content:'""',background:"transparent",width:3,position:"absolute",left:0,top:0,bottom:0}},added:{background:i.kb.DIFF_BG_ADDED,":after":{background:i.kb.DIFF_ADDED}},removed:{background:i.kb.DIFF_BG_REMOVED,":after":{background:i.kb.DIFF_REMOVED},counterIncrement:"none",":not(:only-child):before":{content:'""'}},modified:{}});var be=class extends r.a.Component{render(){const e=this.props,t=e.children,n=e.attributes,o=e.node.data.get("diff");return r.a.createElement("div",ue({className:Object(a.css)(pe.codeLine,o&&pe.diff,o&&pe[o])},n),t)}};n.d(t,"a",function(){return ae}),n.d(t,"c",function(){return de}),n.d(t,"b",function(){return be})},818:function(e,t,n){"use strict";var o,r,a,i=n(0),s=n(76),c=n.n(s),l=n(26),d=n(6),u=n(3),p=n(1),b=n(382),h=n(114);class f extends i.Component{render(){const e=f.STYLES,t=this.props,n=t.conflictType,o=t.isHovered,r=t.style;return i.createElement(p.gb,{styles:[e.conflictBorder,"remove"===n&&e.red,o&&"remove"!==n&&e.green],style:r,contentEditable:!1})}}o=f,r="STYLES",a=u.StyleSheet.create({conflictBorder:{position:"absolute",top:0,bottom:0,width:4,backgroundColor:p.kb.GREY_LIGHTER,transition:p.qb.fastEase("background-color")},red:{backgroundColor:p.kb.RED_BASE},green:{backgroundColor:p.kb.GREEN_BASE}}),r in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a;var m=f,y=n(66),E=n.n(y),v=n(9),S=n(15),g=n(37),k=n(23);function C(e){return e.edition.getConflictsState()}var O=function(e){const t=e.origin,n=e.styles,o=Object(g.l)(),r=o.page,a=o.version,s=Object(k.f)(C);if(!s)return null;const c=("base"===t?s.base:s.head).versions.get(a.uid).page.getByID(r.uid),l=c&&c.edits.lastUser;return l?i.createElement(S.k,{ownerID:l,size:"small",styles:n,withTooltip:!1}):i.createElement(p.e.Placeholder,{size:"small",styles:n})};const T=E()(p.kb.GREEN_BASE).alpha(.5).toString(),x=E()(p.kb.RED_BASE).alpha(.5).toString();class L extends i.Component{render(){const e=L.STYLES,t=this.props,n=t.conflict,o=t.hovered;return i.createElement(p.gb,{styles:[e.conflictAuthorWrapper]},i.createElement(O,{origin:n.origin,styles:[e.conflictAuthor]}),i.createElement(p.gb,{styles:[e.hoverMask,o&&e.visible,"remove"===n.type?e.hoverMaskRemove:e.hoverMaskModified]},"remove"===n.type?i.createElement(v.ec,{styles:e.icon}):i.createElement(v.s,{styles:e.icon})))}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(L,"STYLES",u.StyleSheet.create({conflictAuthorWrapper:{position:"absolute",left:4+p.ob.S100,top:"50%",transform:"translateY(-50%)",lineHeight:0},conflictAuthor:{maxWidth:"initial",cursor:"pointer"},hoverMask:{position:"absolute",top:0,left:0,height:p.nb.S,width:p.nb.S,borderRadius:9999,cursor:"pointer",transition:p.qb.fastEase("opacity"),opacity:0,display:"flex",justifyContent:"center",alignItems:"center",color:p.kb.WHITE,fontSize:18},visible:{opacity:1},hoverMaskRemove:{backgroundColor:x},hoverMaskModified:{backgroundColor:T}}));var w=L;class j extends i.PureComponent{render(){const e=j.STYLES,t=this.props,n=t.styles,o=t.style;return i.createElement(p.gb,{styles:[e.conflictIndicator,n],style:o,contentEditable:!1},i.createElement(v.D,null))}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(j,"STYLES",u.StyleSheet.create({conflictIndicator:{width:p.nb.M,height:p.nb.M,borderRadius:9999,backgroundColor:p.kb.WHITE,color:p.kb.GREY_BASE,display:"flex",justifyContent:"center",alignItems:"center",fontSize:18}}));var A=j;const H=u.StyleSheet.create({tooltipRemove:{":after":{background:p.kb.RED_BASE},":before":{borderColor:`transparent ${p.kb.RED_BASE}`}},tooltipModified:{":after":{background:p.kb.GREEN_BASE},":before":{borderColor:`transparent ${p.kb.GREEN_BASE}`}}});function D(e){return[p.pb.tooltipped,p.pb.left,"remove"===e.type?H.tooltipRemove:H.tooltipModified]}function B(e){switch(e.origin){case"head":return"remove"===e.type?"Confirm your deletion":"Keep your changes";case"base":return"remove"===e.type?"Confirm their deletion":"Keep their changes";default:throw new Error(`Unknown conflict origin ${e.origin}`)}}var M=function(e){return{message:B(e),styles:D(e)}};function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){I(e,t,n[t])})}return e}({},b.a.MARGINS,{[d.e.API_METHOD]:h.a.MARGINS});function _(e){const t=P[e];return t&&t.top||p.ob.S300}class R extends i.PureComponent{constructor(){super(...arguments),I(this,"onMouseDown",e=>{e.preventDefault(),e.stopPropagation(),this.props.onClick()})}render(){const e=R.STYLES,t=this.props,n=t.nodeType,o=t.isHovered,r=t.conflict,a=t.isAfterCounterpart,s=t.isBeforeCounterpart,c=t.onMouseEnter,l=t.onMouseLeave,d=M(r);return i.createElement(p.gb,{contentEditable:!1,styles:[d.styles,e.controlArea],"aria-label":d.message,onMouseDown:this.onMouseDown,onMouseEnter:c,onMouseLeave:l},i.createElement(m,{conflictType:r.type,isHovered:o,style:{top:a?-_(n)/2:0,bottom:s?-_(n)/2:0}}),i.createElement(w,{conflict:r,hovered:o}),a&&i.createElement(A,{styles:e.indicatorTop,style:{top:-_(n)/2}}))}}I(R,"STYLES",u.StyleSheet.create({controlArea:{userSelect:"none",position:"absolute",top:0,left:`calc(100% + ${p.ob.S300}px)`,height:"100%",width:60,cursor:"pointer"},indicatorTop:{position:"absolute",left:2,transform:"translate(-50%, -50%)",zIndex:p.rb.CONTROLS-1,pointerEvents:"none"}}));var N=R;var Y=class extends l.a{constructor(){var e,t,n;super(...arguments),n={hoveredKey:null},(t="state")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}setHoveredKey(e){this.setState({hoveredKey:e})}};class F extends i.Component{render(){const e=F.STYLES,t=this.props,n=t.children,o=t.nodeContent,r=t.fadeContent;return i.createElement(p.gb,{styles:[e.conflictWrapper]},i.createElement(p.gb,{styles:[e.blockWrapper,r&&e.fadeEffect]},o),n)}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(F,"STYLES",u.StyleSheet.create({conflictWrapper:{position:"relative"},nodeWrapper:{opacity:1,transition:p.qb.slowerEase("opacity")},fadeEffect:{opacity:.2}}));var G=F;var K=function(e,t){const n=n=>{const o=n>=0&&n<t.nodes.size&&t.nodes.get(n);return Boolean(o&&d.d.areCounterparts(e,o))},o=t.nodes.indexOf(e);return{isAfterCounterpart:n(o-1),isBeforeCounterpart:n(o+1)}};function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class z extends i.Component{constructor(){super(...arguments),V(this,"onMouseEnter",()=>{const e=this.props,t=e.conflictHoverContainer,n=e.node;t.setHoveredKey(n.key)}),V(this,"onMouseLeave",()=>{this.props.conflictHoverContainer.setHoveredKey(null)}),V(this,"onPick",()=>{const e=this.props,t=e.editor,n=e.node;"remove"===n.data.get("conflict").type?d.V(t,e=>d.d.deleteConflict(e,n.key)):d.V(t,e=>d.d.pickConflict(e,n.key))})}render(){const e=this.props,t=e.node,n=e.parent,o=e.children,r=e.conflictHoverContainer,a=t.data.get("conflict"),s=K(t,n),c=s.isAfterCounterpart,l=s.isBeforeCounterpart,u=r.state.hoveredKey===t.key,p=d.d.getCounterpartKey(t.key),b=r.state.hoveredKey===p,h=u&&"remove"===a.type||b;return i.createElement(G,{nodeContent:o,fadeContent:h},i.createElement(N,{nodeType:t.type,conflict:a,isAfterCounterpart:c,isBeforeCounterpart:l,isHovered:u,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onPick}))}}var W=class extends i.Component{render(){const e=this.props,t=e.children,n=e.readOnly,o=e.node,r=e.parent,a=e.editor;return!n&&d.d.hasBlockConflict(o)?i.createElement(l.c,{to:[Y]},e=>i.createElement(z,{node:o,parent:r,editor:a,conflictHoverContainer:e,hoveredConflictKey:e.state.hoveredKey},t)):i.createElement(i.Fragment,null,t)}};var U=function(e){var t,n,o,r,a;return n=t=class extends i.Component{render(){const t=this.props,n=t.readOnly,o=t.node,r=t.parent,a=t.editor;return i.createElement(W,{readOnly:n,node:o,parent:r,editor:a},i.createElement(e,this.props))}},o=t,r="displayName",a=`withConflicts(${c()(e)})`,r in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,n};n.d(t,"a",function(){return U})},96:function(e,t,n){"use strict";var o=n(0),r=n(3),a=n(6),i=n(1);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends o.Component{render(){const e=l.STYLES,t=l.PARENT_STYLES,n=l.NODE_STYLES,r=this.props,a=r.isVisible,c=r.styles,d=r.parent,u=r.node,p=r.children,b=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(r,["isVisible","styles","parent","node","children"]),h=t[d.type||d.object],f=n[u.type];return o.createElement(i.gb,s({styles:[e.blockControls,a&&e.visible,h,f,c],contentEditable:!1},b),p)}}c(l,"STYLES",r.StyleSheet.create({blockControls:{userSelect:"none",position:"absolute",zIndex:i.rb.CONTROLS,height:30,top:0,left:0,paddingRight:i.ob.S200,transform:"translateX(-100%)",opacity:0,transition:i.qb.fastEase("opacity"),display:"flex",alignItems:"center",justifyContent:"flex-end",maxWidth:i.ob.S900,":hover":{opacity:1,zIndex:i.rb.CONTROLS+1}},visible:{opacity:1,zIndex:i.rb.CONTROLS+1}})),c(l,"NODE_STYLES",r.StyleSheet.create({[a.e.HEADING_1]:{top:4},[a.e.HEADING_2]:{top:0},[a.e.HEADING_3]:{top:-2},[a.e.PARAGRAPH]:{top:-2}})),c(l,"PARENT_STYLES",r.StyleSheet.create({document:{width:i.ob.S900},[a.e.BLOCKQUOTE]:{paddingRight:4},[a.e.HINT]:{paddingRight:42},[a.e.TABS_ITEM]:{paddingRight:i.ob.S200-1}}));var d,u=l,p=n(79);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){return t!==n&&e.some(e=>t[e]!==n[e])}class m extends o.Component{constructor(){super(...arguments),h(this,"state",{blockHovered:!1}),h(this,"onMouseEnter",()=>{this.setState({blockHovered:!0})}),h(this,"onMouseLeave",()=>{this.setState({blockHovered:!1})}),h(this,"onStartTyping",()=>{this.state.blockHovered&&this.setState({blockHovered:!1})})}shouldComponentUpdate(e,t){if(t.blockHovered!==this.state.blockHovered)return!0;if(f(["node","editor","blockFocused","SideControls","AroundControls","sortable"],this.props,e))return!0;if(f(["type","object","data"],this.props.parent,e.parent))return!0;if(this.props.isFocused||e.isFocused)return!0;if(this.props.isSelected||e.isSelected)return!0;return!!f(["after","before"],a.Z({parent:this.props.parent,node:this.props.node}),a.Z({parent:e.parent,node:e.node}))}componentDidUpdate(e,t){const n=t.blockHovered,o=this.state.blockHovered;!n&&o?window.document.body.addEventListener("keydown",this.onStartTyping):n&&!o&&window.document.body.removeEventListener("keydown",this.onStartTyping)}componentWillUnmount(){window.document.body.removeEventListener("keydown",this.onStartTyping)}render(){const e=m.STYLES,t=this.props,n=t.SideControls,r=t.AroundControls,a=t.children,s=t.node,c=t.parent,l=t.editor,d=t.sortable,u=t.blockFocused,p=this.state.blockHovered;return o.createElement(i.gb,{styles:e.blockWrapper},o.createElement(i.gb,{styles:e.sideControlsWrapper,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},o.createElement(n,{node:s,editor:l,parent:c,blockHovered:p,blockFocused:u,sortable:d}),a),o.createElement(r,{node:s,parent:c,editor:l}))}}h(m,"STYLES",r.StyleSheet.create({blockWrapper:{position:"relative"},sideControlsWrapper:{position:"relative"}}));let y=Object(p.SortableElement)(d=class extends o.Component{render(){return o.createElement(m,b({sortable:!0},this.props))}})||d;var E,v,S,g=n(1053),k=n.n(g),C=n(9);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}class T extends o.Component{render(){const e=T.STYLES,t=this.props,n=t.styles,r=t.children,a=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,["styles","children"]);return o.createElement(i.gb,O({styles:[e.blockControl,n]},a),r)}}E=T,v="STYLES",S=r.StyleSheet.create({blockControl:{cursor:"pointer"}}),v in E?Object.defineProperty(E,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):E[v]=S;var x,L,w,j=T;var A=Object(p.SortableHandle)((w=L=class e extends o.Component{render(){const t=e.STYLES;return o.createElement(j,{styles:[t.blockGrabber]},o.createElement(C.db,null))}},function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(L,"STYLES",r.StyleSheet.create({blockGrabber:{display:"flex",marginRight:12,cursor:"grab",fontSize:"18px",height:18,width:18,color:i.kb.GREY_BASE,":hover":{color:i.kb.GREY_DARKER}}})),x=w))||x;var H=k()(class extends o.Component{constructor(){var e,t,n;super(...arguments),n=(()=>{const e=this.props,t=e.isOpen,n=e.onToggle,o=e.onClose;t&&o&&o(),n(!t)}),(t="onToggleMenu")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const e=this.props,t=e.isOpen,n=e.menu,r=e.parent,a=e.node,s=e.blockHovered,c=e.blockFocused,l="document"===r.object;return o.createElement(u,{isVisible:s||c||t,parent:r,node:a},l&&o.createElement(A,null),o.createElement(j,null,o.createElement(i.T.ManualPortal,{closeOnEsc:!0,closeOnOutsideClick:!0,closeOnClick:!0,closeOnScroll:!0,fixed:!1,onClose:this.onToggleMenu,anchor:o.createElement(i.j,{onClick:this.onToggleMenu,styles:[t&&i.j.STYLES.active,!l&&i.j.STYLES.small],style:{transform:t?"rotateZ(-180deg)":null}},o.createElement(C.v,null)),isOpen:t},o.createElement(i.T,{position:"south",autoPosition:!0,align:"start"},n))))}},{isOpen:"onToggle"});var D=class extends o.Component{constructor(){var e,t,n;super(...arguments),n=(()=>{const e=this.props,t=e.editor,n=e.node;a.V(t,e=>e.removeNodeByKey(n.key))}),(t="onDelete")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const e=this.props,t=e.parent,n=e.node,r=e.blockHovered,a=e.blockFocused;return o.createElement(H,{node:n,parent:t,blockHovered:r,blockFocused:a,menu:o.createElement(i.K,null,o.createElement(i.K.Item,{icon:o.createElement(C.ec,null),onMouseDown:this.onDelete},"Delete"))})}},B=n(67),M=n(219),I=n(154);const P=r.StyleSheet.create({newBlockControl:{position:"relative",transition:i.qb.fastEase("opacity"),opacity:0,":hover":{opacity:1}},visible:{opacity:1},searchContainer:{display:"flex",alignItems:"center",position:"absolute",paddingLeft:i.ob.S200,left:"100%",top:0,bottom:0},searchContainerHidden:{opacity:0}}),_=r.StyleSheet.create({[a.e.HINT]:{paddingLeft:42}});function R(e){const t=I.a.ALL.filter(t=>a.x(e,t.type));return I.d.create(t)}function N(e){const t=e.isOpen,n=e.parent,r=e.node,s=e.editor,c=e.index,l=e.replace,d=e.hideSearch,u=e.small,p=e.isVisible,b=e.withKeyboardShortcut,h="document"===n.object,f=_[n.type],m=o.useState(()=>R(n)),y=m[0],E=m[1];o.useEffect(()=>{E(R(n))},[n]);const v=t=>{const n=e.onClose,o=e.onOpen;E(e=>e.reset()),t.open?o():n(),t.focusEditor&&a.V(s,e=>e.focus())},S=()=>{v({open:!1})},g=Object(I.h)({parent:n,index:c,replace:l,editor:s}),k=e=>{v({open:!1}),g(e)},O=(e,t)=>{E(n=>n.moveCursor(e,t))},T=o.useMemo(()=>({[B.a.COMMAND_PALETTE]:()=>{v({open:!t})}}),[t]);return o.createElement(j,{styles:[P.newBlockControl,(p||t)&&P.visible]},t&&o.createElement(i.gb,{styles:[P.searchContainer,f,d&&P.searchContainerHidden]},o.createElement(I.e,{autoFocus:!0,withBackground:n.type!==a.e.HINT,onKeyDown:e=>{Object(I.g)(e,{onPick:()=>{const e=y.getCurrentCommand();e&&k(e)},onCursorMove:O,onClose:()=>{v({open:!1,focusEditor:!0})}})},value:y.query,onChange:e=>{const t=e.target.value;E(e=>e.updateQuery(t))}})),o.createElement(i.T.ManualPortal,{closeOnOutsideClick:!0,fixed:!1,onClose:S,anchor:o.createElement(i.j,{onClick:t?S:()=>{v({open:!0})},styles:[t&&i.j.STYLES.active,(u||!h)&&i.j.STYLES.small],style:{transform:t?"rotateZ(45deg)":null}},o.createElement(C.Pb,null)),isOpen:t},o.createElement(i.T,{position:"south",autoPosition:!0,align:"start"},o.createElement(I.c,{paletteState:y,onPick:k,activeType:l?r.type:""}))),b&&o.createElement(M.a,{keyMap:T}))}N.defaultProps={hideSearch:!1,small:!1,withKeyboardShortcut:!1};var Y=N,F=n(12);function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=class extends o.Component{constructor(){super(...arguments),G(this,"onDelete",()=>{const e=this.props,t=e.editor,n=e.node;a.V(t,e=>e.removeNodeByKey(n.key))}),G(this,"onClickCommand",e=>{const t=this.props,n=t.editor,o=t.node,r=e.convertOperation;if(!r)return;const i=F.Range.create().moveToRangeOf(o);a.V(n,e=>r(e,{range:i}))}),G(this,"onChangeToParagraph",()=>{const e=this.props,t=e.editor,n=e.node;a.V(t,e=>a.s.convertToParagraph(e,n))})}render(){const e=this.props,t=e.children,n=e.node;return o.createElement(i.K,null,[I.a.PARAGRAPH,I.a.H1,I.a.H2,I.a.H3].map(e=>o.createElement(I.b,{key:e.id,command:e,active:e.type===n.type,onClick:this.onClickCommand})),o.createElement(i.K.Divider,null),t,o.createElement(i.K.Item,{icon:o.createElement(C.ec,null),onClick:this.onDelete},"Delete"))}},V=n(76),z=n.n(V);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class U extends o.Component{constructor(){super(...arguments),W(this,"state",{isHover:!1,isOpen:!1}),W(this,"onMouseEnter",()=>{this.setState({isHover:!0})}),W(this,"onMouseLeave",()=>{this.setState({isHover:!1})}),W(this,"onOpen",()=>{this.setState({isOpen:!0})}),W(this,"onClose",()=>{this.setState({isOpen:!1,isHover:!1})}),W(this,"onStartTyping",()=>{this.state.isHover&&this.setState({isHover:!1})})}componentDidUpdate(e,t){const n=t.isHover,o=this.state.isHover;!n&&o?window.document.body.addEventListener("keydown",this.onStartTyping):n&&!o&&window.document.body.removeEventListener("keydown",this.onStartTyping)}componentWillUnmount(){window.document.body.removeEventListener("keydown",this.onStartTyping)}render(){const e=U.STYLES,t=this.props,n=t.position,r=t.parent,a=t.node,s=t.editor,c=this.state,l=c.isHover,d=c.isOpen,p="document"===r.object;return o.createElement(i.gb,{styles:[e.hoverArea,e[`hoverArea${n}`]],contentEditable:!1},o.createElement(i.gb,{styles:[e.insertionLine,l&&e.insertionLineVisible]}),o.createElement(u,{styles:[e.blockControls],isVisible:l,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,parent:r,node:a},o.createElement(i.gb,{styles:[e.controlWrapper,p&&e.circleAlign]},o.createElement(i.gb,{styles:[e.insertionLineExtension,l&&e.insertionLineVisible]}),o.createElement(Y,{node:a,parent:r,index:"After"===n?r.nodes.indexOf(a)+1:r.nodes.indexOf(a),replace:!1,isOpen:d,onOpen:this.onOpen,onClose:this.onClose,isVisible:l,editor:s,small:!0,hideSearch:!0}))))}}W(U,"STYLES",r.StyleSheet.create({hoverArea:{userSelect:"none",position:"absolute",left:0,right:0,height:i.ob.S300},hoverAreaAfter:{top:"100%"},hoverAreaBefore:{bottom:"100%"},blockControls:{top:"50%",transform:"translate(-100%, -50%)"},controlWrapper:{position:"relative"},circleAlign:{display:"flex",alignItems:"center",justifyContent:"center",width:i.j.SIZE,height:i.j.SIZE},insertionLine:{background:"transparent",position:"absolute",height:2,top:"50%",left:0,right:0,transform:"translateY(-50%)",transition:i.qb.slowEase("background")},insertionLineExtension:{background:"transparent",position:"absolute",height:2,width:50,left:"100%",top:"50%",transform:"translateY(-50%)",transition:i.qb.slowEase("background")},insertionLineVisible:{background:i.kb.GREY_LIGHTER}}));var q=class extends o.Component{render(){const e=this.props,t=e.parent,n=e.node,r=e.editor,i=a.Z({parent:t,node:n});return o.createElement(o.Fragment,null,i.before&&o.createElement(U,{position:"Before",node:n,parent:t,editor:r}),i.after&&o.createElement(U,{position:"After",node:n,parent:t,editor:r}))}};var $=function(e){const t=e||{},n=t.SideControls,r=void 0===n?D:n,i=t.AroundControls,s=void 0===i?q:i;return e=>{var t,n;return n=t=class extends o.Component{render(){const t=this.props,n=t.readOnly,i=t.parent,c=t.node,l=t.isSelected,d=t.editor,u=t.value;if(n||!a.y(i))return o.createElement(e,this.props);const p=a.S(this.props),b=p?y:m,h=p?u.document.nodes.findIndex(e=>e.key===c.key):void 0;return o.createElement(b,{SideControls:r,AroundControls:s,index:h,isSelected:l,blockFocused:a.Q(u,c),node:c,parent:i,editor:d,value:u},o.createElement(e,this.props))}},function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(t,"displayName",`withBlockControls(${z()(e)})`),n}};n.d(t,"f",function(){return $}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return H}),n.d(t,"c",function(){return A}),n.d(t,"d",function(){return Y}),n.d(t,"e",function(){return K})}}]);