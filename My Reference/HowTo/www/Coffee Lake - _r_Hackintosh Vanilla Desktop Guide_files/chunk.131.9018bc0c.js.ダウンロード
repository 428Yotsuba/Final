(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[131,173],{15:function(e,t,n){"use strict";var a=n(400),r=n(556),o=n(557),i=n(0),s=n.n(i),c=n(70);var u=function(e){const t=e.to,n=Object(c.k)().staticContext;return n?n.url=t:window.location.replace(t),null};function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e){const t=e.children,n=e.statusCode,a=Object(c.k)().staticContext;return a&&(a.statusCode=n),t?i.Children.only(t):null}function p(e){return i.createElement(d,l({},e,{statusCode:404}))}function m(e){return i.createElement(d,l({},e,{statusCode:403}))}var f=n(558),g=n(52);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y,w,S,O=function(e){return Object(g.g)(class extends s.a.Component{constructor(e){super(e),b(this,"onLocationChanged",e=>{this.setState({location:e})}),this.state={location:this.props.location},this.unlistenHistory=this.props.history.listen(this.onLocationChanged)}componentWillUnmount(){this.unlistenHistory()}render(){const t=this.state.location,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){b(e,t,n[t])})}return e}({},h({},this.props),{location:t});return s.a.createElement(e,n)}})},v=n(233);var T,E,U,D=O((S=w=class extends i.Component{componentDidUpdate(e){const t=this.props,n=t.location,a=t.onScroll;n.state&&n.state.preventScroll||n.pathname!==e.location.pathname&&a()}render(){return this.props.children}},U={onScroll:()=>{window.document.body.scrollTop=0,window.document.documentElement.scrollTop=0}},(E="defaultProps")in(T=w)?Object.defineProperty(T,E,{value:U,enumerable:!0,configurable:!0,writable:!0}):T[E]=U,y=S))||y,L=n(574),I=n(559),k=n(3),C=n(9),R=n(1),j=n(184);const A=k.StyleSheet.create({hideOnTablet:{[`@media ${R.G.SMALLER_THAN_TABLET}`]:{display:"none"}},hideOnMobile:{[`@media ${R.G.SMALLER_THAN_MOBILE}`]:{display:"none"}},text:{[`@media ${R.G.SMALLER_THAN_TABLET}`]:{fontSize:R.lb.SIZE_XSMALL}},textContainer:{flex:1,[`@media ${R.G.SMALLER_THAN_MOBILE}`]:{marginLeft:0}}});function x(e){const t=e.owner,n=e.fallback,a=e.userCanAdmin,r=e.shouldDisplaySoftAlert,o=(()=>{const e=r&&!t.hasExceededUsageLimits&&t.hasReachedSomeLimits;return t.hasExceededUsageLimits?"You have exceeded the limits of your plan, upgrade to continue enjoying all premium features.":e?"Upgrade to a Startup Plan to invite your team and unlock premium features.":null})();return t.isOrg&&o?i.createElement(R.m.Brand,null,i.createElement(R.b,{styles:R.b.STYLES.info},i.createElement(R.b.Inner,null,i.createElement(R.b.Icon,{styles:[A.hideOnMobile]},i.createElement(C.ub,null)),i.createElement(R.b.Text,{styles:[A.textContainer]},i.createElement(R.eb.TextH400,{styles:[A.text]},o)),i.createElement(R.b.Action,null,i.createElement(R.h,{kind:"link",size:"small",component:j.b,to:"pricing",target:"_blank",styles:[A.hideOnTablet]},"Discover our pricing"),a&&i.createElement(R.h,{size:"small",component:j.b,to:`/@${t.baseDomain}/billing/upgrade/startup`,style:{color:R.kb.WHITE}},"Upgrade"))))):n}x.defaultProps={fallback:null};var P=x;var _=function(){window.Beacon.readyQueue?window.open("mailto:support@gitbook.com"):window.Beacon("open")},B=n(10);const N=k.StyleSheet.create({ownerAvatarList:{display:"flex",flexDirection:"row-reverse"},ownerAvatarListItem:{zIndex:0,"&:nth-last-child(n+2)":{marginLeft:-8}},whiteOutline:{boxShadow:"0 0 0 2px white"},darkOutline:{boxShadow:"rgba(0,0,0,0.1) 0px 0px 0px 2px"},ownerAvatarListMore:{color:R.kb.GREY_BASE,backgroundColor:R.kb.GREY_LIGHTEST}});function M(e){const t=e.withTooltip,n=e.ownerIDs,a=e.max,r=e.size,o=e.outline,s=e.styles,c=n.slice(0,a).reverse(),u=n.length-a,l="white"===o?N.whiteOutline:N.darkOutline;return i.createElement(R.gb,{styles:[N.ownerAvatarList,s]},u>0&&i.createElement(R.e.Frame,{size:r,circle:!0,tooltip:`And ${u} more`,styles:[N.ownerAvatarListItem,N.ownerAvatarListMore,l]},i.createElement(R.eb.InfoH200,null,u)),c.map(e=>i.createElement(q,{key:e,ownerID:e,size:r,styles:[N.ownerAvatarListItem,l],withTooltip:t})))}M.defaultProps={withTooltip:!0,size:"small",outline:"white",max:3};var G=M,z=n(272);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $(e){const t=e.owner,n=e.ownerID,a=e.styles,r=e.withTooltip,o=e.size,s=e.onClick,u=function(e,t){const n=Object(c.f)(e,B.u.queryByID(e?e.uid:t)),a=n[0],r=n[1];return a?[a.isUser?{uid:a.uid,name:a.displayName,imageURL:a.photoURL}:{uid:a.uid,name:a.name,imageURL:a.logoURL},r]:[null,r]}(t,n),l=u[0],d=u[1],p={tooltip:r&&l?l.name:null,circle:!0,size:o,styles:a,onClick:s};return d||!l?i.createElement(R.e.Placeholder,p):l.imageURL?i.createElement(z.a,H({},p,{innerShadow:!0,src:l.imageURL})):i.createElement(R.e.Fallback,H({},p,{text:l.name,hashId:l.uid}))}$.defaultProps={withTooltip:!1,styles:null,onClick:()=>{}},$.List=G;var q=$;function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function V(e){const t=e.space,n=e.spaceID,a=e.styles,r=e.withTooltip,o=e.size,s=Object(c.f)(t,B.G.queryByID(n)),u=s[0],l=s[1],d={tooltip:r&&u?u.name:null,size:o,styles:a};return l||!u?i.createElement(R.e.Placeholder,d):u.logoURL?i.createElement(z.a,F({},d,{src:u.logoURL})):i.createElement(R.e.Fallback,F({},d,{text:u.name,hashId:u.uid}))}V.defaultProps={withTooltip:!1,styles:null};var Y=V,J=n(560);var W=function(e){return e.isOrg&&e.isLocked?{isDisabled:!0,ariaLabel:"Suspended organizations cannot create new spaces"}:!e.canCreateSpace&&e.isOrg?{isDisabled:!0,ariaLabel:"Upgrade your plan to create a new space"}:!e.canCreateSpace&&e.isUser?{isDisabled:!0,ariaLabel:"Create an organization to create more spaces"}:{isDisabled:!1,ariaLabel:null}},Z=n(13),K=n(4);function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class X extends(Object(K.Record)({incidentID:"",updatedAt:new Date,name:"",message:"",status:""})){static deserialize(e){return e?new X(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Q(e,t,n[t])})}return e}({},e,{updatedAt:new Date(e.updatedAt)})):new X}serialize(){return this.toJS()}shouldDisplay(e){return this.isUnresolved||this.isScheduled&&e}get isResolved(){return this.status===X.STATUS_RESOLVED||this.status===X.STATUS_COMPLETED}get isUnresolved(){return this.status===X.STATUS_INVESTIGATING||this.status===X.STATUS_IDENTIFIED||this.status===X.STATUS_MONITORING||this.status===X.STATUS_VERIFYING||this.status===X.STATUS_IN_PROGRESS}get isScheduled(){return this.status===X.STATUS_SCHEDULED}}Q(X,"STATUS_SCHEDULED","scheduled"),Q(X,"STATUS_INVESTIGATING","investigating"),Q(X,"STATUS_IDENTIFIED","identified"),Q(X,"STATUS_IN_PROGRESS","in_progress"),Q(X,"STATUS_MONITORING","monitoring"),Q(X,"STATUS_VERIFYING","verifying"),Q(X,"STATUS_RESOLVED","resolved"),Q(X,"STATUS_COMPLETED","completed");var ee=X;var te=i.createContext(new ee);var ne=function(e){const t=e.children,n=Object(Z.g)();return i.useContext(te).shouldDisplay(n.isLoggedIn)?null:t},ae=n(28);const re=k.StyleSheet.create({bannerLink:{color:"inherit"}});var oe=function(e){const t=Object(Z.g)(),n=Object(Z.i)(),a=i.useContext(te);return a.shouldDisplay(t.isLoggedIn)?i.createElement(R.Z.Disable,null,i.createElement(R.b,{styles:[R.b.STYLES.warning]},i.createElement(R.b.Inner,null,i.createElement(R.b.Icon,null,i.createElement(C.c,null)),i.createElement(R.b.Text,null,i.createElement(R.gb,null,i.createElement(R.eb.HeadingH400,null,i.createElement(R.D,{styles:[re.bannerLink],kind:"text",target:"_blank",href:`${n.statuspage.domain}/incidents/${a.incidentID}`},a.name))),i.createElement(R.gb,null,i.createElement(R.eb.TextH200,null,"(",i.createElement(ae.a,{value:a.updatedAt,month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZoneName:"short",timeZone:"UTC",hour12:!1}),") ",a.message)))))):null},ie=n(561),se=n(562);n.d(t,"b",function(){return a.a}),n.d(t,"d",function(){return r.a}),n.d(t,"e",function(){return o.a}),n.d(t,"n",function(){return u}),n.d(t,"t",function(){return d}),n.d(t,"s",function(){return p}),n.d(t,"r",function(){return m}),n.d(t,"g",function(){return f.a}),n.d(t,"o",function(){return v.b}),n.d(t,"p",function(){return D}),n.d(t,"j",function(){return L.a}),n.d(t,"i",function(){return I.a}),n.d(t,"m",function(){return P}),n.d(t,"v",function(){return _}),n.d(t,"k",function(){return q}),n.d(t,"q",function(){return Y}),n.d(t,"c",function(){return J.a}),n.d(t,"u",function(){return W}),n.d(t,"l",function(){return oe}),n.d(t,"a",function(){return ne}),n.d(t,"h",function(){return ie.a}),n.d(t,"f",function(){return se.a}),n.d(t,"E",function(){return c.k}),n.d(t,"F",function(){return c.l}),n.d(t,"D",function(){return c.j}),n.d(t,"y",function(){return c.d}),n.d(t,"A",function(){return c.g}),n.d(t,"G",function(){return c.m}),n.d(t,"B",function(){return c.h}),n.d(t,"C",function(){return c.i}),n.d(t,"w",function(){return c.b}),n.d(t,"x",function(){return c.c}),n.d(t,"z",function(){return c.e})},165:function(e,t,n){"use strict";n.d(t,"a",function(){return a});const a=["organization","pro","plus","small","medium","large"]},196:function(e,t,n){"use strict";var a=n(187),r=n(4),o=n(6),i=n(24);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends(Object(r.Record)({uid:"",ancestor:new i.z,base:new i.z,head:new i.z,startedAt:new Date,isPublish:!1,showingOnlyConflicts:!1,versions:Object(r.Map)(),resolved:Object(r.Map)()})){static create(e){return new c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){s(e,t,n[t])})}return e}({},e,{startedAt:new Date,uid:Object(a.a)()}))}getConflict(e,t){const n=Object(i.N)(e),a=Object(i.N)(t),r=this.versions.get(n);return r&&r.find(e=>e.uid===a)}isMarkedAsResolved(e,t){return Boolean(this.resolved.getIn([e.uid,t.uid]))}markAsResolved(e,t,n){const a=this.set("resolved",this.resolved.setIn([e.uid,t.uid],n));return a.documentResolutionCache=this.documentResolutionCache,a}isPageResolved(e,t,n){const a=this.getConflict(e,t);if(!a)return!0;const r="remove"===a.base.type||"remove"===a.head.type;return Boolean(this.isMarkedAsResolved(e,t)||!r&&n&&this.isDocumentResolved(e,t,n))}pageContainsConflicts(e,t){return Boolean(t.findPage(t=>this.getConflict(e,t)))}isDocumentResolved(e,t,n){this.documentResolutionCache||(this.documentResolutionCache=new r.Map);let a=this.documentResolutionCache.getIn([e,t]);return(!a||a&&a.document!==n)&&(a={document:n,resolved:!o.d.hasConflicts(n)},this.documentResolutionCache=this.documentResolutionCache.setIn([e,t],a)),a.resolved}getConflictingPagesCount(){return this.versions.reduce((e,t)=>t.size+e,0)}getResolutionDuration(){return Date.now()-this.startedAt.getTime()}}t.a=c},233:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n(52);const o=a.createContext();t.b=function(e){const t=e.children,n=a.useContext(r.e).history;return a.createElement(o.Provider,{value:n},t)}},243:function(e,t,n){"use strict";var a=n(4),r=n(105);t.a=class extends(Object(a.Record)({head:new r.a,base:new r.a})){get uid(){return this.head.uid}}},248:function(e,t,n){"use strict";var a=n(674);t.a=class extends a.a{constructor(e){super("Conflicts detected"),this.conflicts=e}get isConflict(){return Boolean(this.conflicts)}}},46:function(e,t,n){"use strict";t.a={READER:"reader",WRITER:"writer",REVIEWER:"reviewer",ADMIN:"admin"}},590:function(e,t,n){e.exports=n.p+"images/6917f483dc63a2a51267f305812e1f10.svg"},70:function(e,t,n){"use strict";var a=n(0),r=n(52);var o=function(){return Object(a.useContext)(r.e)},i=n(233);var s=function(){return Object(a.useContext)(i.a)},c=n(146),u=n.n(c),l=n(75),d=n.n(l),p=n(84),m=n.n(p),f=n(13);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return u.a.parse(e).pathname||""}var b=function(){const e=Object(f.g)(),t=Object(f.i)(),n=function(t,n){if(void 0===n&&(n=""),!e.isLoggedIn)return;const a=m()(t,h(n)),r=u.a.parse(n).search,o=d.a.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){g(e,t,n[t])})}return e}({},d.a.parse(r?r.replace("?",""):""),{id_token:e.idToken}));window.location=`${a}?${o}`},a=function(a){if(void 0===a&&(a="/"),e.isLoggedIn)return n(t.urls.website,a)};return{redirectAndAuth:n,redirectToWebsite:a,redirectToSpace:a=>{let r=a.owner,o=a.space,i=a.pathname,s=void 0===i?"":i;if(!e.isLoggedIn)return;const c=o.getURL(r,t.domains.spaces);return n(c,s)},redirectToSpaceDomain:a=>{let r=a.owner,o=a.spaceName,i=a.pathname,s=void 0===i?"":i;if(!e.isLoggedIn)return;const c=m()(r.getSpacesURL(t.domains.spaces),o);return n(c,s)},redirectToOwner:e=>{let t=e.owner,n=e.pathname,r=void 0===n?"":n;const o=`/@${t.baseDomain}/`,i=m()(o,h(r));return a(i)},redirectToSignIn:function(e){let n=void 0===e?{}:e,a=n.owner,r=n.space,o=n.pathname,i=m()(t.urls.website,"login");a&&r&&(i=m()(i,a.baseDomain,r.baseName)),o&&(i=m()(i,`?${d.a.stringify({location:o})}`)),window.location=i},redirectToSignOut:()=>{window.location=`/?${d.a.stringify({id_token:e.idToken,auth_action:"signout"})}`}}},y=n(10);var w=function(){const e=Object(f.g)(),t=Object(f.h)();return{applyInvite:async n=>{let a=n.org,r=n.invite,o=n.membership;const i=r.teamID&&o?o.updateFromTeamInvite(r):y.r.createForInvite(e.uid,r);await t.database.commit(i.toUpdate(a.uid)),t.analytics.trackJoinOrg({org:a,role:i.role,isTeam:r.isTeam})}}};var S=function(){const e=Object(f.h)(),t=e.database,n=e.analytics,a=e.auth,r=e.storage,o=Object(f.g)(),i=async(e,n)=>{await t.updateDocument(n.query(e.uid),{teams:n.teams.map(e=>e.serialize()).toJS()})};return{createTeam:async(e,a)=>{await t.commit(a.toCreateUpdate(e.uid)),n.trackCreateTeam(e)},updateTeamName:async(e,n)=>{await t.updateDocument(n.query(e.uid),{name:n.name})},deleteTeam:async(e,n)=>{await t.deleteDocument(n.query(e.uid))},updateOrgLogo:async(e,n)=>{const a=f.e.orgUpload({orgID:e.uid,filename:n.name}),i=await r.uploadFile(a,n,{user:o});await t.updateDocument(e.query(),{logoURL:i.downloadURL})},updateOrgName:async(e,n)=>{await t.updateDocument(e.query(),{name:n})},updateBaseDomain:async(e,n)=>{await t.commit(e.setBaseDomain(n).toBaseDomainUpdate())},deleteOrganization:async e=>{await t.commit(e.toDeleteUpdate()),n.trackDeleteOrg(e)},disableSAML:async(e,n)=>{await t.commit(n.toRemoveUpdate(e.uid))},updateSAMLIdP:async(e,n)=>{await t.commit(n.toUpdate(e.uid))},createSpaceOwnership:async e=>{let i=e.org,s=e.space,c=e.logo;const u=!i.uid,l=u&&(i.logoURL&&/^data:image/.test(i.logoURL)||!c)?null:i.logoURL,d=u?i.regenerateUID():i,p=y.B.createInitialRevision(a.getCurrentUser()),m=s.regenerateUID().merge({ownerID:d.uid,primaryRevision:p.uid}),g=m.merge({logoURL:l}).toCreateUpdate().set(y.B.queryByID({spaceID:m.uid,revisionID:p.uid}),p);return u&&g.merge(d.merge({logoURL:l}).toCreateUpdate()),await t.commit(g),u&&n.trackCreateOrg(d,m),n.trackCreateSpace(d,m),c&&await(async e=>{let t=e.space,n=e.org,a=e.logo,i=e.shouldCreateOrg;const s=f.e.spaceUpload({spaceID:t.uid,filename:a.name}),c=f.e.orgUpload({orgID:n.uid,filename:a.name});try{await Promise.all([i?r.uploadFile(c,a,{user:o}):{},r.uploadFile(s,a,{user:o})])}catch(u){if("storage/object-not-found"!==u.code)throw u}})({space:m,org:d,logo:c,shouldCreateOrg:u}),{space:m,org:d}},updateBillingConfig:async function(e,a,r){void 0===r&&(r="");const o=a.action||{},i=o.type,s=(o.payload||{}).plan;await t.setDocument(a.query(),a),i===y.f.ACTIONS_TYPES.SUBSCRIBE&&r&&s?n.trackUpgrade(e,r,s):i===y.f.ACTIONS_TYPES.CANCEL_SUBSCRIPTION&&r&&s&&n.trackDowngrade(e,r,s)},removeMember:async(e,n)=>{await t.commit(n.toDeleteUpdate(e.uid))},updateMemberRole:async(e,n,a)=>{const r=n.merge({role:a});await t.commit(r.toUpdate(e.uid))},transferOwnership:async(e,n)=>{await t.commit(e.toTransferOwnershipUpdate(n.uid))},updateMemberTeams:i,updateMembersTeams:async(e,t)=>{await Promise.all(t.map(t=>i(e,t)).toArray())},revokeInvites:async(e,n,a)=>{const r=y.q.getNewInvitesUpdate(e.uid,a&&a.uid);n.forEach(t=>{r.delete(t.query(e.uid))}),await t.commit(r)}}};var O=function(){const e=Object(f.h)(),t=e.auth,n=e.database,a=e.analytics,r=e.storage,o=Object(f.g)();return{createUserSpace:async e=>{let r=e.user,o=e.space;const i=y.B.createInitialRevision(t.getCurrentUser()),s=o.regenerateUID().merge({primaryRevision:i.uid}),c=s.toCreateUpdate().set(i.query(s.uid),i);await n.commit(c),await a.trackCreateSpace(r,o)},uploadLogo:async(e,t)=>{const a=f.e.spaceUpload({spaceID:e.uid,filename:t.name}),i=await r.uploadFile(a,t,{user:o});await n.updateDocument(e.query(),{logoURL:i.downloadURL})},uploadFullLogo:async(e,t,i)=>{if(i){const s=f.e.spaceUpload({spaceID:t.uid,filename:i.name,kind:"rectangle"}),c=await r.uploadFile(s,i,{user:o});t.fullLogoURL||a.trackToggleFullLogo(e,t,!0),await n.updateDocument(t.query(),{fullLogoURL:c.downloadURL})}else await n.updateDocument(t.query(),{fullLogoURL:null}),a.trackToggleFullLogo(e,t,!1)},updateVisibility:async(e,t,r)=>{const o=t.setVisibility(r);await n.commit(o.toVisibilityUpdate()),a.trackSetSpaceVisibility(e,o)},updateUnlisted:async(e,t,r)=>{await n.updateDocument(t.query(),{isUnlisted:r}),a.trackToggleSpaceUnlisted(e,t,r)},updateSecretToken:async(e,t,r)=>{await n.commit(t.toSecretTokenUpdate(r)),r?a.trackToggleShareableLink(e,t,!1):t.secretToken||a.trackToggleShareableLink(e,t,!0)},updateSpacePermissions:e=>{let t=e.org,a=e.spaceID,r=e.value,o=e.team;return o?n.updateDocument(o.query(t.uid),{spacesPermission:(r?o.spacesPermission.delete(a):o.spacesPermission.merge({[a]:!1})).toJS()}):n.updateDocument(t.query(),{spacesPermission:(r?t.spacesPermission.delete(a):t.spacesPermission.merge({[a]:!1})).toJS()})},deleteSpace:async(e,t)=>{const a=t.toDeleteUpdate();e.defaultSpace===t.uid&&a.update(e.query(),{defaultSpace:null}),await n.commit(a)},transferSpace:async e=>{let t=e.owner,r=e.newOwner,o=e.space,i=e.newBaseName;const s=o.toTransferOwnershipUpdate(r.uid,i);t.defaultSpace===o.uid&&s.update(t.query(),{defaultSpace:null}),await n.commit(s),await a.trackTransferSpace(t,r,o)},configureGitHubSync:async e=>{let t=e.owner,r=e.space,i=e.githubConfig,s=e.editOnGitHub;const c=i.merge({createdBy:o.uid});await n.commit(c.toCreateUpdate(r.uid,s)),a.trackSetupGitHubSync(t,r,{githubConfig:i,editOnGitHub:s})}}};var v=function(){const e=Object(f.h)().database;return{updateDefaultSpace:async(t,n)=>{await e.updateDocument(t.query(),{defaultSpace:n})}}};var T=function(e){const t=Object(f.i)();return f.c.transformURL(e,t.cdn.blobsurl)},E=n(1);var U=function(e,t){const n=E.Z.useIsLoading(),a=Object(f.k)({fetchedDoc:e?null:t}).fetchedDoc,r=a&&!a.isFetched||n;return[a?a.value:e,r]};var D=function(){return Object(f.i)().stripe.plans};var L=function(){const e=Object(f.g)(),t=Object(f.h)(),n=Object(f.i)(),a=async t=>{const a=`${n.urls.website}${t}?token=${e.idToken}`,r=await fetch(a),o=(await r.json()).downloadURL;window.open(o,"_blank")};return{onUserExport:async()=>{await a("/export/user"),await t.analytics.trackExportUser(e.uid)},onSpaceExport:async(e,n)=>{await a(`/export/space/${n.uid}`),await t.analytics.trackExportSpace(e,n)},onOrgExport:async e=>{await a(`/export/org/${e.uid}`),await t.analytics.trackExportOrg(e)}}},I=n(222),k=n.n(I),C=n(681),R=n.n(C);k.a.plugin(R.a);var j=function(){return{checkTokenSanity:async(e,t)=>{const n=new k.a({auth:`token ${e}`}),a=t.split("/"),r=a[0],o=a[1];try{if(!(await n.repos.get({owner:r,repo:o})).data.permissions.admin)throw new Error(`User no longer has the admin permissions for the repository ${t}.`)}catch(i){throw new Error(`The GitHub token has expired or the user has no longer access to the repository ${t}.`)}},getUserRepos:async e=>{const t=new k.a({auth:`token ${e}`}),n=await t.paginate(t.repos.list.endpoint.merge()),a={};return{repos:n.map(e=>{const t={id:e.owner.id,avatarUrl:e.owner.avatar_url,login:e.owner.login,repos:0};return a[t.id]=a[t.id]||t,a[t.id].repos+=1,{id:e.id,name:e.name,isPrivate:e.private,canAdmin:e.permissions.admin,owner:t}}),orgs:Object.values(a).sort((e,t)=>t.repos>e.repos?1:-1)}},getRepoBranches:async(e,t,n)=>{const a=new k.a({auth:`token ${e}`});return(await a.paginate(a.repos.listBranches.endpoint.merge({owner:t,repo:n}))).map(e=>e.name)}}};var A=function(){const e=Object(f.h)(),t=e.database,n=e.analytics,a=Object(f.g)();return{rollbackMigration:async(e,a)=>{await t.commit(a.merge({confirmed:!1}).toSyncUpdate()),n.trackRollbackMigration(e)},confirmMigration:async(e,a)=>{await t.commit(a.merge({confirmed:!0}).toSyncUpdate()),n.trackConfirmMigration(e)},migrateBook:async function(e,n,a){void 0===a&&(a=!1);const r=a?n.importAllBranches():n.importDefaultBranch();await t.commit(e.updateBook(r).toSyncUpdate())},migrateGitHubSync:async(e,n)=>{await Promise.all(e.githubBooks.toArray().map(e=>{const r=y.o.create({token:n,repoID:e.repoID,createdBy:a.uid});return t.commit(r.toCreateUpdate(e.spaceID))})),await t.commit(e.merge({githubSync:!0}).toSyncUpdate())}}};n.d(t,"k",function(){return o}),n.d(t,"l",function(){return s}),n.d(t,"j",function(){return b}),n.d(t,"d",function(){return w}),n.d(t,"g",function(){return S}),n.d(t,"m",function(){return O}),n.d(t,"h",function(){return v}),n.d(t,"a",function(){return T}),n.d(t,"f",function(){return U}),n.d(t,"i",function(){return D}),n.d(t,"b",function(){return L}),n.d(t,"c",function(){return j}),n.d(t,"e",function(){return A})}}]);