(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[134,175],{11:function(e,t,r){"use strict";var i=r(4),n=r(31),s=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends(Object(i.Record)({optimistic:!0,waitFetched:!0,placeholder:!0,ignoreErrors:!1,background:!1})){}function c(e){s()(e.every(Boolean),`Found empty or void parts in DatabaseQuery path: ${JSON.stringify(e)}`)}class u extends(Object(i.Record)({sign:"==",value:null,property:""})){serialize(){return this.toJS()}static deserialize(e){return new u(e)}}class l extends(Object(i.Record)({kind:"",collectionKeys:[],options:new o,filters:Object(i.List)(),limit:null,defaultValue:Object(i.OrderedMap)()})){constructor(){super(...arguments),c(this.collectionKeys)}get path(){return this.collectionKeys.join("/")}get cacheKey(){const e=this.filters.sortBy(e=>e.property).reduce((e,t)=>`${e}@${t.property}${t.sign}${t.value}`,"");return`${this.path},${e},${this.limit}`}serialize(){return{kind:this.kind,collection:this.collectionKeys,filters:this.filters.toJS()}}hasLimit(){return null!==this.limit}isDocumentQuery(){return!1}isCollectionQuery(){return!0}where(e,t,r){void 0===r&&(r="=="),s()(this.filters.isEmpty(),"Only one filter is supported with the RTDB, it will be supported with Firestore");const i=new u({property:e,value:t,sign:r});return this.merge({filters:this.filters.push(i)})}limitToLast(e){return this.merge({limit:e})}doc(e){return new d({kind:this.kind,collectionKeys:this.collectionKeys,documentKey:e,options:this.options})}setOptions(e){return this.merge({options:this.options.merge(e)})}matchDocument(e){if(this.filters.isEmpty())return!0;const t=e.serialize();return this.filters.every(e=>{const r=void 0===t[e.property]?null:t[e.property];switch(e.sign){case">=":return r>=e.value;case"<=":return r<=e.value;case"==":return r===e.value;default:throw new Error(`Invalid sign "${e.sign}"`)}})}defaultsTo(e){return this.merge({defaultValue:e}).setOptions({waitFetched:!1})}}a(l,"deserialize",h);class d extends(Object(i.Record)({kind:"",collectionKeys:[],documentKey:"",options:new o,defaultValue:null})){constructor(){super(...arguments),c([...this.collectionKeys,this.documentKey])}get path(){return this.collectionKeys.concat([this.documentKey]).join("/")}get cacheKey(){return this.path}serialize(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){a(e,t,r[t])})}return e}({},this.parent().serialize(),{doc:this.documentKey})}isDocumentQuery(){return!0}isCollectionQuery(){return!1}parent(){return new l({kind:this.kind,collectionKeys:this.collectionKeys})}collection(e,t){return new l({kind:e,collectionKeys:this.collectionKeys.concat([this.documentKey]).concat(Array.isArray(t)?t:[t]),options:this.options})}setOptions(e){return this.merge({options:this.options.merge(e)})}defaultsTo(e){return this.merge({defaultValue:e}).setOptions({waitFetched:!1})}}function h(e){const t=new l({kind:e.kind,collectionKeys:e.collection,documentKey:e.doc,filters:Object(i.List)((e.filters||[]).map(e=>u.deserialize(e)))});return e.doc?t.doc(e.doc):t}a(d,"deserialize",h);var p=function(e,t){class r extends(Object(i.Record)(t)){get kind(){return e}serialize(){throw new Error("serialize() not implemented on this model")}static deserialize(e){throw new Error("deserialize() not implemented on this model")}static query(t){return new l({kind:e,collectionKeys:Array.isArray(t)?t:[t]})}}var n,s,a;return a=e,(s="KIND")in(n=r)?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,r};var m=class{constructor(){this.operations=[]}merge(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(e=>{this.operations=this.operations.concat(e.operations)}),this}filter(e){return this.operations=this.operations.filter(t=>e(t)),this}set(e,t){return this.operations.push({type:"set",query:e,doc:t}),this}update(e,t){return this.operations.push({type:"update",query:e,properties:t}),this}updateProperty(e,t,r){return this.operations.push({type:"update_property",query:e,property:t,value:r}),this}delete(e){return this.operations.push({type:"delete",query:e}),this}deleteCollection(e){return this.operations.push({type:"delete_collection",query:e}),this}toPathMap(){const e=this.operations,t={};return e.forEach(e=>{const r=e.query.path;if("set"===e.type&&e.doc){const i=e.doc.serialize();t[r]=i}else"update"===e.type&&e.properties?Object.keys(e.properties).forEach(i=>{t[`${r}/${i}`]=e.properties[i]}):"update_property"===e.type?t[`${r}/${e.property}`]=e.value:"delete"!==e.type&&"delete_collection"!==e.type||(t[r]=null)}),t}},g=r(187);function f(){return Object(g.a)()}function y(e){return e.replace(/%/g,"%25").replace(/\./g,"%2E").replace(/#/g,"%23").replace(/\$/g,"%24").replace(/\//g,"%2F").replace(/\[/g,"%5B").replace(/\]/g,"%5D").replace(/\n/g,"%0A")}r.d(t,"f",function(){return f}),r.d(t,"e",function(){return y}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return m}),r.d(t,"d",function(){return d}),r.d(t,"a",function(){return l})},129:function(e,t,r){"use strict";var i=r(11),n=r(46);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends(Object(i.b)("userMembership",{uid:"",role:n.a.READER,joinedAt:new Date})){static queryByUser(e){return this.query(["orgs",e,"orgs"])}static queryByID(e){let t=e.orgID,r=e.userID;return this.queryByUser(r).doc(t)}query(e){return a.queryByID({orgID:this.uid,userID:e})}get canEdit(){return/^(writer|reviewer|admin)$/.test(this.role)}get canReview(){return/^(reviewer|admin)$/.test(this.role)}get canAdmin(){return this.role==n.a.ADMIN}static deserialize(e){return new a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){s(e,t,r[t])})}return e}({},e,{joinedAt:new Date(e.joinedAt)}))}serialize(){return{uid:this.uid,role:this.role,joinedAt:this.joinedAt.getTime()}}}t.a=a},148:function(e,t,r){"use strict";var i=r(4),n=r(46);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends(Object(i.Record)({role:n.a.READER,joinedAt:new Date})){static create(e){return void 0===e&&(e={}),new o(s({joinedAt:new Date},e))}get canEdit(){return/^(writer|reviewer|admin)$/.test(this.role)}get canReview(){return/^(reviewer|admin)$/.test(this.role)}get canAdmin(){return this.role==n.a.ADMIN}static deserialize(e){return o.create(s({},e,{joinedAt:new Date(e.joinedAt)}))}serialize(){return{role:this.role,joinedAt:this.joinedAt.getTime()}}}t.a=o},149:function(e,t,r){"use strict";var i=r(186),n=r.n(i),s=r(4),a=r(11),o=r(125),c=r(107);function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){l(e,t,r[t])})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends(Object(s.Record)({ref:"",title:"",page:c.a.create(),github:null})){get uid(){return this.ref}get path(){return d.pathFromUid(this.ref)}static pathFromUid(e){return e.replace(/\//g,"%2F")}static uidFromPath(e){return e.replace(/%2F/g,"/")}static create(e){if(void 0===e&&(e={}),e instanceof d)return e;const t=e.page||c.a.create();return new d({ref:e.ref||t.path,title:e.title||"",github:e.github?o.a.create(e.github):null,page:t})}static createVersions(e){return Object(s.OrderedMap)(e.map(e=>{const t=d.create(e);return[t.ref,t]}))}static createInitialVersion(e){return d.create({ref:e||"master",title:e||"1.0.0",page:c.a.create({title:"Initial page",path:"master"})})}static createInitialVersions(){const e=this.createInitialVersion();return Object(s.OrderedMap)({[e.uid]:e})}static deserialize(e){const t=c.a.deserializeTree(e),r=e.ref||t.path;if(!r)throw new Error("Missing ref to deserialize a Version");return d.create({ref:r,title:e.title,page:t,github:e.github?o.a.deserialize(e.github):null})}static deserializeVersions(e){return Object(s.OrderedMap)(Array.isArray(e)?e.map((e,t)=>[t,e]):e).mapEntries(e=>{e[0];let t=e[1];const r=d.deserialize(t);return[r.uid,{index:t.index,version:r}]}).sortBy(e=>{return e.index}).map(e=>{return e.version})}static serializeVersions(e){return e.mapEntries((e,t)=>{e[0];let r=e[1];return[Object(a.e)(r.uid),u({index:t},r.serialize())]}).toObject()}static normalizeRef(e,t){return void 0===t&&(t="undefined"),n()(e,{tone:!1,separateNumbers:!1,custom:{".":".","/":"/","+":"+"}}).slice(0,100)||t}static getRef(e,t,r){void 0===r&&(r=0);const i=r>0?`${t}-${r}`:t;return e.has(i)?d.getRef(e,t,r+1):i}serialize(){return u({ref:this.ref,title:this.title,github:this.github?this.github.serialize():null},this.page.serializeTree())}setPage(e){return this.updatePage(e,t=>e)}updatePage(e,t){return this.set("page",this.page.updatePage(e,t))}updateRef(e,t){return this.set("ref",d.getRef(e,t))}}l(d,"REF_LIMIT",100),t.a=d},150:function(e,t,r){"use strict";var i=r(4),n=r(11),s=r(245),a=r(86),o=(r(200),r(53)),c=r(36);function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){l(e,t,r[t])})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends(Object(n.b)("space",{uid:"",name:"",baseName:"",ownerID:"",isPrivate:!1,isUnlisted:!1,secretToken:null,createdAt:new Date,createdBy:"",logoURL:null,fullLogoURL:null,colorPrimary:"#3884FF",primaryRevision:"",algoliaAPIKey:"",customDomain:null,links:Object(i.List)(),hasGitHubSync:!1,editOnGitHub:null,googleAnalyticsID:null,intercomID:null,hasPageRating:!0,edits:new c.a})){get updatedAt(){return this.edits.lastContributionAt||this.createdAt}get visibility(){return this.isPrivate?"private":"public"}get isIndexable(){return!this.isPrivate&&!this.isUnlisted}static queryByID(e){return this.query(`spaces/${e}`).doc("infos")}query(){return d.queryByID(this.uid)}static create(e){if(void 0===e&&(e={}),e instanceof d)return e;const t=new Date(e.createdAt||Date.now());return new d(u({},e,{uid:e.uid||Object(n.f)(),createdAt:t,edits:e.edits||(new c.a).addContribution(e.createdBy,t)}))}regenerateUID(){return this.merge({uid:Object(n.f)()})}setVisibility(e){switch(e){case"private":return this.merge({isPrivate:!0,isUnlisted:!1});default:return this.merge({isPrivate:!1,isUnlisted:!1})}}getURL(e,t,r){let i=(void 0===r?{}:r).includeToken,n=void 0===i||i;const s=this.customDomain?`https://${this.customDomain}/`:`${e.getSpacesURL(t)}/${this.baseName}/`;return this.isPrivate&&this.secretToken&&n?`${s}${this.secretToken}/`:s}limitLinks(){return this.merge({links:this.links.take(d.LINKS_LIMIT)})}moveLink(e,t){const r=this.links,i=r.get(e),n=r.splice(e,1).splice(t,0,i);return this.merge({links:n})}toLinksUpdate(){const e=this.links;return(new n.c).update(d.queryByID(this.uid),{links:e.map(e=>e.serialize()).toArray()})}toSecretTokenUpdate(e){return void 0===e&&(e=!1),(new n.c).update(this.query(),{secretToken:e?null:Object(n.f)()})}toCustomDomainUpdate(e){const t=this.merge({customDomain:e}),r=o.a.createFromSpace(t),i=o.a.createFromSpace(this),s=new n.c;return s.update(d.queryByID(this.uid),{customDomain:r?e:null}),i&&this.customDomain&&this.customDomain!==e&&s.set(o.a.queryByDomain(this.customDomain),i.merge({deprecated:!0})),r&&s.set(o.a.queryByDomain(r.domain),r),s}toBaseNameUpdate(e){const t=a.a.createFromSpace(this.merge({baseName:e}));return(new n.c).set(t.query(this.ownerID),t).update(a.a.queryByName({ownerID:this.ownerID,baseName:this.baseName}),{deprecated:!0}).update(this.query(),{baseName:e})}toCreateUpdate(){const e=a.a.createFromSpace(this),t=o.a.createFromSpace(this),r=(new n.c).set(d.queryByID(this.uid),this).set(a.a.queryByName({ownerID:this.ownerID,baseName:this.baseName}),e);return t&&r.set(o.a.queryByDomain(t.domain),t),r}toDeleteUpdate(){const e=new n.c;return e.deleteCollection(d.query(`spaces/${this.uid}`)),e.delete(a.a.queryByName({ownerID:this.ownerID,baseName:this.baseName})),this.customDomain&&e.delete(o.a.queryByDomain(this.customDomain)),e}toCheckoutUpdate(e){return(new n.c).update(d.queryByID(this.uid),u({},this.edits.addContribution(e.createdBy).toUpdateFragment("edits",e.createdBy),{primaryRevision:e.uid}))}toVisibilityUpdate(){return(new n.c).update(d.queryByID(this.uid),{isPrivate:this.isPrivate,isUnlisted:this.isUnlisted,secretToken:this.isPrivate?this.secretToken:null})}toTransferOwnershipUpdate(e,t){void 0===t&&(t=this.baseName);const r=new n.c;r.delete(a.a.queryByName({ownerID:this.ownerID,baseName:this.baseName})),r.update(this.query(),{ownerID:e,baseName:t}),this.customDomain&&r.update(o.a.queryByDomain(this.customDomain),{ownerID:e});const i=a.a.createFromSpace(this.merge({ownerID:e,baseName:t}));return r.set(i.query(e),i),r}static deserialize(e){return new d(u({},e,{secretToken:e.secretToken||null,isUnlisted:Boolean(e.isUnlisted),createdAt:new Date(e.createdAt),links:Object(i.List)((e.links||[]).map(e=>s.a.deserialize(e))),hasPageRating:null==e.hasPageRating||e.hasPageRating,edits:e.edits?c.a.deserialize(e.edits):(new c.a).addContribution(e.createdBy,new Date(e.updatedAt||e.createdAt))}))}serialize(){return{uid:this.uid,name:this.name,ownerID:this.ownerID,isPrivate:this.isPrivate,isUnlisted:this.isUnlisted,secretToken:this.secretToken,logoURL:this.logoURL,fullLogoURL:this.fullLogoURL,primaryRevision:this.primaryRevision,colorPrimary:this.colorPrimary,createdAt:this.createdAt.getTime(),createdBy:this.createdBy,algoliaAPIKey:this.algoliaAPIKey,baseName:this.baseName,customDomain:this.customDomain,links:this.links.map(e=>e.serialize()).toArray(),hasGitHubSync:this.hasGitHubSync,editOnGitHub:this.editOnGitHub,googleAnalyticsID:this.googleAnalyticsID,intercomID:this.intercomID,hasPageRating:this.hasPageRating,edits:this.edits.serialize()}}setBaseName(e){return this.merge({baseName:d.normalizeBaseName(e)})}static normalizeBaseName(e){return e.trim().replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-").toLowerCase().substr(0,50).replace(/-$/,"")}static validateBaseName(e){return Boolean(/^[a-z0-9-_]+$/.test(e)&&e.length>=1&&e.length<=50)}static validateColor(e){return/^#([0-9a-f]{6}|[0-9a-f]{3})$/i.test(e)}}l(d,"LINKS_LIMIT",4),l(d,"NAME_LIMIT",65),t.a=d},195:function(e,t,r){"use strict";var i=r(4),n=r(41);var s=function(e,t){const r=Object(n.diffVersions)(e.versions,t.versions),s=n.Patch.createFromDiffs(r),a=s.countBy(e=>e.type),o={modifiedVersions:a.get(n.Patch.TYPES.UPDATE,0),addedVersions:a.get(n.Patch.TYPES.ADD,0),removedVersions:a.get(n.Patch.TYPES.REMOVE,0),modifiedPages:0,removedPages:0,addedPages:0};return s.forEach(e=>{if(e.type!==n.Patch.TYPES.UPDATE)return;const t=e.before,r=e.value;if(!t||!r)return;const s=Object(n.diffPages)(t.page,r.page);n.Patch.createFromDiffs(Object(i.List)([s])).forEach(e=>{const t=e.type===n.Patch.TYPES.REMOVE?e.before:e.value;if(!t)return;const r=t.toFlatMap().size;switch(e.type){case n.Patch.TYPES.UPDATE:o.modifiedPages+=1;break;case n.Patch.TYPES.REMOVE:o.removedPages+=r;break;case n.Patch.TYPES.ADD:o.addedPages+=r}})}),o};const a="__END_ENTRY__";function o(e){let t=e.baseID,r=e.max,n=void 0===r?10:r,s=e.getRevision,c=e.shouldStop;if(c(t))return Object(i.List)([a]);const u=Object(i.List)([t]),l=s(t);return!l||n<1?u:l.parent?u.concat(o({baseID:l.parent,max:n-1,getRevision:s,shouldStop:c})):u.push(a)}o.END_ENTRY=a;var c=o,u=r(196);var l=function(e,t,r){const i=Object(n.mergeVersions)(e.versions,r.versions,t.versions),s=i.versions,a=i.conflicts,o=a.size>0?u.a.create({ancestor:e,base:t,head:r,versions:a}):null;return{revision:r.fork().setParents([t.uid,r.uid]).merge({versions:s,assets:Object(n.mergeAssets)(e.assets,r.assets,t.assets).assets}),conflicts:o}},d=r(673),h=r.n(d),p=(r(12),r(6)),m=r(24),g=r(248);const f=12;var y=class{constructor(e){var t,r,i;i=[],(r="operations")in(t=this)?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,this.state=e}get revision(){return this.state.revision}updateState(e){return this.state=e(this.state),this}defer(e){return this.operations.push({fn:e}),this}async apply(e){void 0===e&&(e={});const t=e,r=t.backend,i=t.space,n=t.concurrency,s=void 0===n?f:n,a={space:i,backend:r},o=new h.a(()=>{const e=this.operations.pop();return e?Promise.resolve().then(()=>e.fn(a)):null},s);await o.start(),this.operations.length>0&&await this.apply(e)}async commit(e){let t=e.backend,r=e.space,i=e.draft,n=e.user;const s=i?i.revisionCurrent:r.primaryRevision;if(this.authorizeAs(n.uid).flushDocuments().flushAssets(),await this.apply({backend:t,space:r}),!this.revision.hasParent(s)){const e=await Promise.all([t.database.getDocument(m.z.queryByID({revisionID:this.revision.parent,spaceID:r.uid})),t.database.getDocument(m.z.queryByID({revisionID:s,spaceID:r.uid}))]),i=e[0],n=e[1];if(!i||!n)throw new Error("no ancestor or base");const a=l(i,n,this.revision),o=a.revision.setParents([n.uid,i.uid]);this.updateRevision(e=>o);const c=a.conflicts;if(c)throw this.setConflicts(c),new g.a(c)}this.updateRevision(e=>e.setMainParent(s)),this.authorizeAs(n.uid);const a=this.state.conflicts,o=a&&a.isPublish;return await t.database.commit(this.revision.toCommitUpdate({space:r,draft:i&&o?i.merge({revisionPublishedAncestor:a.base.uid}):i})),this.revision}updateRevision(e){return this.updateState(t=>t.merge({revision:e(t.revision)}))}authorizeAs(e){return this.state.revision.assets.forEach(t=>{t.isUploaded||this.updateAsset(t.markAsModifiedBy(e))}),this.state.forEachDocument(t=>{let r=t.page,i=t.version;this.updatePage(i,r,t=>t.markAsModifiedBy(e))}),this.updateRevision(t=>t.authorizeAs(e)),this}setEditedDocument(e,t,r){return this.updateState(i=>i.merge({documents:i.documents.setDocument(e,t,r)}))}setEditedState(e,t,r){return this.updateState(i=>i.merge({documents:i.documents.setEditorState(e,t,r)}))}clearEditedDocument(e,t){return this.updateState(r=>r.merge({documents:r.documents.clearEditorState(e,t)}))}flushDocument(e,t){return this.defer(async r=>{let i=r.space,n=r.backend;if(!n||!i)return;const s=this.state.documents.getDocument(e,t);if(!s)return;let a=null;const o=t.stats?t.stats.updateFromDocument(s):m.k.createFromDocument(s);p.N(s)||(a=await n.documents.uploadDocument(i.uid,this.revision.uid,e.uid,t.uid,s)),this.updatePage(e,t,e=>e.merge({stats:o,documentURL:a})).clearEditedDocument(e,t)})}clearUnchangedDocuments(e){return this.state.forEachDocument(t=>{let r=t.page,n=t.version,s=t.document;const a=e({page:r,version:n});a&&Object(i.is)(a,s)&&this.clearEditedDocument(n,r)}),this}flushDocuments(){return this.state.forEachDocument(e=>{let t=e.page,r=e.version;this.flushDocument(r,t)}),this}setConflicts(e){return this.updateState(t=>t.merge({conflicts:e,documents:new b}))}markAsResolved(e,t,r){return this.updateState(i=>i.merge({conflicts:i.conflicts.markAsResolved(e,t,r)}))}toggleShowingOnlyConflicts(){return this.updateState(e=>{const t=e.conflicts;return t?e.merge({conflicts:t.merge({showingOnlyConflicts:!t.showingOnlyConflicts})}):e})}createAsset(e){return this.updateAsset(e)}updateAsset(e){return this.updateRevision(t=>t.merge({assets:t.assets.set(e.uid,e)}))}removeAsset(e){return this.updateRevision(t=>t.merge({assets:t.assets.delete(e.uid)}))}flushAsset(e){let t=e.uid;return this.defer(async e=>{let r=e.space,i=e.backend;if(!i||!r)return;const n=this.revision.assets.get(t);if(!n||n.isUploaded)return;const s=await i.assets.uploadAsset(r.uid,this.revision.uid,n);this.updateAsset(s)})}flushAssets(){return this.revision.assets.forEach(e=>{e.isUploaded||this.flushAsset(e)}),this}updateVersion(e,t){const r="string"==typeof e?e:e.uid;return this.updateRevision(e=>{const i=e.versions.get(r);if(!i)return e;const n=t(i);return e.merge({versions:e.versions.set(r,n)})})}updateVersionTitle(e,t){return this.updateVersion(e,e=>e.merge({title:t}))}updateVersionRef(e,t){return this.updateRevision(r=>{const i=r.versions,n=i.get(e.uid);if(!n)return r;const s=r.primaryVersionID==e.uid,a=n.updateRef(i,t),o=i.takeUntil(t=>t.uid==e.uid),c=i.skipUntil(t=>t.uid==e.uid).rest(),u=o.set(a.uid,a).concat(c);return r.merge({versions:u,primaryVersionID:s?a.uid:r.primaryVersionID})})}setVersion(e){return this.updateRevision(t=>t.merge({versions:t.versions.set(e.uid,e)}))}createVersion(e){return this.setVersion(e)}deleteVersion(e){return this.updateRevision(t=>{const r=t.versions.get(e.uid);if(t.primaryVersionID==e.uid||!r)return t;const i=t.merge({versions:t.versions.delete(e.uid)});return r.page.toFlatMap().forEach(e=>this.clearEditedDocument(r,e)),i})}markVersionAsPrimary(e){return this.updateRevision(t=>t.versions.has(e.uid)?t.merge({primaryVersionID:e.uid}):t)}moveVersion(e,t){return this.updateRevision(r=>{const n=r.versions.entrySeq().toList(),s=n.get(e),a=n.delete(e).insert(t,s);return r.merge({versions:Object(i.OrderedMap)(a)})})}updatePage(e,t,r){return this.updateVersion(e,e=>e.merge({page:e.page.updatePage(t,r)}))}setPage(e,t){return this.updatePage(e,t,e=>t)}updatePagePath(e,t,r){return this.updateVersion(e,e=>e.merge({page:e.page.updatePagePath(t,r)}))}updatePageTitle(e,t,r){return this.updateVersion(e,e=>e.merge({page:e.page.updatePageTitle(t,r)}))}updatePageDescription(e,t,r){return this.updateVersion(e,e=>e.merge({page:e.page.updatePageDescription(t,r)}))}insertPage(e,t,r,i){return this.updateVersion(e,e=>e.merge({page:e.page.insertPage(t,r,i)}))}removePage(e,t){const r=this.state.getPage(e,t);return r?(this.updateVersion(e,e=>e.merge({page:e.page.removePage(r)})),r.toFlatMap().forEach(t=>{this.clearEditedDocument(e,t)}),this):this}movePage(e,t,r,i){return this.updateVersion(e,e=>e.merge({page:e.page.movePage(t,r,i)}))}};var b=class extends(Object(i.Record)({states:Object(i.Map)()})){forEachDocument(e){this.states.forEach((t,r)=>{t.forEach((t,i)=>{e({versionID:r,pageID:i,document:t.document})})})}mapDocument(e){const t=this.states.map((t,r)=>t.mapEntries(t=>{let i=t[0],n=t[1];const s=e({versionID:r,pageID:i,document:n.document}),a=s.pageID,o=s.document;return[a,n.merge({document:o})]}));return this.merge({states:t})}getEditorState(e,t){const r=Object(m.N)(e),n=Object(m.N)(t);return this.states.get(r,Object(i.Map)()).get(n)}getDocument(e,t){const r=this.getEditorState(e,t);return r?r.document:null}setEditorState(e,t,r){const n=this.states,s=Object(m.N)(e),a=Object(m.N)(t),o=n.get(s,Object(i.Map)()).set(a,r);return this.merge({states:n.set(s,o)})}clearEditorState(e,t){const r=this.states,n=r.get(e.uid,Object(i.Map)()).delete(t.uid);return this.merge({states:r.set(e.uid,n)})}setDocument(e,t,r){return this.setEditorState(e,t,p.B(r,{normalize:!1}))}};class D extends(Object(i.Record)({base:new m.z,revision:new m.z,documents:new b,conflicts:null})){static createFromBase(e,t){return new D({base:e,revision:t||e.fork()})}change(){return new y(this)}getVersion(e){const t=Object(m.N)(e);return this.revision.versions.get(t)}assertVersion(e){const t=Object(m.N)(e),r=this.getVersion(t);if(!r)throw new Error(`Could not find a version with key "${t}".`);return r}getPage(e,t){const r=Object(m.N)(t),i=this.getVersion(e);return i?i.page.getByID(r):null}assertPage(e,t){const r=Object(m.N)(e),i=Object(m.N)(t),n=this.getPage(r,i);if(!n)throw new Error(`Could not find a page with key "${i}" in "${r}".`);return n}compare(){const e=this.base,t=this.revision,r=this.documents;let i=0;const n=t.merge({versions:t.versions.map(e=>e.merge({page:e.page.mapPages(t=>{return r.states.hasIn([e.uid,t.uid])?(i+=1,t.merge({documentURL:`temporary-document-url-${i}`})):t})}))});return s(e,n)}forEachDocument(e){const t=this.revision;this.documents.forEachDocument(r=>{let i=r.pageID,n=r.versionID,s=r.document;const a=t.versions.get(n);if(!a)return;const o=a.page.getByID(i);o&&e({page:o,version:a,document:s})})}}var v=D;r.d(t,"b",function(){return v}),r.d(t,"a",function(){return b});const w={compare:s,merge:l,walk:c};t.c=w},24:function(e,t,r){"use strict";var i=r(262),n=r(108),s=(r(80),r(107)),a=r(263),o=(r(93),r(199)),c=r(200),u=r(85),l=r(412),d=r(264),h=r(265),p=r(4);class m extends(Object(p.Record)({objectID:"",displayName:"",photoURL:""})){static get INDEX(){return"users"}static createFromUser(e){return new m({objectID:e.uid,displayName:e.displayName,photoURL:e.photoURL})}get index(){return m.INDEX}static deserialize(e){return new m(e)}serialize(){return{objectID:this.objectID,displayName:this.displayName,photoURL:this.photoURL}}}var g=m,f=r(413);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b extends(Object(p.Record)({pageID:"",spaceID:"",versionID:"",sectionID:"",title:"",content:"",hash:"",highlightedTitle:"",highlightedContent:"",searchScore:0})){static get INDEX(){return"sections"}static createFromPageAndSection(e,t){const r=e.pageID,i=e.spaceID,n=e.versionID,s=t.title,a=t.id,o=t.key;return new b({pageID:r,spaceID:i,versionID:n,title:s,sectionID:o,content:t.text,hash:a})}static getVersionFilter(e){return`version/${e}`}static getPageFilter(e){return`page/${e}`}get objectID(){return`${this.spaceID}/${this.versionID}/${this.pageID}/${this.sectionID}`}get indexTags(){const e=this.spaceID,t=this.versionID,r=this.pageID;return[e,b.getVersionFilter(t),b.getPageFilter(r)]}get index(){return b.INDEX}static deserialize(e){const t=e.objectID,r=e._highlightResult,i=e._rankingInfo,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,["objectID","_highlightResult","_rankingInfo"]),s=t.split("/"),a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){y(e,t,r[t])})}return e}({spaceID:s[0],versionID:s[1],pageID:s[2],sectionID:s[3]},n);return r&&(a.highlightedTitle=r.title.value,a.highlightedContent=r.content.value),i&&(a.searchScore=i.userScore),new b(a)}serialize(){const e=this.objectID,t=this.title,r=this.content,i=this.hash;return{objectID:e,title:t,content:r.slice(0,b.CONTENT_SIZE_LIMIT),hash:i,_tags:this.indexTags}}}y(b,"CONTENT_SIZE_LIMIT",8e3);var D=b,v=(r(414),r(170)),w=r(129),I=r(266),O=(r(125),r(171)),P=(r(246),r(53)),j=r(83),A=r(86),N=r(244),E=r(201),k=r(124),S=r(150),R=r(245),z=r(172),q=r(11);function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){T(e,t,r[t])})}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class U extends(Object(q.b)("userPageRating",{userID:"",rating:0,createdAt:new Date,versionID:"",revisionID:""})){get createdBy(){return this.userID}static queryByID(e){let t=e.spaceID,r=e.pageID,i=e.userID;return this.query(["spaces",t,"userPageRatings",r]).doc(i)}query(e){let t=e.spaceID,r=e.pageID;return U.queryByID({spaceID:t,pageID:r,userID:this.userID})}static create(e){return void 0===e&&(e={}),e instanceof U?e:new U(B({},e,{createdAt:new Date(e.createdAt||Date.now())}))}static deserialize(e){return new U(B({},e,{createdAt:new Date(e.createdAt)}))}serialize(){return{userID:this.userID,rating:this.rating,versionID:this.versionID,revisionID:this.revisionID,createdAt:this.createdAt.getTime()}}get displayRating(){return z.a.getDisplayRatingFromRating(this.rating)}}var K=U,L=r(149),V=r(198);function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){M(e,t,r[t])})}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class F extends(Object(p.Record)({token:"",channelName:"",channelID:"",webhookURL:"",createdAt:new Date})){static create(e){return void 0===e&&(e={}),F.deserialize($({},e,{createdAt:new Date(e.createdAt||Date.now())}))}static deserialize(e){return new F($({},e,{createdAt:new Date(e.createdAt)}))}serialize(){return{token:this.token,channelName:this.channelName,channelID:this.channelID,webhookURL:this.webhookURL,createdAt:this.createdAt.getTime()}}}var _=F;function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){C(e,t,r[t])})}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class H extends(Object(q.b)("slackIntegration",{spaceID:"",token:"",teamID:"",teamName:"",channels:Object(p.OrderedMap)(),createdAt:new Date})){static queryBySpace(e){return this.query(["spaces",e,"slack"])}static queryByTeam(e){let t=e.spaceID,r=e.teamID;return this.queryBySpace(t).doc(r)}static queryByRootTeam(e){return this.query(["slack",e])}query(){return H.queryByTeam({spaceID:this.spaceID,teamID:this.teamID})}rootQuery(){return H.queryByRootTeam(this.teamID).doc(this.spaceID)}toCreateUpdate(){return(new q.c).set(this.query(),this).set(this.rootQuery(),this)}toRemoveUpdate(){return(new q.c).delete(this.query()).delete(H.query(["slack",this.teamID]).doc(this.spaceID))}removeChannel(e){return this.merge({channels:this.channels.delete(e.channelID)})}static create(e){return void 0===e&&(e={}),new H(x({},e,{channels:Object(p.OrderedMap)(e.channels||{}).map(e=>_.create(e)),createdAt:new Date(e.createdAt||Date.now())}))}static deserialize(e){return new H(x({},e,{channels:Object(p.OrderedMap)(e.channels||{}).map(e=>_.deserialize(e)),createdAt:new Date(e.createdAt)}))}serialize(){return{spaceID:this.spaceID,token:this.token,teamID:this.teamID,teamName:this.teamName,channels:this.channels.map(e=>e.serialize()).toObject(),createdAt:this.createdAt.getTime()}}}var G=H,Y=r(267),Q=r(268),J=(r(202),r(247),r(269)),X=r(270);r(173);function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){W(e,t,r[t])})}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ee extends(Object(q.b)("team",{uid:"",name:"",createdAt:new Date,updatedAt:new Date,spacesPermission:Object(p.Map)()})){static queryByID(e){let t=e.orgID,r=e.teamID;return this.query(["orgs",t,"teams"]).doc(r)}static queryByOrg(e){return this.query(["orgs",e,"teams"])}static queryCoreTeam(e){return this.query(["orgs",e,"teams"]).doc("core")}query(e){return ee.queryByID({orgID:e,teamID:this.uid})}static create(e){return void 0===e&&(e={}),e instanceof ee?e:new ee(Z({},e,{uid:e.uid||Object(q.f)(),createdAt:new Date(e.createdAt||Date.now()),updatedAt:new Date(e.updatedAt||Date.now())}))}static createCoreTeam(){return ee.create({uid:"core",name:"Core team"})}toCreateUpdate(e){const t=new q.c;return t.set(this.query(e),this).merge(k.a.getNewInvitesUpdate(e,this.uid)),t}static deserialize(e){return new ee(Z({},e,{spacesPermission:Object(p.Map)(e.spacesPermission),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}serialize(){const e=this.uid,t=this.name,r=this.spacesPermission,i=this.createdAt,n=this.updatedAt;return{uid:e,name:t,spacesPermission:r.toJS(),createdAt:i.getTime(),updatedAt:n.getTime()}}}var te=ee,re=r(148),ie=r(271);r(36);r.d(t,"N",function(){return ae}),r.d(t,"O",function(){return se}),r.d(t,"j",function(){return q.d}),r.d(t,"h",function(){return q.a}),r.d(t,"P",function(){return q.f}),r.d(t,"t",function(){return i.a}),r.d(t,"s",function(){return n.a}),r.d(t,"D",function(){return S.a}),r.d(t,"I",function(){return u.b}),r.d(t,"z",function(){return c.a}),r.d(t,"l",function(){return o.a}),r.d(t,"q",function(){return v.a}),r.d(t,"w",function(){return z.a}),r.d(t,"K",function(){return K}),r.d(t,"n",function(){return I.a}),r.d(t,"o",function(){return O.a}),r.d(t,"e",function(){return j.a}),r.d(t,"F",function(){return A.a}),r.d(t,"i",function(){return P.a}),r.d(t,"p",function(){return k.a}),r.d(t,"J",function(){return w.a}),r.d(t,"x",function(){return a.a}),r.d(t,"v",function(){return s.a}),r.d(t,"d",function(){return l.a}),r.d(t,"L",function(){return g}),r.d(t,"y",function(){return f.a}),r.d(t,"B",function(){return D}),r.d(t,"c",function(){return N.a}),r.d(t,"g",function(){return E.a}),r.d(t,"E",function(){return R.a}),r.d(t,"M",function(){return L.a}),r.d(t,"k",function(){return V.a}),r.d(t,"C",function(){return G}),r.d(t,"A",function(){return Y.a}),r.d(t,"f",function(){return Q.a}),r.d(t,"u",function(){return J.a}),r.d(t,"r",function(){return X.a}),r.d(t,"G",function(){return te}),r.d(t,"H",function(){return re.a}),r.d(t,"m",function(){return ie.a}),r.d(t,"a",function(){return d.a}),r.d(t,"b",function(){return h.a});const ne={[i.a.KIND]:i.a,[u.b.KIND]:u.b,[c.a.KIND]:c.a,[o.a.KIND]:o.a,[n.a.KIND]:n.a,[v.a.KIND]:v.a,[w.a.KIND]:w.a,[K.KIND]:K,[z.a.KIND]:z.a,[I.a.KIND]:I.a,[O.a.KIND]:O.a,[j.a.KIND]:j.a,[A.a.KIND]:A.a,[P.a.KIND]:P.a,[k.a.KIND]:k.a,[S.a.KIND]:S.a,[a.a.KIND]:a.a,[G.KIND]:G,[Y.a.KIND]:Y.a,[Q.a.KIND]:Q.a,[J.a.KIND]:J.a,[X.a.KIND]:X.a,[te.KIND]:te,[ie.a.KIND]:ie.a,[d.a.KIND]:d.a,[h.a.KIND]:h.a};function se(e,t){const r=ne[e];if(!r)throw new Error(`Model with kind "${e}" does not exist`);return r.deserialize(t)}function ae(e){return"string"==typeof e?e:e.uid}},245:function(e,t,r){"use strict";var i=r(4),n=r(119),s=r.n(n),a=r(672),o=r.n(a);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends(Object(i.Record)({title:"",href:null,pageID:null})){get id(){return JSON.stringify(this.serialize())}get isValid(){return Boolean(this.title&&(this.isValidHref||this.pageID))}get isValidHref(){const e=this.href;return!(!e||e.length>=512)&&(/^https?:\/\//.test(e)&&s()(e)||/^mailto:/.test(e)&&o()(e.replace("mailto:","")))}updateTitle(e){return this.merge({title:e})}updateHref(e){return this.merge({href:e,pageID:null})}updatePageID(e){return this.merge({pageID:e,href:null})}static deserialize(e){return new u(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){c(e,t,r[t])})}return e}({},e))}serialize(){return{title:this.title,href:this.href,pageID:this.pageID}}}t.a=u},80:function(e,t,r){"use strict";var i=r(4);class n extends(Object(i.Record)({members:"below",privateSpaces:"below",publicSpaces:"below"})){static getLimitStatus(e,t){return e>t?"exceeded":e===t?"reached":"below"}static deserialize(e){return new n(e)}serialize(){return{members:this.members,privateSpaces:this.privateSpaces,publicSpaces:this.publicSpaces}}some(e){return this.toSeq().some(e)}}t.a=n},85:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(11),n=r(83),s=r(169),a=r(80);function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){c(e,t,r[t])})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return void 0===e&&(e={}),Object(s.a)("user",o({},e,{kind:"user",displayName:"",photoURL:null,deletedAt:null}))}class l extends(u({})){get firstName(){return this.displayName.split(" ")[0]}get lastName(){return this.displayName.split(" ").slice(1).join(" ")}get shortDisplayName(){const e=this.firstName,t=this.lastName;return t?`${e} ${t[0]}.`:e}static create(e){return void 0===e&&(e={}),e instanceof l?e:new l(o({},e,{uid:e.uid||Object(i.f)(),displayName:e.displayName?l.normalizeName(e.displayName):""}))}static deserialize(e){return l.create(o({},e,{deletedAt:e.deletedAt?new Date(e.deletedAt):null,usageStatuses:e.usageStatuses?a.a.deserialize(e.usageStatuses):null}))}static normalizeName(e){return e.slice(0,l.NAME_MAX_LENGTH)}asDeleted(){return this.merge({baseDomain:"",displayName:"Ghost",photoURL:null,deletedAt:new Date})}toCreateUpdate(){const e=new i.c;if(e.set(this.query(),this),this.baseDomain){const t=n.a.createFromOwner(this);e.set(t.query(),t)}return e}toProfileUpdate(){const e=new i.c;e.set(this.query(),this);const t=n.a.createFromOwner(this);return e.set(t.query(),t),e}serialize(){return{kind:"user",uid:this.uid,baseDomain:this.baseDomain,displayName:this.displayName,photoURL:this.photoURL||null,deletedAt:this.deletedAt?this.deletedAt.getTime():null,usageStatuses:this.usageStatuses?this.usageStatuses.serialize():null}}}c(l,"NAME_MAX_LENGTH",64),t.b=l},86:function(e,t,r){"use strict";var i=r(11);class n extends(Object(i.b)("spaceOwnership",{spaceID:"",baseName:"",deprecated:!1})){static queryAllByOwner(e){return this.query(["orgs",e,"spaces"])}static queryByOwner(e){return this.queryAllByOwner(e).where("deprecated",!1,"<=")}static queryByName(e){let t=e.ownerID,r=e.baseName;return this.queryAllByOwner(t).doc(Object(i.e)(r))}query(e){return n.queryByName({ownerID:e,baseName:this.baseName})}static createFromSpace(e){return new n({spaceID:e.uid,baseName:e.baseName})}static deserialize(e){return new n(e)}serialize(){return{spaceID:this.spaceID,baseName:this.baseName,deprecated:this.deprecated}}}t.a=n}}]);