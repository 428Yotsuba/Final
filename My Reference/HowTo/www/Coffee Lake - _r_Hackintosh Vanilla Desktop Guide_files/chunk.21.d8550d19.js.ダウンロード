(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[21],{101:function(e,t,n){"use strict";var o=n(27),r=n(77);const l=r.e||r.f,s=Object(o.isKeyHotkey)("mod+b"),i=Object(o.isKeyHotkey)("mod+i"),c=Object(o.isKeyHotkey)("enter"),a=Object(o.isKeyHotkey)("shift+enter"),u=e=>c(e)||a(e),d=Object(o.isKeyHotkey)("backspace"),y=Object(o.isKeyHotkey)("shift+backspace"),f=Object(o.isKeyHotkey)("delete"),k=Object(o.isKeyHotkey)("shift+delete"),p=Object(o.isKeyHotkey)("ctrl+h"),b=Object(o.isKeyHotkey)("ctrl+d"),m=e=>(e=>d(e)||y(e))(e)||l&&p(e),g=e=>(e=>f(e)||k(e))(e)||l&&b(e),h=Object(o.isKeyHotkey)("ctrl+k"),w=e=>l&&(e=>Object(o.isKeyHotkey)("cmd+shift+backspace",e)||Object(o.isKeyHotkey)("cmd+backspace",e))(e),B=e=>l&&h(e),K=Object(o.isKeyHotkey)("ctrl+backspace"),v=Object(o.isKeyHotkey)("ctrl+delete"),C=e=>l?(e=>Object(o.isKeyHotkey)("shift+option+backspace",e)||Object(o.isKeyHotkey)("option+backspace",e))(e):K(e),O=e=>l?(e=>Object(o.isKeyHotkey)("shift+option+delete",e)||Object(o.isKeyHotkey)("option+delete",e))(e):v(e),E=Object(o.isKeyHotkey)("shift+right"),T=Object(o.isKeyHotkey)("shift+left"),x=Object(o.isKeyHotkey)("right"),I=Object(o.isKeyHotkey)("left"),H=Object(o.isKeyHotkey)("option+up"),j=Object(o.isKeyHotkey)("option+down"),R=Object(o.isKeyHotkey)("option+shift+up"),L=Object(o.isKeyHotkey)("option+shift+down"),A=Object(o.isKeyHotkey)("mod+z"),z=Object(o.isKeyHotkey)("mod+shift+z"),D=Object(o.isKeyHotkey)("mod+y"),N=e=>l?z(e):D(e),F=Object(o.isKeyHotkey)("ctrl+t");var _={isBold:s,isCollapseCharBackward:e=>I(e)&&!T(e),isCollapseCharForward:e=>x(e)&&!E(e),isCollapseLineBackward:e=>l&&H(e),isCollapseLineForward:e=>l&&j(e),isComposing:e=>"ArrowDown"==e.key||"ArrowLeft"==e.key||"ArrowRight"==e.key||"ArrowUp"==e.key||"Backspace"==e.key||"Enter"==e.key,isContentEditable:e=>s(e)||m(e)||g(e)||w(e)||B(e)||C(e)||O(e)||i(e)||N(e)||u(e)||(e=>l&&F(e))(e)||A(e),isDeleteCharBackward:m,isDeleteCharForward:g,isDeleteLineBackward:w,isDeleteLineForward:B,isDeleteWordBackward:C,isDeleteWordForward:O,isExtendCharBackward:T,isExtendCharForward:E,isExtendLineBackward:e=>l&&R(e),isExtendLineForward:e=>l&&L(e),isItalic:i,isRedo:N,isSplitBlock:u,isUndo:A};t.a=_},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(12),l=n(19),s=n(145);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends(o.Record({typeTable:"table",typeRow:"table_row",typeCell:"table_cell",typeContent:"paragraph",exitBlockType:"paragraph"})){constructor(){super(...arguments),i(this,"isCell",e=>"block"==e.object&&e.type==this.typeCell)}}function a(e,t){return r.Block.create({type:e.typeCell,nodes:t||[u(e)]})}function u(e){return r.Block.create({type:e.typeContent,nodes:[r.Text.create()]})}function d(e,t,n){const l=o.Range(0,t).map(t=>a(e,n?n(t):void 0)).toList();return r.Block.create({type:e.typeRow,nodes:l})}function y(e,t,n,l){const s=o.Range(0,n).map(n=>d(e,t,l?l.bind(null,n):void 0)).toList();return r.Block.create({type:e.typeTable,nodes:s})}class f extends(o.Record({tableBlock:null,rowBlock:null,cellBlock:null,contentBlock:null})){static create(e,t,n){const o=t.getDescendant(n),r=t.getAncestors(n).push(o),l=r.findLast(t=>t.type===e.typeTable),s=r.findLast(t=>t.type===e.typeRow),i=r.findLast(t=>t.type===e.typeCell),c=r.skipUntil(e=>e===i).skip(1).first();return new f({tableBlock:l,rowBlock:s,cellBlock:i,contentBlock:c})}get table(){if(!this.tableBlock)throw new Error("Not in a table");return this.tableBlock}get row(){if(!this.rowBlock)throw new Error("Not in a row");return this.rowBlock}get cell(){if(!this.cellBlock)throw new Error("Not in a cell");return this.cellBlock}isInCell(){return Boolean(this.cellBlock)}isInRow(){return Boolean(this.rowBlock)}isInTable(){return Boolean(this.tableBlock)}isTopOfCell(){const e=this.contentBlock,t=this.cellBlock;return!(!e||!t)&&0==t.nodes.findIndex(t=>t.key==e.key)}isBottomOfCell(){const e=this.contentBlock,t=this.cellBlock;if(!e||!t)return!1;const n=t.nodes;return n.findIndex(t=>t.key==e.key)==n.size-1}getWidth(){return this.table.nodes.first().nodes.size}getHeight(){return this.table.nodes.size}getRowIndex(){const e=this.table,t=this.row;return e.nodes.findIndex(e=>e===t)}getColumnIndex(){const e=this.row,t=this.cell;return e.nodes.findIndex(e=>e===t)}isFirstCell(){return this.isFirstRow()&&this.isFirstColumn()}isLastCell(){return this.isLastRow()&&this.isLastColumn()}isFirstRow(){return 0===this.getRowIndex()}isLastRow(){return this.getRowIndex()===this.getHeight()-1}isFirstColumn(){return 0===this.getColumnIndex()}isLastColumn(){return this.getColumnIndex()===this.getWidth()-1}}function k(e,t){return f.create(e,t.document,t.startKey)}function p(e,t,n){return f.create(e,t,n)}function b(e,t,n){const o=n.startKey,r=n.endKey,l=f.create(e,t,o),s=f.create(e,t,r);return!(!l.isInTable()||!s.isInTable())&&l.table===s.table}function m(e,t){return!!t.selection.startKey&&b(e,t.document,t.selection)}function g(e,t){if(!t.selection.startKey)return!1;const n=t.startKey,o=t.endKey,r=f.create(e,t.document,n),l=f.create(e,t.document,o);return!r.isInTable()&&!l.isInTable()}function h(e,t,n){return t.nodes.forEach((e,t)=>e.nodes.forEach((e,o)=>n(e,t,o)))}function w(e,t,n){return t.nodes.get(n).nodes}function B(e,t,n){return t.nodes.map(e=>e.nodes.get(n))}function K(e,t){if(!m(e,t))return;const n=t.selection,r=t.document,l=f.create(e,r,n.startKey),s=f.create(e,r,n.endKey),i=t.fragment;if(s.cell===l.cell){const t=i.getAncestors(i.getFirstText().key).findLast(t=>t.type===e.typeCell);return i.merge({nodes:t.nodes})}const c=i.nodes.first(),u=c.nodes.first(),d=c.nodes.last(),y=o.List(Array(l.getColumnIndex()).fill()).map(()=>a(e)),k=o.List(Array(s.getWidth()-(s.getColumnIndex()+1)).fill()).map(()=>a(e));return i.mapDescendants(e=>e===u?u.merge({nodes:y.concat(u.nodes)}):e===d?d.merge({nodes:d.nodes.concat(k)}):e)}function v(e,t,n){void 0===n&&(n={});const o=n,r=o.columns,l=void 0===r?2:r,s=o.rows,i=void 0===s?2:s,c=o.getCellContent;if(!t.value.selection.startKey)return t;const a=y(e,l,i,c);return t.insertBlock(a,n)}function C(e,t,n){void 0===n&&(n={});const o=t.value,r=o.startKey,l=f.create(e,o.document,r),s=l.table,i=n,c=i.at,a=void 0===c?l.getRowIndex()+1:c,u=i.getRow,y=(void 0===u?t=>d(e,t):u)(s.nodes.get(0).nodes.size);return t.insertNodeByKey(s.key,a,y,n).collapseToEndOf(y.nodes.get(l.getColumnIndex()))}function O(e,t,n,o){const r=t.value,l=r.startKey,s=f.create(e,r.document,l);if(!s.isInCell())throw new Error("moveSelection can only be applied from within a cell");const i=s.table.nodes.get(o).nodes.get(n);return t.collapseToStartOf(i)}function E(e,t,n){void 0===n&&(n={});const o=t.getFlag("normalize",n),r=t.value,l=r.startKey,s=f.create(e,r.document,l),i=s.table,c=n,u=c.at,d=void 0===u?s.getColumnIndex()+1:u,y=c.getCell,k=void 0===y?()=>a(e):y;return i.nodes.forEach((e,n)=>{const o=k(d,n);t.insertNodeByKey(e.key,d,o,{normalize:!1})}),O(e,t,s.getColumnIndex()+1,s.getRowIndex()),o&&t.normalizeNodeByKey(i.key),t}function T(e,t,n,o,r){void 0===r&&(r={});const l=t.getFlag("normalize",r),s=o.nodes.first();if(1!==o.nodes.size||!s||s.type!==e.typeTable)throw new Error("Expected to insert a fragment containing one table");const i=t.value,c=f.create(e,i.document,n.startKey),a=s.nodes,u=a.size,d=a.first().nodes.size+c.getColumnIndex()-c.getWidth(),y=u+c.getRowIndex()-c.getHeight();d>0&&Array(d).fill().forEach(()=>{E(e,t,{at:c.getWidth(),normalize:!1})}),y>0&&Array(y).fill().forEach(()=>{C(e,t,{at:c.getHeight(),normalize:!1})});const k=t.value.document.getDescendant(c.table.key);a.forEach((e,n)=>{e.nodes.forEach((e,o)=>{const r=k.nodes.get(c.getRowIndex()+n).nodes.get(c.getColumnIndex()+o);t.replaceNodeByKey(r.key,e,{normalize:!1})})});const p=a.last().nodes.last();return t.collapseToEndOf(p),l&&t.normalizeNodeByKey(k.key),t}function x(e,t,n,o){void 0===o&&(o={});const l=t.getFlag("normalize",o),s=r.Block.create({type:e.typeContent}),i=n.nodes;return t.insertNodeByKey(n.key,0,s,{normalize:!1}),i.forEach(e=>{t.removeNodeByKey(e.key,{normalize:!1})}),l&&t.normalizeNodeByKey(n.key),t}function I(e,t,n,o){void 0===o&&(o={});const r=t.value,l=f.create(e,r.document,n);return l.getHeight()>1?t.removeNodeByKey(n,o):l.row.nodes.forEach(n=>{n.nodes.forEach(r=>x(e,t,n,o))}),t}function H(e,t,n){void 0===n&&(n={});const o=t.value,r=o.startKey,l=f.create(e,o.document,r),s=n.at;let i;return I(e,t,i=void 0===s?l.row.key:l.table.nodes.get(s).key,n)}function j(e,t,n,o){void 0===o&&(o={});const r=t.getFlag("normalize",o),l=t.value,s=f.create(e,l.document,n),i=s.table,c=s.getColumnIndex(),a=i.nodes;return s.getWidth()>1?(a.forEach(e=>{const n=e.nodes.get(c);t.removeNodeByKey(n.key,{normalize:!1})}),r&&t.normalizeNodeByKey(i.key)):a.forEach(n=>{n.nodes.forEach(n=>{n.nodes.forEach(r=>x(e,t,n,o))})}),t}function R(e,t,n){void 0===n&&(n={});const o=t.value,r=o.startKey,l=n.at,s=f.create(e,o.document,r);let i;return j(e,t,i=void 0===l?s.cell.key:s.row.nodes.get(l).key,n)}function L(e,t,n,o){void 0===o&&(o={});const l=t.value,s=f.create(e,l.document,n).table,i=t.value.document;let c=null,a=!1;const u=t.value.document.getNextBlock(s.key);if(u)c=u;else{const n=t.value.document.getPreviousBlock(s.key);if(n)c=n,a=!0;else if(e.exitBlockType){c=r.Block.create({type:e.exitBlockType,nodes:[r.Text.create("")]});const n=i.getParent(s.key),l=n.nodes.indexOf(s)+1;t.insertNodeByKey(n.key,l,c,o)}}return t.removeNodeByKey(s.key,o),c?(a?t.collapseToEndOf(c).focus():t.collapseToStartOf(c).focus(),t):t}function A(e,t,n){return void 0===n&&(n={}),L(e,t,t.value.startKey,n)}function z(e,t,n,o){const r=t.value,l=r.startKey,s=f.create(e,r.document,l);if(!s.isInCell())throw new Error("moveSelectionBy can only be applied in a cell");const i=s.getRowIndex(),c=function(e,t,n,o){e<0&&(e=n-1,t-=1);if(t<0)return[-1,-1];e>=n&&(e=0,t+=1);if(t>=o)return[-1,-1];return[e,t]}(n+s.getColumnIndex(),o+i,s.getWidth(),s.getHeight()),a=c[0],u=c[1],d=o<0;if(-1===a)return t;const y=s.table.nodes.get(u).nodes.get(a);return d?t.collapseToEndOf(y):t.collapseToStartOf(y),t}function D(e){return{blocks:{[e.typeTable]:{nodes:[{types:[e.typeRow]}]},[e.typeRow]:{nodes:[{types:[e.typeCell]}],parent:{types:[e.typeTable]},normalize(t,n,o){switch(n){case l.CHILD_TYPE_INVALID:return function(e,t,n){const o=a(e,[]),r=n.node.nodes.findIndex(e=>e.key===n.child.key);t.insertNodeByKey(n.node.key,r,o,{normalize:!1}),t.moveNodeByKey(n.child.key,o.key,0,{normalize:!1})}(e,t,o);case l.PARENT_TYPE_INVALID:return function(e,t,n){return t.wrapBlockByKey(n.node.key,e.typeTable)}(e,t,o);default:return}}},[e.typeCell]:{nodes:[{objects:["block"]}],parent:{types:[e.typeRow]},normalize(t,n,o){switch(n){case l.CHILD_OBJECT_INVALID:return function(e,t,n){const o=r.Block.create({type:e.typeContent});t.insertNodeByKey(n.node.key,0,o,{normalize:!1}),n.node.nodes.filter(e=>"block"!==e.object).forEach((e,n)=>{t.moveNodeByKey(e.key,o.key,n,{normalize:!1})})}(e,t,o);case l.PARENT_TYPE_INVALID:return function(e,t,n){return t.wrapBlockByKey(n.node.key,e.typeRow)}(e,t,o);default:return}}}}}}function N(e){const t=t=>t.type===e.typeRow,n=t=>t.type===e.typeCell,o=e=>e.nodes.count(n);return n=>{if(n.type!==e.typeTable)return;const r=n.nodes.filter(t),l=Math.max(1,r.map(o).max()),s=r.filter(e=>o(e)<l);return s.isEmpty()?void 0:t=>{s.forEach(n=>{const o=l-n.nodes.size;Array.from({length:o}).map(()=>a(e)).forEach(e=>t.insertNodeByKey(n.key,n.nodes.size,e,{normalize:!1}))})}}}function F(e,t){return function(n){const o=n.value;if(!m(e,o))return n;for(var r=arguments.length,l=new Array(r>1?r-1:0),s=1;s<r;s++)l[s-1]=arguments[s];return t(...[e,n].concat(l))}}const _="Enter",S="Tab",P="Backspace",W="ArrowDown",U="ArrowUp";function V(e,t,n,o){if(!m(e,n.value))return;const l=[t,n,o,e];switch(t.key){case _:return t.metaKey&&e.exitBlockType?function(e,t,n,o){const l=t.value;if(!l.isCollapsed)return;e.preventDefault();const s=r.Block.create({type:o.exitBlockType,nodes:[r.Text.create("")]}),i=f.create(o,l.document,l.startKey).table,c=l.document.getParent(i.key),a=c.nodes.indexOf(i)+1;return t.insertNodeByKey(c.key,a,s).collapseToStartOf(s)}(...l):function(e,t,n,o){e.preventDefault();const r=t.value,l=r.selection,s=r.document,i=f.create(o,s,l.startKey);if(l.hasFocusAtStartOf(i.cell)||l.hasFocusAtEndOf(i.cell))return e.shiftKey?t.splitBlock().setBlocks({type:o.typeContent,data:{}}):C(o,t)}(...l);case S:return function(e,t,n,o){e.preventDefault();const r=t.value,l=e.shiftKey?-1:1,s=r.startKey,i=r.selection,c=f.create(o,r.document,s);return c.isFirstCell()&&-1===l?C(o,t,{at:0}):c.isLastCell()&&1===l&&C(o,t),t.select(i),z(o,t,l,0),function(e){const t=e.value.startBlock;return e.moveOffsetsTo(0).extend(t.text.length)}(t)}(...l);case P:return function(e,t,n,o){const r=t.value,l=r.startBlock,s=r.endBlock,i=r.selection,c=r.document,a=c.getClosest(l.key,o.isCell),u=c.getClosest(s.key,o.isCell);if(0===a.nodes.findIndex(e=>e.key==l.key)&&i.isAtStartOf(l)){if(l.isVoid)return;return e.preventDefault(),t}if(a===u)return;e.preventDefault();const d=r.blocks.map(e=>e.type===o.typeCell?e:c.getClosest(e.key,e=>e.type===o.typeCell)).toSet(),y=r.selection.collapseToStart().isAtEndOf(d.first()),f=r.selection.collapseToEnd().isAtStartOf(d.last());let k=d;y&&(k=k.rest()),f&&(k=k.butLast()),k.forEach(e=>x(o,t,e));const p=t.value.document.getDescendant(k.first().key);return t.collapseToStartOf(p)}(...l);case W:case U:return function(e,t,n,o){const r=t.value,l="ArrowUp"===e.key?-1:1,s=f.create(o,r.document,r.startKey);if(!(s.isFirstRow()&&-1===l||s.isLastRow()&&1===l)&&(-1!==l||s.isTopOfCell())&&(1!==l||s.isBottomOfCell()))return e.preventDefault(),z(o,t,0,l),t}(...l);default:return}}function Y(e,t,n,o){const r=K(e,n.value);return r?(s.cloneFragment(t,n.value,r),!0):null}function M(e,t,n,o){if(!m(e,n.value))return;const l=s.getEventTransfer(t),i=l.type,c=l.fragment;return"fragment"!=i||c.nodes.isEmpty()?null:b(e,c,r.Range.create({anchorKey:c.getFirstText().key,focusKey:c.getLastText().key}))?T(e,n,n.value.selection,c):null}t.default=function(e){const t=new c(e||{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){i(e,t,n[t])})}return e}({},function(e){const t=new c(e);return{schema:D(t),validateNode:N(t),utils:{isSelectionInTable:m.bind(null,t),isSelectionOutOfTable:g.bind(null,t),getPosition:k.bind(null,t),getPositionByKey:p.bind(null,t),createCell:a.bind(null,t),createRow:d.bind(null,t),createTable:y.bind(null,t),forEachCells:h.bind(null,t),getCellsAtRow:w.bind(null,t),getCellsAtColumn:B.bind(null,t),getCopiedFragment:K.bind(null,t)},changes:{insertTable:v.bind(null,t),insertTableFragmentAtRange:T.bind(null,t),clearCell:x.bind(null,t),removeRowByKey:I.bind(null,t),removeColumnByKey:j.bind(null,t),removeTableByKey:L.bind(null,t),insertRow:F(t,C),removeRow:F(t,H),insertColumn:F(t,E),removeColumn:F(t,R),removeTable:F(t,A),moveSelection:F(t,O),moveSelectionBy:F(t,z)}}}(t),{onKeyDown:V.bind(null,t),onCopy:Y.bind(null,t),onPaste:M.bind(null,t)})}}}]);