(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[45],{145:function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",function(){return Ae}),n.d(t,"cloneFragment",function(){return he}),n.d(t,"findDOMNode",function(){return W}),n.d(t,"findDOMRange",function(){return H}),n.d(t,"findNode",function(){return ge}),n.d(t,"findRange",function(){return ne}),n.d(t,"getEventRange",function(){return me}),n.d(t,"getEventTransfer",function(){return xe}),n.d(t,"setEventTransfer",function(){return we}),n.d(t,"AfterPlugin",function(){return Se}),n.d(t,"BeforePlugin",function(){return Re});var o=n(279),r=n.n(o),s=n(1021),a=n.n(s),i=n(0),c=n.n(i),d=n(138),l=n(56),u=n.n(l),f=n(35),p=n(12),h=n(387),g=n(806),m=n(77),y=n(99),v=n.n(y),k=n(101),b=n(1022),C=n.n(b),E=n(807),x=n.n(E),D=n(4),O=n(808),w=n.n(O),T=n(59);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){S(e,t,n[t])})}return e}const B=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onPaste","onSelect"],A=[...B,"decorateNode","onChange","renderEditor","renderMark","renderNode","renderPlaceholder","renderPortal","schema","validateNode"],I=/^([\w-]+)(?::(\d+))?$/;var F={parse:function(e){const t=I.exec(e);if(!t)throw new Error(`Invalid offset key string "${e}".`);t[0];const n=t[1],o=t[2];return{key:n,index:parseInt(o,10)}},stringify:function(e){return`${e.key}:${e.index}`}};const P=r()("slate:leaves");class q extends c.a.Component{constructor(){var e;super(...arguments),e=this,S(this,"debug",function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];P(t,`${e.props.node.key}-${e.props.index}`,...o)})}shouldComponentUpdate(e){return e.index!=this.props.index||e.marks!=this.props.marks||e.text!=this.props.text||e.parent!=this.props.parent}render(){this.debug("render",this);const e=this.props,t=e.node,n=e.index,o=F.stringify({key:t.key,index:n});return c.a.createElement("span",{"data-offset-key":o},this.renderMarks())}renderMarks(){const e=this.props,t=e.marks,n=e.node,o=e.offset,r=e.text,s=e.editor,a=s.stack,i=this.renderText(),c={"data-slate-leaf":!0};return t.reduce((e,i)=>{const d={editor:s,mark:i,marks:t,node:n,offset:o,text:r,children:e,attributes:c};return a.find("renderMark",d)||e},i)}renderText(){const e=this.props,t=e.block,n=e.node,o=e.parent,r=e.text,s=e.index,a=e.leaves;if(o.isVoid)return c.a.createElement("span",{"data-slate-zero-width":"z"},"​");if(""===r&&"block"===o.object&&""===o.text&&1===o.nodes.size)return c.a.createElement("span",{"data-slate-zero-width":"n"},"​");if(""===r)return c.a.createElement("span",{"data-slate-zero-width":"z"},"​");const i=t.getLastText(),d=r.charAt(r.length-1),l=n===i,u=s===a.size-1;return l&&u&&"\n"===d?`${r}\n`:r}}S(q,"propTypes",{block:d.a.block.isRequired,editor:u.a.object.isRequired,index:u.a.number.isRequired,leaves:d.a.leaves.isRequired,marks:d.a.marks.isRequired,node:d.a.node.isRequired,offset:u.a.number.isRequired,parent:d.a.node.isRequired,text:u.a.string.isRequired});const L=r()("slate:node");class K extends c.a.Component{constructor(){var e;super(...arguments),e=this,S(this,"debug",function(t){const n=e.props.node.key;for(var o=arguments.length,r=new Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];L(t,`${n} (text)`,...r)}),S(this,"shouldComponentUpdate",e=>{const t=e,n=this.props;if(t.node!=n.node)return!0;if("block"==t.parent.object){const e=n.parent.nodes.last(),o=t.parent.nodes.last();if(n.node==e&&t.node!=o)return!0}return!t.decorations.equals(n.decorations)}),S(this,"renderLeaf",(e,t,n,o)=>{const r=this.props,s=r.block,a=r.node,i=r.parent,d=r.editor,l=t.text,u=t.marks;return c.a.createElement(q,{key:`${a.key}-${n}`,block:s,editor:d,index:n,marks:u,node:a,offset:o,parent:i,leaves:e,text:l})})}render(){this.debug("render",this);const e=this.props,t=e.decorations,n=e.editor,o=e.node,r=e.style,s=n.value.document,a=o.key,i=t.filter(e=>{const t=e.startKey,n=e.endKey;return t==a||n==a||t!==n&&(!!s.areDescendantsSorted(t,a)&&s.areDescendantsSorted(a,n))}),d=0===i.size?o.getLeaves():o.getLeaves(i);let l=0;const u=d.map((e,t)=>{const n=this.renderLeaf(d,e,t,l);return l+=e.text.length,n});return c.a.createElement("span",{"data-key":a,style:r},u)}}S(K,"propTypes",{block:d.a.block,decorations:x.a.list.isRequired,editor:u.a.object.isRequired,node:d.a.node.isRequired,parent:d.a.node.isRequired,style:u.a.object}),S(K,"defaultProps",{style:null});const j=r()("slate:void");class V extends c.a.Component{constructor(){var e;super(...arguments),e=this,S(this,"debug",function(t){const n=e.props.node,o=`${n.key} (${n.type})`;for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];j(t,`${o}`,...s)}),S(this,"renderText",()=>{const e=this.props,t=e.block,n=e.decorations,o=e.node,r=e.readOnly,s=e.editor,a=o.getFirstText();return c.a.createElement(K,{block:"block"==o.object?o:t,decorations:n,editor:s,key:a.key,node:a,parent:o,readOnly:r})})}render(){const e=this.props,t=e.children,n=e.node,o=e.readOnly,r="block"==n.object?"div":"span",s=c.a.createElement(r,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText()),a=c.a.createElement(r,{contentEditable:!!o&&null},t);return this.debug("render",{props:e}),c.a.createElement(r,{"data-slate-void":!0,"data-key":n.key,contentEditable:!(!o&&"block"!=n.object)&&null},o?null:s,a)}}function M(e,t){const n=Object(D.Set)().asMutable(),o=[];return function(e,t){if(t.isEmpty())return e.nodes.toArray().map((e,t)=>({child:e,index:t}));const n={[e.key]:0};let o=1;e.forEachDescendant(e=>{n[e.key]=o,o+=1});const r=e.nodes.toArray(),s=r.map((e,t)=>({child:e,index:t,order:n[e.key]}));return t.forEach(e=>{const t=n[e.startKey],a=void 0===t?0:function(e,t,n){const o=e.findIndex(e=>n<t[e.key]);if(o<=0)return 0;const r=e[o-1];return t[r.key]}(r,n,t);s.push({isRangeStart:!0,order:a-.5,decoration:e});const i=(n[e.endKey]||o)+.5;s.push({isRangeEnd:!0,order:i,decoration:e})}),s.sort(U)}(e,t).forEach(e=>{e.isRangeStart?n.add(e.decoration):e.isRangeEnd?n.remove(e.decoration):o.push(n.toList())}),o}function U(e,t){return e.order>t.order?1:e.order<t.order?-1:0}S(V,"propTypes",{block:d.a.block,children:u.a.any.isRequired,editor:u.a.object.isRequired,node:d.a.node.isRequired,parent:d.a.node.isRequired,readOnly:u.a.bool.isRequired});const $=r()("slate:node");class z extends c.a.Component{constructor(){var e;super(...arguments),e=this,S(this,"debug",function(t){const n=e.props.node,o=n.key,r=n.type;for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];$(t,`${o} (${r})`,...a)}),S(this,"shouldComponentUpdate",e=>{const t=this.props,n=t.editor.stack.find("shouldNodeComponentUpdate",t,e),o=e,r=t;if(null!=n){if(n)return!0;!1===n&&f.a.warn("Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return o.readOnly!=r.readOnly||(o.node!=r.node||(!(!o.isSelected&&!r.isSelected)||(!(!o.isFocused&&!r.isFocused)||!o.decorations.equals(r.decorations))))}),S(this,"renderNode",(e,t,n)=>{const o=this.props,r=o.block,s=o.editor,a=o.node,i=o.readOnly,d=o.isFocused,l="text"==e.object?K:z;return c.a.createElement(l,{block:"block"==a.object?a:r,decorations:n,editor:s,isSelected:t,isFocused:d&&t,key:e.key,node:e,parent:a,readOnly:i})})}render(){this.debug("render",this);const e=this.props,t=e.editor,n=e.isSelected,o=e.isFocused,r=e.node,s=e.decorations,a=e.parent,i=e.readOnly,d=t.value.selection,l=t.stack,u=r.getSelectionIndexes(d,n),f=s.concat(r.getDecorations(l)),p=M(r,f);let h=[];r.nodes.forEach((e,t)=>{const n=!!u&&u.start<=t&&t<u.end;h.push(this.renderNode(e,n,p[t]))});const g={"data-key":r.key};if("block"==r.object&&"block"!=r.nodes.first().object){"rtl"==r.getTextDirection()&&(g.dir="rtl")}const m={key:r.key,editor:t,isFocused:o,isSelected:n,node:r,parent:a,readOnly:i};let y=l.find("renderPlaceholder",m);y&&(y=c.a.cloneElement(y,{key:`${r.key}-placeholder`}),h=[y,...h]);const v=l.find("renderNode",R({},m,{attributes:g,children:h}));return r.isVoid?c.a.createElement(V,this.props,v):v}}function W(e,t){void 0===t&&(t=window),p.Node.isNode(e)&&(e=e.key);const n=t.document.querySelector(`[data-key="${e}"]`);return n||(f.a.warn(`Unable to find a DOM node for "${e}". This is often because of forgetting to add \`props.attributes\` to a custom component.`),null)}function _(e,t,n){void 0===n&&(n=window);const o=W(e,n);if(!o)return null;let r,s=0;const a=n.document.createNodeIterator(o,NodeFilter.SHOW_TEXT,()=>NodeFilter.FILTER_ACCEPT,!1);for(;r=a.nextNode();){const e=s+r.textContent.length;if(t<=e){const e=t-s;return{node:r,offset:e>=0?e:0}}s=e}return null}function H(e,t){void 0===t&&(t=window);const n=e.anchorKey,o=e.anchorOffset,r=e.focusKey,s=e.focusOffset,a=e.isBackward,i=e.isCollapsed,c=_(n,o,t),d=i?c:_(r,s,t);if(!c||!d)return null;const l=t.document.createRange(),u=a?d:c,f=a?c:d;return l.setStart(u.node,u.offset),l.setEnd(f.node,f.offset),l}S(z,"propTypes",{block:d.a.block,decorations:x.a.list.isRequired,editor:u.a.object.isRequired,isFocused:u.a.bool.isRequired,isSelected:u.a.bool.isRequired,node:d.a.node.isRequired,parent:d.a.node.isRequired,readOnly:u.a.bool.isRequired});const X="data-slate-zero-width",J=`[${X}]`,G="data-offset-key",Y=`[${G}]`,Q="[data-key]",Z="[data-slate-void]";function ee(e,t,n){const o=function(e,t){if(1==e.nodeType&&e.childNodes.length){const n=t==e.childNodes.length,o=n?"backward":"forward",r=n?t-1:t;for(e=te(e,r,o);1==e.nodeType&&e.childNodes.length;){const t=n?e.childNodes.length-1:0;e=te(e,t,o)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,t),r=o.node,s=o.offset,a=v()(e),i=r.parentNode;let c,d,l=i.closest(Y);if(l){const e=a.document.createRange(),t=l.closest(Q);e.setStart(t,0),e.setEnd(r,s),d=t,c=e.toString().length}else{const e=i.closest(Z);if(!e)return null;if(!(l=e.querySelector(Y)))return null;c=(d=l).textContent.length}c==d.textContent.length&&i.hasAttribute(X)&&c--;const u=l.getAttribute(G);if(!u)return null;const f=F.parse(u).key;return n.document.hasDescendant(f)?{key:f,offset:c}:null}function te(e,t,n){const o=e.childNodes;let r=o[t],s=t,a=!1,i=!1;for(;(8==r.nodeType||1==r.nodeType&&0==r.childNodes.length||1==r.nodeType&&"false"==r.getAttribute("contenteditable"))&&(!a||!i);)s>=o.length?(a=!0,s=t-1,n="backward"):s<0?(i=!0,s=t+1,n="forward"):(r=o[s],"forward"==n&&s++,"backward"==n&&s--);return r||null}function ne(e,t){const n=e.anchorNode||e.startContainer;if(!n)return null;const o=v()(n);(e instanceof o.Range||o.StaticRange&&e instanceof o.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});const r=e,s=r.anchorNode,a=r.anchorOffset,i=r.focusNode,c=r.focusOffset,d=r.isCollapsed,l=ee(s,a,t),u=d?l:ee(i,c,t);if(!l||!u)return null;if(m.d||m.b){const t=_(l.key,l.offset),n=_(u.key,u.offset);t&&n&&(e={anchorNode:t.node,anchorOffset:t.offset,focusNode:n.node,focusOffset:n.offset})}return p.Range.create({anchorKey:l.key,anchorOffset:l.offset,focusKey:u.key,focusOffset:u.offset,isBackward:!d&&w()(e),isFocused:!0})}const oe=["auto","overlay","scroll"],re=m.e&&!!window.navigator.userAgent.match(/os 11_/i);function se(e){if(re)return;if(!e.anchorNode)return;const t=v()(e.anchorNode),n=function(e,t){let n,o=e.parentNode;for(;!n&&o.parentNode;){const e=t.getComputedStyle(o).overflowY;if(oe.includes(e)){n=o;break}o=o.parentNode}return n||t.document.body}(e.anchorNode,t),o=n==t.document.body||n==t.document.documentElement,r=w()(e),s=e.getRangeAt(0).cloneRange();s.collapse(r);let a,i,c,d,l=s.getBoundingClientRect();m.g&&s.collapsed&&0==l.top&&0==l.height&&(0==s.startOffset?s.setEnd(s.endContainer,1):s.setStart(s.startContainer,s.startOffset-1),0==(l=s.getBoundingClientRect()).top&&0==l.height&&s.getClientRects().length&&(l=s.getClientRects()[0]));let u=0,f=0,p=0,h=0,g=0,y=0,k=0,b=0;if(o){a=t.innerWidth,i=t.innerHeight,c=t.pageYOffset,d=t.pageXOffset}else{const e=n.offsetWidth,o=n.offsetHeight,r=n.scrollTop,s=n.scrollLeft,l=t.getComputedStyle(n),m=l.borderTopWidth,v=l.borderBottomWidth,C=l.borderLeftWidth,E=l.borderRightWidth,x=l.paddingTop,D=l.paddingBottom,O=l.paddingLeft,w=l.paddingRight,T=n.getBoundingClientRect();a=e,i=o,u=T.top+parseInt(m,10),f=T.left+parseInt(C,10),p=parseInt(m,10)+parseInt(v,10),h=parseInt(C,10)+parseInt(E,10),g=parseInt(x,10),y=parseInt(D,10),k=parseInt(O,10),b=parseInt(w,10),c=r,d=s}const C=l.top+c-u,E=l.left+d-f;let x=d,D=c;E<d?x=E-k:E+l.width+h>d+a&&(x=E+h+b-a),C<c?D=C-g:C+l.height+p>c+i&&(D=C+p+y+l.height-i),o?t.scrollTo(x,D):(n.scrollTop=D,n.scrollLeft=x)}function ae(e){const t=window.document;if(t&&t.body.createTextRange){const e=t.body.createTextRange();e.collapse(),e.select()}else e.removeAllRanges()}const ie=/Permission denied to access property "nodeType"/,ce=r()("slate:content");class de extends c.a.Component{constructor(e){var t;super(e),t=this,S(this,"componentDidMount",()=>{v()(this.element).document.addEventListener("selectionchange",this.onNativeSelectionChange),(m.e||m.a)&&m.h.beforeinput&&this.element.addEventListener("beforeinput",this.onNativeBeforeInput),this.updateSelection()}),S(this,"componentDidUpdate",()=>{this.updateSelection()}),S(this,"updateSelection",()=>{const e=this.props,t=e.editor,n=e.readOnly,o=t.value,r=o.selection,s=r.isBackward,a=v()(this.element),i=a.getSelection();if(!i)return;const c=i.rangeCount,d=i.anchorNode;if(!c&&r.isBlurred)return;if(r.isBlurred){if(n||!this.isInEditor(d))return;return ae(i),this.element.blur(),void ce("updateSelection",{selection:r,native:i})}if(r.isUnset)return;const l=!!c&&i.getRangeAt(0),u=H(r,a);if(!u)return void function(e){const t=e.selection;setTimeout(()=>{function n(t){const n=e.document.getAncestors(t);return n?n.toArray().map(e=>e.type):[]}const o=new Error("Unable to find a native DOM range for current selection.");throw o.selection=t.toJS(),o.anchorAncestors=n(t.anchorKey),o.focusAncestors=n(t.focusKey),o},0)}(o);const f=u.startContainer,p=u.startOffset,h=u.endContainer,g=u.endOffset;l&&(f==l.startContainer&&p==l.startOffset&&h==l.endContainer&&g==l.endOffset||f==l.endContainer&&p==l.endOffset&&h==l.startContainer&&g==l.startOffset)||(this.tmp.isUpdatingSelection=!0,ae(i),i.setBaseAndExtent?s?i.setBaseAndExtent(u.endContainer,u.endOffset,u.startContainer,u.startOffset):i.setBaseAndExtent(u.startContainer,u.startOffset,u.endContainer,u.endOffset):i.addRange(u),se(i),setTimeout(()=>{m.c&&this.element&&this.element.focus(),this.tmp.isUpdatingSelection=!1}),ce("updateSelection",{selection:r,native:i}))}),S(this,"ref",e=>{this.element=e}),S(this,"isInEditor",function(e,n){void 0===n&&(n=!0);const o=t.element;let r;try{r=3===e.nodeType?e.parentNode:e}catch(s){if(m.c&&ie.test(s.message))return!1;throw s}return(!n||r.isContentEditable)&&(r===o||r.closest("[data-slate-editor]")===o)}),S(this,"onNativeBeforeInput",e=>{if(this.props.readOnly)return;if(!this.isInEditor(e.target))return;const t=e.getTargetRanges()[0];if(!t)return;const n=this.props.editor;switch(e.inputType){case"deleteContentBackward":{e.preventDefault();const o=ne(t,n.value);n.change(e=>e.deleteAtRange(o));break}case"insertLineBreak":case"insertParagraph":{e.preventDefault();const o=ne(t,n.value);n.change(e=>{e.value.isInVoid?e.collapseToStartOfNextText():e.splitBlockAtRange(o)});break}case"insertReplacementText":case"insertText":{const o=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==o)return;e.preventDefault();const r=n.value,s=r.selection,a=ne(t,r);n.change(e=>{e.insertTextAtRange(a,o,s.marks),s.marks&&r.document!=e.value.document&&e.select({marks:null})});break}}}),S(this,"onNativeSelectionChange",C()(e=>{if(this.props.readOnly)return;v()(e.target).document.activeElement===this.element&&this.props.onSelect(e)},100)),S(this,"renderNode",(e,t,n)=>{const o=this.props,r=o.editor,s=o.readOnly,a=r.value,i=a.document,d=a.isFocused;return c.a.createElement(z,{block:null,editor:r,decorations:n,isSelected:t,isFocused:d&&t,key:e.key,node:e,parent:i,readOnly:s})}),this.tmp={},this.tmp.isUpdatingSelection=!1,B.forEach(e=>{this[e]=(t=>{this.onEvent(e,t)})})}componentWillUnmount(){const e=v()(this.element);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),(m.e||m.a)&&m.h.beforeinput&&this.element.removeEventListener("beforeinput",this.onNativeBeforeInput)}onEvent(e,t){if(ce("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!=e&&"onBlur"!=e&&"onFocus"!=e){if("onSelect"==e){const e=this.props.editor.value,n=e.selection,o=ne(v()(t.target).getSelection(),e);if(o&&o.equals(n))return void this.updateSelection()}if("onDragEnd"==e||"onDragEnter"==e||"onDragExit"==e||"onDragLeave"==e||"onDragOver"==e||"onDragStart"==e||"onDrop"==e){if(t.target.closest("[data-slate-editor]")!==this.element)return}("onBeforeInput"!=e&&"onBlur"!=e&&"onCut"!=e&&"onCompositionEnd"!=e&&"onCompositionStart"!=e&&"onFocus"!=e&&"onInput"!=e&&"onKeyDown"!=e&&"onKeyUp"!=e&&"onPaste"!=e&&"onSelect"!=e||this.isInEditor(t.target))&&("onCopy"!=e||this.isInEditor(t.target,!1))&&this.props[e](t)}}render(){const e=this.props,t=e.className,n=e.readOnly,o=e.editor,r=e.tabIndex,s=e.role,a=e.tagName,i=e.spellCheck,d=o.value,l=o.stack,u=a,f=d.document,p=d.selection,h=d.decorations,g=f.getSelectionIndexes(p),m=f.getDecorations(l).concat(h||[]),y=M(f,m),v=f.nodes.toArray().map((e,t)=>{const n=!!g&&g.start<=t&&t<g.end;return this.renderNode(e,n,y[t])}),k=B.reduce((e,t)=>(e[t]=this[t],e),{}),b=R({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},n?{}:{WebkitUserModify:"read-write-plaintext-only"},e.style);return ce("render",{props:e}),c.a.createElement(u,N({},k,{"data-slate-editor":!0,ref:this.ref,"data-key":f.key,contentEditable:!n||null,suppressContentEditableWarning:!0,className:t,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onCopy:this.onCopy,onCut:this.onCut,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onDrop,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste,onSelect:this.onSelect,autoCorrect:e.autoCorrect?"on":"off",spellCheck:i,style:b,role:n?null:s||"textbox",tabIndex:r,"data-gramm":!1}),v,this.props.children)}}S(de,"propTypes",{autoCorrect:u.a.bool.isRequired,children:u.a.any.isRequired,className:u.a.string,editor:u.a.object.isRequired,readOnly:u.a.bool.isRequired,role:u.a.string,spellCheck:u.a.bool.isRequired,style:u.a.object,tabIndex:u.a.number,tagName:u.a.string}),S(de,"defaultProps",{style:{},tagName:"div"}),B.forEach(e=>{de.propTypes[e]=u.a.func.isRequired});const le={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},ue=le.FRAGMENT,fe=le.HTML,pe=le.TEXT;function he(e,t,n){void 0===n&&(n=t.fragment);const o=v()(e.target),r=o.getSelection(),s=t.startKey,a=t.endKey,i=t.document.getClosestVoid(s),c=t.document.getClosestVoid(a);if(r.isCollapsed&&!i)return;const d=h.a.serializeNode(n),l=r.getRangeAt(0);let u=l.cloneContents(),f=u.childNodes[0];if(Array.from(u.childNodes).forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(f=e)}),c){const e=l.cloneRange(),t=W(c,o);t&&(e.setEndAfter(t),u=e.cloneContents())}if(i&&(f=u.childNodes[0].childNodes[1].firstChild),[].slice.call(u.querySelectorAll(J)).forEach(e=>{const t="n"===e.getAttribute(X);e.textContent=t?"\n":""}),3==f.nodeType){const e=o.document.createElement("span");e.style.whiteSpace="pre",e.appendChild(f),u.appendChild(e),f=e}f.setAttribute("data-slate-fragment",d);const y=p.Value.create({document:n}),k=g.a.serialize(y),b=o.document.createElement("div");if(b.appendChild(u),e.clipboardData&&e.clipboardData.setData&&!m.d)return e.preventDefault(),e.clipboardData.setData(pe,k),e.clipboardData.setData(ue,d),void e.clipboardData.setData(fe,b.innerHTML);const C=e.target.closest("[data-slate-editor]");b.setAttribute("contenteditable",!0),b.style.position="absolute",b.style.left="-9999px",C.appendChild(b),r.selectAllChildren(b),o.requestAnimationFrame(()=>{C.removeChild(b),ae(r),r.addRange(l)})}function ge(e,t){const n=e.closest("[data-key]");if(!n)return null;const o=n.getAttribute("data-key");return o&&t.document.getNode(o)||null}function me(e,t){e.nativeEvent&&(e=e.nativeEvent);const n=e,o=n.x,r=n.y,s=n.target;if(null==o||null==r)return null;const a=t.document,i=ge(s,t);if(!i)return null;if(i.isVoid){const e=s.getBoundingClientRect(),t="inline"==i.object?o-e.left<e.left+e.width-o:r-e.top<e.top+e.height-r,n=i.getFirstText(),c=p.Range.create();if(t){const e=a.getPreviousText(n.key);if(e)return c.moveToEndOf(e)}const d=a.getNextText(n.key);return d?c.moveToStartOf(d):null}const c=v()(s);let d;if(c.document.caretRangeFromPoint)d=c.document.caretRangeFromPoint(o,r);else if(c.document.caretPositionFromPoint){const e=c.document.caretPositionFromPoint(o,r);(d=c.document.createRange()).setStart(e.offsetNode,e.offset),d.setEnd(e.offsetNode,e.offset)}else if(c.document.body.createTextRange){d=c.document.body.createTextRange();try{d.moveToPoint(o,r)}catch(u){return null}}const l=ne(d,t);return l||null}const ye=le.FRAGMENT,ve=le.HTML,ke=le.NODE,be=le.RICH,Ce=le.TEXT,Ee=/ data-slate-fragment="([^\s"]+)"/;function xe(e){!m.d&&e.nativeEvent&&(e=e.nativeEvent);const t=e.dataTransfer||e.clipboardData;let n=De(t,ye),o=De(t,ke);const r=De(t,ve),s=De(t,be);let a,i=De(t,Ce);if(!n&&r&&~r.indexOf(' data-slate-fragment="')){const e=Ee.exec(r),t=(e[0],e[1]);t&&(n=t)}if(i){const e=function(e){const t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!=t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(n){throw new Error("Unable to parse custom Slate drag event data.")}}(i);e[ye]&&(n=e[ye]),e[ke]&&(o=e[ke]),e[Ce]&&(i=e[Ce])}n&&(n=h.a.deserializeNode(n)),o&&(o=h.a.deserializeNode(o));try{t.items&&t.items.length?a=Array.from(t.items).map(e=>"file"==e.kind?e.getAsFile():null).filter(e=>e):t.files&&t.files.length&&(a=Array.from(t.files))}catch(d){t.files&&t.files.length&&(a=Array.from(t.files))}const c={files:a,fragment:n,html:r,node:o,rich:s,text:i};return c.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(c),c}function De(e,t){if(!e.types||!e.types.length)return t==Ce&&e.getData("Text")||null;return-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null}const Oe=le.TEXT;function we(e,t,n){const o=le[t.toUpperCase()];if(!o)throw new Error(`Cannot set unknown transfer type "${o}".`);e.nativeEvent&&(e=e.nativeEvent);const r=e.dataTransfer||e.clipboardData;try{r.setData(o,n),r.setData("text",r.getData("text"))}catch(s){const e="SLATE-DATA-EMBED::",t=r.getData(Oe);let i={};if(t.substring(0,e.length)===e)try{i=JSON.parse(t.substring(e.length))}catch(a){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else i[Oe]=t;i[o]=n;const c=`${e}${JSON.stringify(i)}`;r.setData(Oe,c)}}const Te=r()("slate:after");function Se(){let e=null;return{onBeforeInput:function(e,t,n){Te("onBeforeInput",{event:e}),e.preventDefault(),t.insertText(e.data)},onBlur:function(e,t,n){Te("onBlur",{event:e}),t.blur()},onClick:function(e,t,n){if(n.props.readOnly)return!0;const o=t.value,r=o.document,s=ge(e.target,o);s&&((s.isVoid||r.hasVoidParent(s.key))&&t.focus().collapseToEndOf(s),Te("onClick",{event:e}))},onCopy:function(e,t,n){Te("onCopy",{event:e}),he(e,t.value)},onCut:function(e,t,n){Te("onCut",{event:e});const o=t.value;he(e,o),n.props.readOnly||v()(e.target).requestAnimationFrame(()=>{const e=o.endBlock,t=o.endInline,r=o.isCollapsed,s=e&&e.isVoid&&r,a=t&&t.isVoid&&r;s?n.change(t=>t.removeNodeByKey(e.key)):a?n.change(e=>e.removeNodeByKey(t.key)):n.change(e=>e.delete())})},onDragEnd:function(t,n,o){Te("onDragEnd",{event:t}),e=null},onDragOver:function(e,t,n){Te("onDragOver",{event:e})},onDragStart:function(t,n,o){Te("onDragStart",{event:t}),e=!0;const r=n.value,s=r.document,a=ge(t.target,r);if(a&&(a.isVoid||s.hasVoidParent(a.key)))we(t,"node",h.a.serializeNode(a,{preserveKeys:!0}));else{const e=r.fragment;we(t,"fragment",h.a.serializeNode(e))}},onDrop:function(t,n,o){Te("onDrop",{event:t});const r=n.value,s=r.document,a=r.selection,i=v()(t.target);let c=me(t,r);if(!c)return;const d=xe(t),l=d.type,u=d.fragment,f=d.node,h=d.text;if(n.focus(),e&&a.endKey==c.endKey&&a.endOffset<c.endOffset&&(c=c.move(a.startKey==a.endKey?0-a.endOffset+a.startOffset:0-a.endOffset)),e&&n.delete(),n.select(c),"text"==l||"html"==l){const e=c.anchorKey;let t=s.hasVoidParent(e);if(t){let o=s.getNode(e);for(;t&&(o=s.getNextText(o.key));)t=s.hasVoidParent(o.key);o&&n.collapseToStartOf(o)}h&&h.split("\n").forEach((e,t)=>{t>0&&n.splitBlock(),n.insertText(e)})}"fragment"==l&&n.insertFragment(u),"node"==l&&p.Block.isBlock(f)&&n.insertBlock(f.regenerateKey()).removeNodeByKey(f.key),"node"==l&&p.Inline.isInline(f)&&n.insertInline(f.regenerateKey()).removeNodeByKey(f.key);const g=W(s.getNode(c.focusKey),i);g&&g.dispatchEvent(new MouseEvent("mouseup",{view:i,bubbles:!0,cancelable:!0}))},onInput:function(e,t,n){Te("onInput",{event:e});const o=v()(e.target),r=t.value,s=o.getSelection().anchorNode,a=ee(s,0,r);if(!a)return;const i=r.document,c=r.selection,d=i.getDescendant(a.key),l=i.getClosestBlock(d.key),u=d.getLeaves(),f=l.getLastText(),p=u.last();let h=0,g=0;const m=u.find(e=>{if(h=g,(g+=e.text.length)>a.offset)return!0})||p,y=m.text;let k=s.textContent;const b=d==f,C=m==p,E=k.charAt(k.length-1);if(b&&C&&"\n"==E&&(k=k.slice(0,-1)),k==y)return;const x=k.length-y.length,D=c.collapseToEnd().move(x),O=c.moveAnchorTo(a.key,h).moveFocusTo(a.key,g);t.insertTextAtRange(O,k,m.marks).select(D)},onKeyDown:function(e,t,n){Te("onKeyDown",{event:e});const o=t.value;if(k.a.isSplitBlock(e)&&!m.e)return o.isInVoid?t.collapseToStartOfNextText():t.splitBlock();if(k.a.isDeleteCharBackward(e)&&!m.e)return t.deleteCharBackward();if(k.a.isDeleteCharForward(e)&&!m.e)return t.deleteCharForward();if(k.a.isDeleteLineBackward(e))return t.deleteLineBackward();if(k.a.isDeleteLineForward(e))return t.deleteLineForward();if(k.a.isDeleteWordBackward(e))return t.deleteWordBackward();if(k.a.isDeleteWordForward(e))return t.deleteWordForward();if(k.a.isRedo(e))return t.redo();if(k.a.isUndo(e))return t.undo();if(k.a.isCollapseLineBackward(e))return e.preventDefault(),t.collapseLineBackward();if(k.a.isCollapseLineForward(e))return e.preventDefault(),t.collapseLineForward();if(k.a.isExtendLineBackward(e))return e.preventDefault(),t.extendLineBackward();if(k.a.isExtendLineForward(e))return e.preventDefault(),t.extendLineForward();if(k.a.isCollapseCharBackward(e)){const n=o.document,r=o.isInVoid,s=o.previousText,a=o.startText,i=s&&n.hasVoidParent(s.key);if(r||i||""==a.text)return e.preventDefault(),t.collapseCharBackward()}if(k.a.isCollapseCharForward(e)){const n=o.document,r=o.isInVoid,s=o.nextText,a=o.startText,i=s&&n.hasVoidParent(s.key);if(r||i||""==a.text)return e.preventDefault(),t.collapseCharForward()}if(k.a.isExtendCharBackward(e)){const n=o.document,r=o.isInVoid,s=o.previousText,a=o.startText,i=s&&n.hasVoidParent(s.key);if(r||i||""==a.text)return e.preventDefault(),t.extendCharBackward()}if(k.a.isExtendCharForward(e)){const n=o.document,r=o.isInVoid,s=o.nextText,a=o.startText,i=s&&n.hasVoidParent(s.key);if(r||i||""==a.text)return e.preventDefault(),t.extendCharForward()}},onPaste:function(e,t,n){Te("onPaste",{event:e});const o=xe(e),r=o.type,s=o.fragment,a=o.text;if("fragment"==r&&t.insertFragment(s),"text"==r||"html"==r){if(!a)return;const e=t.value,n=e.document,o=e.selection,r=e.startBlock;if(r.isVoid)return;const s=r,i=n.getInsertMarksAtRange(o),c=g.a.deserialize(a,{defaultBlock:s,defaultMarks:i}).document;t.insertFragment(c)}},onSelect:function(e,t,n){Te("onSelect",{event:e});const o=v()(e.target),r=t.value,s=r.document,a=o.getSelection();if(!a.rangeCount)return void t.blur();let i=ne(a,r);if(!i)return;const c=i,d=c.anchorKey,l=c.anchorOffset,u=c.focusKey,f=c.focusOffset,p=s.getNode(d),h=s.getNode(u),g=s.getClosestInline(d),m=s.getClosestInline(u),y=s.getClosestBlock(u),k=s.getClosestBlock(d);if(k&&!k.isVoid&&0==l&&y&&y.isVoid&&0!=f&&(i=i.set("focusOffset",0)),g&&!g.isVoid&&l==p.text.length){const e=s.getClosestBlock(d).getNextText(d);e&&(i=i.moveAnchorTo(e.key,0))}if(m&&!m.isVoid&&f==h.text.length){const e=s.getClosestBlock(u).getNextText(u);e&&(i=i.moveFocusTo(e.key,0))}i=(i=i.normalize(s)).set("marks",r.selection.marks),t.select(i)},renderEditor:function(e,t){const n=B.reduce((e,n)=>(e[n]=t[n],e),{});return c.a.createElement(de,N({},n,{autoCorrect:e.autoCorrect,className:e.className,children:e.children,editor:t,readOnly:e.readOnly,role:e.role,spellCheck:e.spellCheck,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName}))},renderNode:function(e){const t=e.attributes,n=e.children,o=e.node;if("block"!=o.object&&"inline"!=o.object)return;const r="block"==o.object?"div":"span";return c.a.createElement(r,N({},t,{style:{position:"relative"}}),n)},renderPlaceholder:function(e){const t=e.editor,n=e.node;if(!t.props.placeholder)return;if(t.state.isComposing)return;if("block"!=n.object)return;if(!p.Text.isTextList(n.nodes))return;if(""!=n.text)return;if(t.value.document.getBlocks().size>1)return;return c.a.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"}},t.props.placeholder)}}}const Ne=r()("slate:before");function Re(){let e=null,t=0,n=!1,o=!1,r=!1;return{onBeforeInput:function(e,t,n){return!!n.props.readOnly||!(!m.e&&!m.a||!m.h.beforeinput)||void Ne("onBeforeInput",{event:e})},onBlur:function(t,n,r){if(o)return!0;if(r.props.readOnly)return!0;const s=n.value,a=t.relatedTarget,i=t.target,c=v()(i);if(e==c.document.activeElement)return!0;if(a){const e=Object(T.findDOMNode)(r);if(a==e)return!0;if(a.hasAttribute("data-slate-spacer"))return!0;const t=ge(a,s);if(e.contains(a)&&t&&!t.isVoid)return!0}Ne("onBlur",{event:t})},onChange:function(e,t){e.value.schema!=t.schema&&e.setValue({schema:t.schema},{save:!1}).normalize(),Ne("onChange")},onCompositionEnd:function(e,o,r){const s=t;window.requestAnimationFrame(()=>{t>s||(n=!1,r.state.isComposing&&r.setState({isComposing:!1}))}),Ne("onCompositionEnd",{event:e})},onCompositionStart:function(e,o,r){n=!0,t++,r.state.isComposing||r.setState({isComposing:!0}),Ne("onCompositionStart",{event:e})},onCopy:function(e,t,n){const r=v()(e.target);if(!function(e,t,n){const o=n.props.readOnly,r=t.value;if(!o)return!0;const s=ne(v()(e.target).getSelection(),r);return!!s&&(t.select(s),!0)}(e,t,n))return!0;o=!0,r.requestAnimationFrame(()=>o=!1),Ne("onCopy",{event:e})},onCut:function(e,t,n){const r=v()(e.target);o=!0,r.requestAnimationFrame(()=>o=!1),Ne("onCut",{event:e})},onDragEnd:function(e,t,n){r=!1,Ne("onDragEnd",{event:e})},onDragEnter:function(e,t,n){Ne("onDragEnter",{event:e})},onDragExit:function(e,t,n){Ne("onDragExit",{event:e})},onDragLeave:function(e,t,n){Ne("onDragLeave",{event:e})},onDragOver:function(e,t,n){ge(e.target,n.value).isVoid&&e.preventDefault(),m.d&&e.preventDefault(),r||(r=!0,m.d||(e.nativeEvent.dataTransfer.dropEffect="move")),Ne("onDragOver",{event:e})},onDragStart:function(e,t,n){r=!0,Ne("onDragStart",{event:e})},onDrop:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),Ne("onDrop",{event:e})},onFocus:function(t,n,r){if(o)return!0;if(r.props.readOnly)return!0;const s=Object(T.findDOMNode)(r),a=v()(t.target);if(e=a.document.activeElement,m.c&&t.target!=s)return s.focus(),!0;Ne("onFocus",{event:t})},onInput:function(e,t,o){return!!n||!!t.value.isBlurred||void Ne("onInput",{event:e})},onKeyDown:function(e,t,o){return!!o.props.readOnly||(n?(k.a.isComposing(e)&&e.preventDefault(),!0):(k.a.isContentEditable(e)&&!m.e&&e.preventDefault(),void Ne("onKeyDown",{event:e})))},onPaste:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),Ne("onPaste",{event:e})},onSelect:function(t,r,s){if(o)return!0;if(n)return!0;if(s.props.readOnly)return!0;const a=v()(t.target);e=a.document.activeElement,Ne("onSelect",{event:t})}}}const Be=r()("slate:editor");class Ae extends c.a.Component{constructor(e){var t;super(e),t=this,S(this,"componentWillReceiveProps",e=>{let t=this.schema,n=this.stack;if(this.tmp.updates++,e.plugins!=this.props.plugins||e.schema!=this.props.schema){const o=this.resolvePlugins(e.plugins,e.schema);n=p.Stack.create({plugins:o}),t=p.Schema.create({plugins:o}),this.setState({schema:t,stack:n}),this.tmp.resolves++,this.tmp.resolves>5&&this.tmp.resolves==this.tmp.updates&&f.a.warn("A Slate <Editor> is re-resolving `props.plugins` or `props.schema` on each update, which leads to poor performance. This is often due to passing in a new `schema` or `plugins` prop with each render by declaring them inline in your render function. Do not do this!")}const o=e.value.change();n.run("onChange",o,this),this.queueChange(o),this.setState({value:o.value})}),S(this,"componentDidMount",()=>{this.flushChange(),this.props.autoFocus&&this.focus()}),S(this,"componentDidUpdate",()=>{this.flushChange()}),S(this,"queueChange",e=>{e.operations.size&&(Be("queueChange",{change:e}),this.tmp.change=e)}),S(this,"flushChange",()=>{const e=this.tmp.change;e&&(Be("flushChange",{change:e}),delete this.tmp.change,this.props.onChange(e))}),S(this,"change",function(){const e=t.value.change().call(...arguments);t.onChange(e)}),S(this,"blur",()=>{this.change(e=>e.blur())}),S(this,"focus",()=>{this.change(e=>e.focus())}),S(this,"onEvent",(e,t)=>{this.change(n=>{this.stack.run(e,t,n,this)})}),S(this,"onChange",e=>{if(Be("onChange",{change:e}),this.props.readOnly)return;this.stack.run("onChange",e,this);const t=e.value,n=this.props.onChange;t!=this.value&&n(e)}),S(this,"resolvePlugins",(e,n)=>{const o=Re(),r=Se(),s={schema:n||{}};for(const a of A)"onChange"!=a&&"schema"!=a&&(s[a]=function(){return t.props[a]&&t.props[a](...arguments)});return[o,s,...e||[],r]}),this.state={},this.tmp={},this.tmp.updates=0,this.tmp.resolves=0;const n=this.resolvePlugins(e.plugins,e.schema),o=p.Stack.create({plugins:n}),r=p.Schema.create({plugins:n});this.state.schema=r,this.state.stack=o;const s=e.value.change();o.run("onChange",s,this),this.queueChange(s),this.state.value=s.value,B.forEach(e=>{this[e]=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];t.onEvent(e,...o)}})}get schema(){return this.state.schema}get stack(){return this.state.stack}get value(){return this.state.value}render(){Be("render",this);const e=this.stack.map("renderPortal",this.value,this).map((e,t)=>c.a.createElement(a.a,{key:t,isOpened:!0},e)),t=R({},this.props,{children:e});return this.stack.render("renderEditor",t,this)}}S(Ae,"propTypes",{autoCorrect:u.a.bool,autoFocus:u.a.bool,className:u.a.string,onChange:u.a.func,placeholder:u.a.any,plugins:u.a.array,readOnly:u.a.bool,role:u.a.string,schema:u.a.object,spellCheck:u.a.bool,style:u.a.object,tabIndex:u.a.number,value:d.a.value.isRequired}),S(Ae,"defaultProps",{autoFocus:!1,autoCorrect:!0,onChange:function(){},plugins:[],readOnly:!1,schema:{},spellCheck:!0});for(const Fe of B)Ae.propTypes[Fe]=u.a.func;var Ie={Editor:Ae,cloneFragment:he,findDOMNode:W,findDOMRange:H,findNode:ge,findRange:ne,getEventRange:me,getEventTransfer:xe,setEventTransfer:we,AfterPlugin:Se,BeforePlugin:Re};t.default=Ie}}]);